<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReadMe</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><h1 id="scf-php-client使用">SCF PHP Client使用</h1>

<p>demo：wiki路径<a href="http://wiki.58corp.com/index.php?title=%E6%96%87%E4%BB%B6:Phpdemo.zip">http://wiki.58corp.com/index.php?title=%E6%96%87%E4%BB%B6:Phpdemo.zip</a> <br>
详细使用文档：wiki路径<a href="http://wiki.58corp.com/index.php?title=SCF#SCF_PHP.E5.AE.A2.E6.88.B7.E7.AB.AF.E4.BD.BF.E7.94.A8.E6.96.87.E6.A1.A3">http://wiki.58corp.com/index.php?title=SCF#SCF_PHP.E5.AE.A2.E6.88.B7.E7.AB.AF.E4.BD.BF.E7.94.A8.E6.96.87.E6.A1.A3</a></p>

<hr>

<h2 id="demo">DEMO</h2>

<p>namespace phpdemo\demo;</p>

<p>require __DIR__ . ‘/../lib/com/bj58/spat/scf/classLoader/SCFClassLoader.php’;</p>

<p>use com\bj58\spat\scf\classloader\SCFClassLoader; <br>
use com\bj58\spat\scf\client\SCFInit; <br>
use com\scf\sample\server\contract\IPhpService; <br>
use com\bj58\spat\scf\client\utility\LogHelper;</p>

<p>$loader = new SCFClassLoader();<br>
$loader->registerNamespace(‘com’, __DIR__ . ‘/../lib’); <br>
$loader->register();</p>

<p>try {<br>
$serviceName = ‘scfdemo’;<br>
$lookup = ‘PhpService’; <br>
$scfKeyPath = __DIR__ . '/../conf/scfkey.key';<br>
$obj = SCFInit::InitScfKey($scfKeyPath); <br>
$IPhpService = new IPhpService($serviceName, $lookup, $obj);<br>
$b = true; <br>
$res = $IPhpService->getBool($b);<br>
} catch (\Exception $e) {<br>
}<br>

<hr>



<h2 id="详解">详解</h2>



<h4 id="首先加载scfclassloader文件require后接的为scfclassloaderphp文件路径">首先加载SCFClassLoader文件，require后接的为SCFClassLoader.php文件路径；</h4>

<p>require __DIR__ . ‘/../lib/com/bj58/spat/scf/classLoader/SCFClassLoader.php’;</p>



<h4 id="向scfclassloader中注册命名空间">向SCFClassLoader中注册命名空间</h4>

<p>$loader = new SCFClassLoader();<br>
$loader->registerNamespace(‘com’, __DIR__ . ‘/../lib’); <br>
$loader->register();</p>



<h4 id="初始化配文件路径">初始化配文件路径</h4>
<p>初始化scfKey.key，框架将不输出任何的日志信息 <br>
SCFInit::InitScfKey(‘/项目路径/conf/scfKey.key’);</p>




<blockquote>
  <p><strong>Note:</strong></p>

  <ul>
  <li>赶集侧在写配置文件路径的时候，路径地址为“/项目路径/conf/scf/业务线名称/scf.config”,详情请与rtx<strong>杜翔（duxiang）</strong>和<strong>邢文戈（xingwenge）</strong>咨询。</li>
  </ul>
</blockquote>

<h4 id="调用服务">调用服务</h4>

<p>$serviceName = ‘scfdemo’;<br>
$lookup = ‘PhpService’; <br>
$IPhpService = new IPhpService($serviceName, $lookup, $obj);<br>
$b = true; <br>
$res = $IPhpService->getBool($b);<br>



<h4 id="日志打印">日志打印</h4>

<p>提供两种方式，如下：</p>



<h5 id="方式一-1">方式一：</h5>

<p>使用框架提供的打印方式，框架提供两种：一种是不打印（使用SCFInit中的<strong>InitScfKey</strong>的方式初始化路径）；另一种需要在初始化的时候注册一下，SCFInit::InitLog(SCFDefaultLog::getInstance($logPath, SCFDefaultLog::INFO))，将日志打印到$logPath下；</p>



<h5 id="方式二-1">方式二：</h5>

<p>实现框架的ILog接口，自己实现日志打印的方式，用法如下： <br>
首先实现ILog接口； <br>
class Log implements ILog { <br>
 /** <br>
 *实现接口的日志打印方法 <br>
 **/ <br>
}</p>

<p>然后，注册logHandler <br>
SCFInit::InitLog($logHandler);<br>
开始打印日志 <br>
LogHelper::logInfoMsg(‘result is ’ . $res);</p></div></body>
</html>