{
    "version": 3,
    "file": "ColorPicker.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/ColorPicker.tsx"
    ],
    "names": [],
    "mappings": ";AAAA;;;;GAIG;;;;AAEH,wDAA0B;AAE1B,uCAAsC;AACtC,2CAAmE;AACnE,iCAA6B;AAC7B,8DAAgC;AAChC,iDAA8C;AAC9C,8DAAgC;AAChC,kCAA6D;AAC7D,0CAAyC;AACzC,oCAAkD;AAwBlD;IAAkC,wCAGjC;IAiBC,sBAAY,KAAiB;QAA7B,YACE,kBAAM,KAAK,CAAC,SAcb;QAxBD,WAAK,GAAG;YACN,QAAQ,EAAE,KAAK;YACf,SAAS,EAAE,KAAK;YAChB,UAAU,EAAE,KAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE;SACnC,CAAC;QAQA,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACjC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACnC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACnC,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACjC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QACjD,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC/C,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC7C,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC7C,KAAI,CAAC,iBAAiB,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC3D,KAAI,CAAC,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;QAC/C,KAAI,CAAC,OAAO,GAAG,eAAK,CAAC,SAAS,EAAE,CAAC;QACjC,KAAI,CAAC,KAAK,GAAG,eAAK,CAAC,SAAS,EAAE,CAAC;;IACjC,CAAC;IAED,gDAAyB,GAAzB,UAA0B,SAAqB;QAC7C,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QAEzB,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,EAAE;YACnC,IAAI,CAAC,QAAQ,CAAC;gBACZ,UAAU,EAAE,SAAS,CAAC,KAAK,IAAI,EAAE;aAClC,CAAC,CAAC;SACJ;IACH,CAAC;IAED,kCAAW,GAAX;QACE,IAAI,CAAC,QAAQ,CAAC;YACZ,SAAS,EAAE,IAAI;SAChB,CAAC,CAAC;IACL,CAAC;IAED,iCAAU,GAAV;QACE,IAAI,CAAC,QAAQ,CAAC;YACZ,SAAS,EAAE,KAAK;YAChB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;SAC7B,CAAC,CAAC;IACL,CAAC;IAED,4BAAK,GAAL;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IACnD,CAAC;IAED,2BAAI,GAAJ;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IAClD,CAAC;IAED,2BAAI,GAAJ,UAAK,EAAe;QAClB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,OAAO;SACR;QACD,IAAI,CAAC,QAAQ,CACX;YACE,QAAQ,EAAE,IAAI;SACf,EACD,EAAE,CACH,CAAC;IACJ,CAAC;IAED,4BAAK,GAAL;QACE,IAAI,CAAC,QAAQ,CAAC;YACZ,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;IACL,CAAC;IAED,iCAAU,GAAV;QACQ,IAAA,KAAyB,IAAI,CAAC,KAAK,EAAlC,QAAQ,cAAA,EAAE,UAAU,gBAAc,CAAC;QAC1C,QAAQ,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC;IAC7B,CAAC;IAED,kCAAW,GAAX;QACE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC7D,CAAC;IAED,wCAAiB,GAAjB,UAAkB,CAAsC;QAAxD,iBAkBC;QAjBC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE;YAChC,OAAO;SACR;QAED,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAErC,IAAI,CAAC,QAAQ,CACX;YACE,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK;SAClC,EACD;YACE,IAAI,WAAW,GAAG,KAAI,CAAC,aAAa,CAAC,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAC5D,IAAI,WAAW,EAAE;gBACf,QAAQ,CAAC,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;aACjC;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAGD,oCAAa,GAAb,UAAc,KAAa;QACzB,IAAI,KAAK,KAAK,EAAE,EAAE;YAChB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,KAAK,KAAK,SAAS,EAAE;YACvB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,KAAK,KAAK,aAAa,EAAE;YAC3B,OAAO,KAAK,CAAC;SACd;QAED,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,cAAc,CAAC;QACnC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAC1B,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,cAAc,EAAE;YACxC,OAAO,IAAI,CAAC;SACb;QACD,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,oBAAoB,CAAC;QACzC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QAC1B,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,oBAAoB,CAAC;IACpD,CAAC;IAED,mCAAY,GAAZ,UAAa,KAAiB;QACtB,IAAA,KAIF,IAAI,CAAC,KAAK,EAHZ,QAAQ,cAAA,EACR,MAAM,YAAA;QACN,gBAAgB;QACJ,CAAC;QAEf,IAAI,MAAM,KAAK,MAAM,EAAE;YACrB,QAAQ,CACN,UAAQ,KAAK,CAAC,GAAG,CAAC,CAAC,UAAK,KAAK,CAAC,GAAG,CAAC,CAAC,UAAK,KAAK,CAAC,GAAG,CAAC,CAAC,UAAK,KAAK,CAAC,GAAG,CAAC,CAAC,MAAG,CACvE,CAAC;SACH;aAAM,IAAI,MAAM,KAAK,KAAK,EAAE;YAC3B,QAAQ,CAAC,SAAO,KAAK,CAAC,GAAG,CAAC,CAAC,UAAK,KAAK,CAAC,GAAG,CAAC,CAAC,UAAK,KAAK,CAAC,GAAG,CAAC,CAAC,MAAG,CAAC,CAAC;SACjE;aAAM,IAAI,MAAM,KAAK,KAAK,EAAE;YAC3B,QAAQ,CACN,SAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,UAAK,IAAI,CAAC,KAAK,CAC3C,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAClB,WAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,OAAI,CACzC,CAAC;SACH;aAAM;YACL,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACrB;QAED,iCAAiC;IACnC,CAAC;IAED,6BAAM,GAAN;QAAA,iBA8FC;QA7FO,IAAA,KAaF,IAAI,CAAC,KAAK,EAZC,EAAE,iBAAA,EACf,SAAS,eAAA,EACT,KAAK,WAAA,EACL,WAAW,iBAAA,EACX,QAAQ,cAAA,EACR,gBAAgB,sBAAA,EAChB,MAAM,YAAA,EACN,SAAS,eAAA,EACT,SAAS,eAAA,EACG,EAAE,gBAAA,EACd,YAAY,kBAAA,EACZ,gBAAgB,sBACJ,CAAC;QAEf,IAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QAChC,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QACrC,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QAEvC,OAAO,CACL,uCACE,SAAS,EAAE,EAAE,CACX,aAAa,EACb;gBACE,aAAa,EAAE,QAAQ;gBACvB,YAAY,EAAE,SAAS;aACxB,EACD,SAAS,CACV;YAED,yCACE,GAAG,EAAE,IAAI,CAAC,KAAK,EACf,IAAI,EAAC,MAAM,EACX,YAAY,EAAC,KAAK,EAClB,IAAI,EAAE,EAAE,EACR,SAAS,EAAE,EAAE,CAAC,mBAAmB,CAAC,EAClC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE,EAClC,WAAW,EAAE,EAAE,CAAC,WAAW,CAAC,EAC5B,QAAQ,EAAE,QAAQ,EAClB,QAAQ,EAAE,IAAI,CAAC,iBAAiB,EAChC,OAAO,EAAE,IAAI,CAAC,WAAW,EACzB,MAAM,EAAE,IAAI,CAAC,UAAU,EACvB,OAAO,EAAE,IAAI,CAAC,WAAW,GACzB;YAED,SAAS,IAAI,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC,CACjC,qCAAG,OAAO,EAAE,IAAI,CAAC,UAAU,EAAE,SAAS,EAAE,EAAE,CAAC,mBAAmB,CAAC;gBAC7D,8BAAC,YAAI,IAAC,IAAI,EAAC,OAAO,EAAC,SAAS,EAAC,MAAM,GAAG,CACpC,CACL,CAAC,CAAC,CAAC,IAAI;YAER,wCAAM,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,SAAS,EAAE,EAAE,CAAC,qBAAqB,CAAC;gBACnE,qCACE,GAAG,EAAE,IAAI,CAAC,OAAO,EACjB,SAAS,EAAK,EAAE,4BAAyB,EACzC,KAAK,EAAE,EAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,MAAM,EAAC,GACpD,CACG;YAEN,QAAQ,CAAC,CAAC,CAAC,CACV,8BAAC,iBAAO,IACN,SAAS,EAAE,SAAS,IAAI,MAAM,EAC9B,MAAM,EAAE,cAAM,OAAA,uBAAW,CAAC,KAAI,CAAC,EAAjB,CAAiB,EAC/B,MAAM,EAAE,IAAI,CAAC,KAAK,EAClB,SAAS,EAAE,gBAAgB,IAAI,CAAC,cAAM,OAAA,uBAAW,CAAC,KAAI,CAAC,EAAjB,CAAiB,CAAC,EACxD,SAAS,EAAE,KAAK,EAChB,IAAI;gBAEJ,8BAAC,iBAAO,IACN,WAAW,EAAE,EAAE,EACf,SAAS,EAAE,EAAE,CAAC,qBAAqB,CAAC,EACpC,MAAM,EAAE,IAAI,CAAC,KAAK,EAClB,OAAO,UAEN,gBAAgB,CAAC,CAAC,CAAC,CAClB,8BAAC,0BAAY,IACX,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,OAAO,CAAC,MAAgB,CAAC,EACzD,KAAK,EAAE,KAAK,EACZ,YAAY,EAAE,YAAY,EAC1B,gBAAgB,EAAE,IAAI,CAAC,YAAY,GACnC,CACH,CAAC,CAAC,CAAC,CACF,8BAAC,0BAAY,IACX,KAAK,EAAE,KAAK,EACZ,MAAM,EAAE,YAAY,EACpB,gBAAgB,EAAE,IAAI,CAAC,YAAY,GACnC,CACH,CACO,CACF,CACX,CAAC,CAAC,CAAC,IAAI,CACJ,CACP,CAAC;IACJ,CAAC;IA9PM,yBAAY,GAAG;QACpB,MAAM,EAAE,KAAK;QACb,SAAS,EAAE,IAAI;QACf,WAAW,EAAE,OAAO;QACpB,gBAAgB,EAAE,IAAI;QACtB,sBAAsB;KACvB,CAAC;IA0GF;QADC,iBAAQ;;;;qDAqBR;IA2HH,mBAAC;CAAA,AAnQD,CAAkC,eAAK,CAAC,aAAa,GAmQpD;AAnQY,oCAAY;AAqQzB,kBAAe,iBAAS,CACtB,mBAAU,CACR,+BAAc,CAAC,YAAY,EAAE;IAC3B,KAAK,EAAE,UAAU;CAClB,CAAC,CACH,CACF,CAAC",
    "sourcesContent": [
        "/**\n * @file ColorPicker\n * @description 颜色选择器组件\n * @author fex\n */\n\nimport React from 'react';\nimport cx from 'classnames';\nimport {findDOMNode} from 'react-dom';\nimport {SketchPicker, GithubPicker, ColorState} from 'react-color';\nimport {Icon} from './icons';\nimport Overlay from './Overlay';\nimport {uncontrollable} from 'uncontrollable';\nimport PopOver from './PopOver';\nimport {ClassNamesFn, themeable, ThemeProps} from '../theme';\nimport {autobind} from '../utils/helper';\nimport {localeable, LocaleProps} from '../locale';\n\nexport interface ColorProps extends LocaleProps, ThemeProps {\n  placeholder?: string;\n  format: string;\n  // closeOnSelect:boolean;\n  clearable: boolean;\n  className?: string;\n  disabled?: boolean;\n  popOverContainer?: any;\n  placement?: string;\n  value?: any;\n  onChange: (value: any) => void;\n  presetColors?: string[];\n  resetValue?: string;\n  allowCustomColor?: boolean;\n}\n\nexport interface ColorControlState {\n  isOpened: boolean;\n  isFocused: boolean;\n  inputValue: string;\n}\n\nexport class ColorControl extends React.PureComponent<\n  ColorProps,\n  ColorControlState\n> {\n  static defaultProps = {\n    format: 'hex',\n    clearable: true,\n    placeholder: '请选择颜色',\n    allowCustomColor: true\n    // closeOnSelect: true\n  };\n  state = {\n    isOpened: false,\n    isFocused: false,\n    inputValue: this.props.value || ''\n  };\n  popover: any;\n  closeTimer: number;\n  preview: React.RefObject<HTMLElement>;\n  input: React.RefObject<HTMLInputElement>;\n  constructor(props: ColorProps) {\n    super(props);\n\n    this.open = this.open.bind(this);\n    this.close = this.close.bind(this);\n    this.focus = this.focus.bind(this);\n    this.blur = this.blur.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.clearValue = this.clearValue.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.preview = React.createRef();\n    this.input = React.createRef();\n  }\n\n  componentWillReceiveProps(nextProps: ColorProps) {\n    const props = this.props;\n\n    if (props.value !== nextProps.value) {\n      this.setState({\n        inputValue: nextProps.value || ''\n      });\n    }\n  }\n\n  handleFocus() {\n    this.setState({\n      isFocused: true\n    });\n  }\n\n  handleBlur() {\n    this.setState({\n      isFocused: false,\n      inputValue: this.props.value\n    });\n  }\n\n  focus() {\n    this.input.current && this.input.current.focus();\n  }\n\n  blur() {\n    this.input.current && this.input.current.blur();\n  }\n\n  open(fn?: () => void) {\n    if (this.props.disabled) {\n      return;\n    }\n    this.setState(\n      {\n        isOpened: true\n      },\n      fn\n    );\n  }\n\n  close() {\n    this.setState({\n      isOpened: false\n    });\n  }\n\n  clearValue() {\n    const {onChange, resetValue} = this.props;\n    onChange(resetValue || '');\n  }\n\n  handleClick() {\n    this.state.isOpened ? this.close() : this.open(this.focus);\n  }\n\n  handleInputChange(e: React.ChangeEvent<HTMLInputElement>) {\n    if (!this.props.allowCustomColor) {\n      return;\n    }\n\n    const onChange = this.props.onChange;\n\n    this.setState(\n      {\n        inputValue: e.currentTarget.value\n      },\n      () => {\n        let isValidated = this.validateColor(this.state.inputValue);\n        if (isValidated) {\n          onChange(this.state.inputValue);\n        }\n      }\n    );\n  }\n\n  @autobind\n  validateColor(value: string) {\n    if (value === '') {\n      return false;\n    }\n    if (value === 'inherit') {\n      return false;\n    }\n    if (value === 'transparent') {\n      return false;\n    }\n\n    let image = document.createElement('img');\n    image.style.color = 'rgb(0, 0, 0)';\n    image.style.color = value;\n    if (image.style.color !== 'rgb(0, 0, 0)') {\n      return true;\n    }\n    image.style.color = 'rgb(255, 255, 255)';\n    image.style.color = value;\n    return image.style.color !== 'rgb(255, 255, 255)';\n  }\n\n  handleChange(color: ColorState) {\n    const {\n      onChange,\n      format\n      // closeOnSelect\n    } = this.props;\n\n    if (format === 'rgba') {\n      onChange(\n        `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`\n      );\n    } else if (format === 'rgb') {\n      onChange(`rgb(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b})`);\n    } else if (format === 'hsl') {\n      onChange(\n        `hsl(${Math.round(color.hsl.h)}, ${Math.round(\n          color.hsl.s * 100\n        )}%, ${Math.round(color.hsl.l * 100)}%)`\n      );\n    } else {\n      onChange(color.hex);\n    }\n\n    // closeOnSelect && this.close();\n  }\n\n  render() {\n    const {\n      classPrefix: ns,\n      className,\n      value,\n      placeholder,\n      disabled,\n      popOverContainer,\n      format,\n      clearable,\n      placement,\n      classnames: cx,\n      presetColors,\n      allowCustomColor\n    } = this.props;\n\n    const __ = this.props.translate;\n    const isOpened = this.state.isOpened;\n    const isFocused = this.state.isFocused;\n\n    return (\n      <div\n        className={cx(\n          `ColorPicker`,\n          {\n            'is-disabled': disabled,\n            'is-focused': isFocused\n          },\n          className\n        )}\n      >\n        <input\n          ref={this.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          size={10}\n          className={cx('ColorPicker-input')}\n          value={this.state.inputValue || ''}\n          placeholder={__(placeholder)}\n          disabled={disabled}\n          onChange={this.handleInputChange}\n          onFocus={this.handleFocus}\n          onBlur={this.handleBlur}\n          onClick={this.handleClick}\n        />\n\n        {clearable && !disabled && value ? (\n          <a onClick={this.clearValue} className={cx('ColorPicker-clear')}>\n            <Icon icon=\"close\" className=\"icon\" />\n          </a>\n        ) : null}\n\n        <span onClick={this.handleClick} className={cx('ColorPicker-preview')}>\n          <i\n            ref={this.preview}\n            className={`${ns}ColorPicker-previewIcon`}\n            style={{background: this.state.inputValue || '#ccc'}}\n          />\n        </span>\n\n        {isOpened ? (\n          <Overlay\n            placement={placement || 'auto'}\n            target={() => findDOMNode(this)}\n            onHide={this.close}\n            container={popOverContainer || (() => findDOMNode(this))}\n            rootClose={false}\n            show\n          >\n            <PopOver\n              classPrefix={ns}\n              className={cx('ColorPicker-popover')}\n              onHide={this.close}\n              overlay\n            >\n              {allowCustomColor ? (\n                <SketchPicker\n                  disableAlpha={!!~['rgb', 'hex'].indexOf(format as string)}\n                  color={value}\n                  presetColors={presetColors}\n                  onChangeComplete={this.handleChange}\n                />\n              ) : (\n                <GithubPicker\n                  color={value}\n                  colors={presetColors}\n                  onChangeComplete={this.handleChange}\n                />\n              )}\n            </PopOver>\n          </Overlay>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default themeable(\n  localeable(\n    uncontrollable(ColorControl, {\n      value: 'onChange'\n    })\n  )\n);\n"
    ]
}