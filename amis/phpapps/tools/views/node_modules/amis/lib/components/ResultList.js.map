{
    "version": 3,
    "file": "ResultList.js",
    "sourceRoot": "",
    "sources": [
        "/src/components/ResultList.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * 用来显示选择结果，垂直显示。支持移出、排序等操作。\n */\nimport React from 'react';\nimport {Option} from './Select';\nimport {ThemeProps, themeable} from '../theme';\nimport {Icon} from './icons';\nimport {autobind, guid} from '../utils/helper';\nimport Sortable from 'sortablejs';\nimport {findDOMNode} from 'react-dom';\nimport {LocaleProps, localeable} from '../locale';\n\nexport interface ResultListProps extends ThemeProps, LocaleProps {\n  className?: string;\n  value?: Array<Option>;\n  onChange?: (value: Array<Option>) => void;\n  sortable?: boolean;\n  disabled?: boolean;\n  title?: string;\n  placeholder: string;\n  itemRender: (option: Option) => JSX.Element;\n  itemClassName?: string;\n}\n\nexport class ResultList extends React.Component<ResultListProps> {\n  static defaultProps: Pick<ResultListProps, 'placeholder' | 'itemRender'> = {\n    placeholder: '请先选择数据',\n    itemRender: (option: any) => (\n      <span>{`${option.scopeLabel || ''}${option.label}`}</span>\n    )\n  };\n\n  id = guid();\n  sortable?: Sortable;\n\n  componentDidMount() {\n    this.props.sortable && this.initSortable();\n  }\n\n  componentDidUpdate() {\n    if (this.props.sortable) {\n      this.sortable || this.initSortable();\n    } else {\n      this.desposeSortable();\n    }\n  }\n\n  componentWillUnmount() {\n    this.desposeSortable();\n  }\n\n  @autobind\n  handleRemove(e: React.MouseEvent<HTMLElement>) {\n    const index = parseInt(e.currentTarget.getAttribute('data-index')!, 10);\n    const {value, onChange} = this.props;\n\n    if (!Array.isArray(value)) {\n      return;\n    }\n\n    const newValue = value.concat();\n    newValue.splice(index, 1);\n    onChange?.(newValue);\n  }\n\n  initSortable() {\n    const ns = this.props.classPrefix;\n    const dom = findDOMNode(this) as HTMLElement;\n    const container = dom.querySelector(\n      `.${ns}Selections-items`\n    ) as HTMLElement;\n\n    if (!container) {\n      return;\n    }\n\n    this.sortable = new Sortable(container, {\n      group: `selections-${this.id}`,\n      animation: 150,\n      handle: `.${ns}Selections-dragbar`,\n      ghostClass: `${ns}Selections-item--dragging`,\n      onEnd: (e: any) => {\n        // 没有移动\n        if (e.newIndex === e.oldIndex) {\n          return;\n        }\n\n        // 换回来\n        const parent = e.to as HTMLElement;\n        if (\n          e.newIndex < e.oldIndex &&\n          e.oldIndex < parent.childNodes.length - 1\n        ) {\n          parent.insertBefore(e.item, parent.childNodes[e.oldIndex + 1]);\n        } else if (e.oldIndex < parent.childNodes.length - 1) {\n          parent.insertBefore(e.item, parent.childNodes[e.oldIndex]);\n        } else {\n          parent.appendChild(e.item);\n        }\n\n        const value = this.props.value;\n        if (!Array.isArray(value)) {\n          return;\n        }\n        const newValue = value.concat();\n        newValue.splice(e.newIndex, 0, newValue.splice(e.oldIndex, 1)[0]);\n        this.props.onChange?.(newValue);\n      }\n    });\n  }\n\n  desposeSortable() {\n    this.sortable?.destroy();\n    delete this.sortable;\n  }\n\n  render() {\n    const {\n      classnames: cx,\n      className,\n      value,\n      placeholder,\n      itemRender,\n      disabled,\n      title,\n      itemClassName,\n      sortable,\n      translate: __\n    } = this.props;\n\n    return (\n      <div className={cx('Selections', className)}>\n        {title ? <div className={cx('Selections-title')}>{title}</div> : null}\n\n        {Array.isArray(value) && value.length ? (\n          <div className={cx('Selections-items')}>\n            {value.map((option, index) => (\n              <div\n                className={cx(\n                  'Selections-item',\n                  itemClassName,\n                  option?.className\n                )}\n                key={index}\n              >\n                {sortable && !disabled && value.length > 1 ? (\n                  <Icon\n                    className={cx('Selections-dragbar icon')}\n                    icon=\"drag-bar\"\n                  />\n                ) : null}\n\n                <label>{itemRender(option)}</label>\n\n                {!disabled ? (\n                  <a\n                    className={cx('Selections-delBtn')}\n                    data-index={index}\n                    onClick={this.handleRemove}\n                  >\n                    <Icon icon=\"close\" className=\"icon\" />\n                  </a>\n                ) : null}\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className={cx('Selections-placeholder')}>{__(placeholder)}</div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default themeable(localeable(ResultList));\n"
    ]
}