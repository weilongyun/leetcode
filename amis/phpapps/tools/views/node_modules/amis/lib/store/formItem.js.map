{
    "version": 3,
    "file": "formItem.js",
    "sourceRoot": "",
    "sources": [
        "/src/store/formItem.ts"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import {\n  types,\n  getParent,\n  SnapshotIn,\n  flow,\n  getRoot,\n  hasParent,\n  isAlive,\n  getEnv\n} from 'mobx-state-tree';\nimport {IFormStore} from './form';\nimport {str2rules, validate as doValidate} from '../utils/validations';\nimport {Api, Payload, fetchOptions} from '../types';\nimport {ComboStore, IComboStore, IUniqueGroup} from './combo';\nimport {evalExpression} from '../utils/tpl';\nimport findIndex from 'lodash/findIndex';\nimport {\n  isArrayChildrenModified,\n  isObject,\n  createObject,\n  isObjectShallowModified,\n  findTree,\n  findTreeIndex,\n  spliceTree\n} from '../utils/helper';\nimport {flattenTree} from '../utils/helper';\nimport {IRendererStore} from '.';\nimport {normalizeOptions, optionValueCompare} from '../components/Select';\nimport find from 'lodash/find';\nimport {SimpleMap} from '../utils/SimpleMap';\nimport memoize from 'lodash/memoize';\nimport {TranslateFn} from '../locale';\nimport {StoreNode} from './node';\n\ninterface IOption {\n  value?: string | number | null;\n  label?: string | null;\n  children?: IOption[] | null;\n  disabled?: boolean | null;\n  visible?: boolean | null;\n  hidden?: boolean | null;\n}\n\nconst ErrorDetail = types.model('ErrorDetail', {\n  msg: '',\n  tag: ''\n});\n\nexport const FormItemStore = StoreNode.named('FormItemStore')\n  .props({\n    isFocused: false,\n    type: '',\n    unique: false,\n    loading: false,\n    required: false,\n    rules: types.optional(types.frozen(), {}),\n    messages: types.optional(types.frozen(), {}),\n    errorData: types.optional(types.array(ErrorDetail), []),\n    name: types.string,\n    itemId: '', // 因为 name 可能会重名，所以加个 id 进来，如果有需要用来定位具体某一个\n    unsetValueOnInvisible: false,\n    validated: false,\n    validating: false,\n    multiple: false,\n    delimiter: ',',\n    valueField: 'value',\n    labelField: 'label',\n    joinValues: true,\n    extractValue: false,\n    options: types.optional(types.array(types.frozen()), []),\n    expressionsInOptions: false,\n    selectedOptions: types.optional(types.frozen(), []),\n    filteredOptions: types.optional(types.frozen(), []),\n    dialogSchema: types.frozen(),\n    dialogOpen: false,\n    dialogData: types.frozen()\n  })\n  .views(self => {\n    function getForm(): any {\n      return self.parentStore;\n    }\n\n    function getValue(): any {\n      return getForm()?.getValueByName(self.name);\n    }\n\n    function getLastOptionValue(): any {\n      if (self.selectedOptions.length) {\n        return self.selectedOptions[self.selectedOptions.length - 1].value;\n      }\n\n      return '';\n    }\n\n    function getErrors(): Array<string> {\n      return self.errorData.map(item => item.msg);\n    }\n\n    return {\n      get form(): any {\n        return getForm();\n      },\n\n      get value(): any {\n        return getValue();\n      },\n\n      get prinstine(): any {\n        return (getForm() as IFormStore).getPristineValueByName(self.name);\n      },\n\n      get errors() {\n        return getErrors();\n      },\n\n      get valid() {\n        const errors = getErrors();\n        return !!(!errors || !errors.length);\n      },\n\n      get lastSelectValue(): string {\n        return getLastOptionValue();\n      },\n\n      getSelectedOptions: (value: any = getValue()) => {\n        if (typeof value === 'undefined') {\n          return [];\n        }\n\n        const valueArray = Array.isArray(value)\n          ? value\n          : typeof value === 'string'\n          ? value.split(self.delimiter || ',')\n          : [value];\n\n        const selected = valueArray.map(item =>\n          item && item.hasOwnProperty(self.valueField || 'value')\n            ? item[self.valueField || 'value']\n            : item\n        );\n\n        // Array.isArray(value)\n        //   ? value.map(item =>\n        //       item && item.hasOwnProperty(self.valueField || 'value')\n        //         ? item[self.valueField || 'value']\n        //         : item\n        //     )\n        //   : typeof value === 'string'\n        //   ? value.split(self.delimiter || ',')\n        //   : [\n        //       value && value.hasOwnProperty(self.valueField || 'value')\n        //         ? value[self.valueField || 'value']\n        //         : value\n        //     ];\n\n        // // 保留原来的 label 信息，如果原始值中有 label。\n        // if (\n        //   value &&\n        //   value.hasOwnProperty(self.labelField || 'label') &&\n        //   !selected[0].hasOwnProperty(self.labelField || 'label')\n        // ) {\n        //   selected[0] = {\n        //     [self.labelField || 'label']: value[self.labelField || 'label'],\n        //     [self.valueField || 'value']: value[self.valueField || 'value']\n        //   };\n        // }\n\n        const selectedOptions: Array<any> = [];\n\n        selected.forEach((item, index) => {\n          const matched = findTree(\n            self.filteredOptions,\n            optionValueCompare(item, self.valueField || 'value')\n          );\n\n          if (matched) {\n            selectedOptions.push(matched);\n          } else {\n            let unMatched = (valueArray && valueArray[index]) || item;\n\n            if (\n              unMatched &&\n              (typeof unMatched === 'string' || typeof unMatched === 'number')\n            ) {\n              unMatched = {\n                [self.valueField || 'value']: item,\n                [self.labelField || 'label']: item,\n                __unmatched: true\n              };\n            } else if (unMatched && self.extractValue) {\n              unMatched = {\n                [self.valueField || 'value']: item,\n                [self.labelField || 'label']: 'UnKnown',\n                __unmatched: true\n              };\n            }\n\n            unMatched && selectedOptions.push(unMatched);\n          }\n        });\n\n        return selectedOptions;\n      }\n    };\n  })\n\n  .actions(self => {\n    const form = self.form as IFormStore;\n    const dialogCallbacks = new SimpleMap<(result?: any) => void>();\n\n    function config({\n      required,\n      unique,\n      value,\n      rules,\n      messages,\n      delimiter,\n      multiple,\n      valueField,\n      labelField,\n      joinValues,\n      extractValue,\n      type,\n      id\n    }: {\n      required?: any;\n      unique?: any;\n      value?: any;\n      rules?: string | {[propName: string]: any};\n      messages?: {[propName: string]: string};\n      multiple?: boolean;\n      delimiter?: string;\n      valueField?: string;\n      labelField?: string;\n      joinValues?: boolean;\n      extractValue?: boolean;\n      type?: string;\n      id?: string;\n    }) {\n      if (typeof rules === 'string') {\n        rules = str2rules(rules);\n      }\n\n      typeof type !== 'undefined' && (self.type = type);\n      typeof id !== 'undefined' && (self.itemId = id);\n      typeof messages !== 'undefined' && (self.messages = messages);\n      typeof required !== 'undefined' && (self.required = !!required);\n      typeof unique !== 'undefined' && (self.unique = !!unique);\n      typeof multiple !== 'undefined' && (self.multiple = !!multiple);\n      typeof joinValues !== 'undefined' && (self.joinValues = !!joinValues);\n      typeof extractValue !== 'undefined' &&\n        (self.extractValue = !!extractValue);\n      typeof delimiter !== 'undefined' &&\n        (self.delimiter = (delimiter as string) || ',');\n      typeof valueField !== 'undefined' &&\n        (self.valueField = (valueField as string) || 'value');\n      typeof labelField !== 'undefined' &&\n        (self.labelField = (labelField as string) || 'label');\n\n      rules = rules || {};\n      rules = {\n        ...rules,\n        isRequired: self.required\n      };\n\n      if (isObjectShallowModified(rules, self.rules)) {\n        self.rules = rules;\n        clearError('bultin');\n        self.validated = false;\n      }\n\n      if (value !== void 0 && self.value === void 0) {\n        form.setValueByName(self.name, value, true);\n      }\n    }\n\n    function focus() {\n      self.isFocused = true;\n    }\n\n    function blur() {\n      self.isFocused = false;\n    }\n\n    function changeValue(value: any, isPrintine: boolean = false) {\n      if (typeof value === 'undefined' || value === '__undefined') {\n        self.form.deleteValueByName(self.name);\n      } else {\n        self.form.setValueByName(self.name, value, isPrintine);\n      }\n    }\n\n    const validate: (hook?: any) => Promise<boolean> = flow(function* validate(\n      hook?: any\n    ) {\n      if (self.validating) {\n        return self.valid;\n      }\n\n      self.validating = true;\n      clearError();\n      if (hook) {\n        yield hook();\n      }\n\n      addError(\n        doValidate(\n          self.value,\n          self.form.data,\n          self.rules,\n          self.messages,\n          self.__\n        )\n      );\n      self.validated = true;\n\n      if (\n        self.unique &&\n        self.form.parentStore &&\n        self.form.parentStore.storeType === 'ComboStore'\n      ) {\n        const combo = self.form.parentStore as IComboStore;\n        const group = combo.uniques.get(self.name) as IUniqueGroup;\n\n        if (\n          group.items.some(\n            item => item !== self && self.value && item.value === self.value\n          )\n        ) {\n          addError(self.__('`当前值不唯一`'));\n        }\n      }\n\n      self.validating = false;\n      return self.valid;\n    });\n\n    function setError(msg: string | Array<string>, tag: string = 'bultin') {\n      clearError();\n      addError(msg, tag);\n    }\n\n    function addError(msg: string | Array<string>, tag: string = 'bultin') {\n      const msgs: Array<string> = Array.isArray(msg) ? msg : [msg];\n      msgs.forEach(item =>\n        self.errorData.push({\n          msg: item,\n          tag: tag\n        })\n      );\n    }\n\n    function clearError(tag?: string) {\n      if (tag) {\n        const filtered = self.errorData.filter(item => item.tag !== tag);\n        self.errorData.replace(filtered);\n      } else {\n        self.errorData.clear();\n      }\n    }\n\n    function setOptions(options: Array<object>) {\n      if (!Array.isArray(options)) {\n        return;\n      }\n      options = options.filter(item => item);\n      const originOptions = self.options.concat();\n      options.length ? self.options.replace(options) : self.options.clear();\n      syncOptions(originOptions);\n    }\n\n    let loadCancel: Function | null = null;\n    const fetchOptions: (\n      api: Api,\n      data?: object,\n      config?: fetchOptions,\n      setErrorFlag?: boolean\n    ) => Promise<Payload | null> = flow(function* getInitData(\n      api: string,\n      data: object,\n      config?: fetchOptions,\n      setErrorFlag?: boolean\n    ) {\n      try {\n        if (loadCancel) {\n          loadCancel();\n          loadCancel = null;\n          self.loading = false;\n        }\n\n        self.loading = true;\n\n        const json: Payload = yield getEnv(self).fetcher(api, data, {\n          autoAppend: false,\n          cancelExecutor: (executor: Function) => (loadCancel = executor),\n          ...config\n        });\n        loadCancel = null;\n        let result: any = null;\n\n        if (!json.ok) {\n          setErrorFlag !== false &&\n            setError(\n              self.__('加载选项失败，原因：{{reason}}', {\n                reason: json.msg || (config && config.errorMessage)\n              })\n            );\n          getEnv(self).notify(\n            'error',\n            self.errors.join(''),\n            json.msgTimeout !== undefined\n              ? {\n                  closeButton: true,\n                  timeout: json.msgTimeout\n                }\n              : undefined\n          );\n        } else {\n          result = json;\n        }\n\n        self.loading = false;\n        return result;\n      } catch (e) {\n        const env = getEnv(self);\n\n        self.loading = false;\n\n        if (!isAlive(self) || self.disposed) {\n          return;\n        }\n\n        if (env.isCancel(e)) {\n          return;\n        }\n\n        console.error(e.stack);\n        env.notify('error', e.message);\n        return;\n      }\n    } as any);\n\n    const loadOptions: (\n      api: Api,\n      data?: object,\n      config?: fetchOptions,\n      clearValue?: boolean,\n      onChange?: (value: any) => void,\n      setErrorFlag?: boolean\n    ) => Promise<Payload | null> = flow(function* getInitData(\n      api: string,\n      data: object,\n      config?: fetchOptions,\n      clearValue?: any,\n      onChange?: (\n        value: any,\n        submitOnChange: boolean,\n        changeImmediately: boolean\n      ) => void,\n      setErrorFlag?: boolean\n    ) {\n      let json = yield fetchOptions(api, data, config, setErrorFlag);\n      if (!json) {\n        return;\n      }\n\n      clearError();\n      self.validated = false; // 拉完数据应该需要再校验一下\n\n      let options: Array<IOption> =\n        json.data?.options ||\n        json.data.items ||\n        json.data.rows ||\n        json.data ||\n        [];\n\n      options = normalizeOptions(options as any);\n      setOptions(options);\n\n      if (json.data && typeof (json.data as any).value !== 'undefined') {\n        onChange && onChange((json.data as any).value, false, true);\n      } else if (clearValue) {\n        self.selectedOptions.some((item: any) => item.__unmatched) &&\n          onChange &&\n          onChange('', false, true);\n      }\n\n      return json;\n    });\n\n    const deferLoadOptions: (\n      option: any,\n      api: Api,\n      data?: object,\n      config?: fetchOptions\n    ) => Promise<Payload | null> = flow(function* getInitData(\n      option: any,\n      api: string,\n      data: object,\n      config?: fetchOptions\n    ) {\n      const indexes = findTreeIndex(self.options, item => item === option);\n      if (!indexes) {\n        return;\n      }\n\n      setOptions(\n        spliceTree(self.options, indexes, 1, {\n          ...option,\n          loading: true\n        })\n      );\n\n      let json = yield fetchOptions(api, data, config, false);\n      if (!json) {\n        setOptions(\n          spliceTree(self.options, indexes, 1, {\n            ...option,\n            loading: false,\n            error: true\n          })\n        );\n        return;\n      }\n\n      let options: Array<IOption> =\n        json.data?.options ||\n        json.data.items ||\n        json.data.rows ||\n        json.data ||\n        [];\n\n      setOptions(\n        spliceTree(self.options, indexes, 1, {\n          ...option,\n          loading: false,\n          loaded: true,\n          children: options\n        })\n      );\n\n      return json;\n    });\n\n    function syncOptions(originOptions?: Array<any>) {\n      if (!self.options.length && typeof self.value === 'undefined') {\n        self.selectedOptions = [];\n        self.filteredOptions = [];\n        return;\n      }\n\n      const form = self.form;\n      const value = self.value;\n\n      // 有可能销毁了\n      if (!form) {\n        return;\n      }\n\n      const selected = Array.isArray(value)\n        ? value.map(item =>\n            item && item.hasOwnProperty(self.valueField || 'value')\n              ? item[self.valueField || 'value']\n              : item\n          )\n        : typeof value === 'string'\n        ? value.split(self.delimiter || ',')\n        : value === void 0\n        ? []\n        : [\n            value && value.hasOwnProperty(self.valueField || 'value')\n              ? value[self.valueField || 'value']\n              : value\n          ];\n\n      if (value && value.hasOwnProperty(self.labelField || 'label')) {\n        selected[0] = {\n          [self.labelField || 'label']: value[self.labelField || 'label'],\n          [self.valueField || 'value']: value[self.valueField || 'value']\n        };\n      }\n\n      let expressionsInOptions = false;\n      let filteredOptions = self.options\n        .filter((item: any) => {\n          if (!expressionsInOptions && (item.visibleOn || item.hiddenOn)) {\n            expressionsInOptions = true;\n          }\n\n          return item.visibleOn\n            ? evalExpression(item.visibleOn, form.data) !== false\n            : item.hiddenOn\n            ? evalExpression(item.hiddenOn, form.data) !== true\n            : item.visible !== false || item.hidden !== true;\n        })\n        .map((item: any, index) => {\n          const disabled = evalExpression(item.disabledOn, form.data);\n          const newItem = item.disabledOn\n            ? self.filteredOptions.length > index &&\n              self.filteredOptions[index].disabled === disabled\n              ? self.filteredOptions[index]\n              : {\n                  ...item,\n                  disabled: disabled\n                }\n            : item;\n\n          return newItem;\n        });\n\n      self.expressionsInOptions = expressionsInOptions;\n      const flattened: Array<any> = flattenTree(filteredOptions);\n      const selectedOptions: Array<any> = [];\n\n      selected.forEach((item, index) => {\n        let idx = findIndex(\n          flattened,\n          optionValueCompare(item, self.valueField || 'value')\n        );\n\n        if (~idx) {\n          selectedOptions.push(flattened[idx]);\n        } else {\n          let unMatched = (value && value[index]) || item;\n\n          if (\n            unMatched &&\n            (typeof unMatched === 'string' || typeof unMatched === 'number')\n          ) {\n            unMatched = {\n              [self.valueField || 'value']: item,\n              [self.labelField || 'label']: item,\n              __unmatched: true\n            };\n\n            const orgin: any =\n              originOptions &&\n              find(\n                originOptions,\n                optionValueCompare(item, self.valueField || 'value')\n              );\n\n            if (orgin) {\n              unMatched[self.labelField || 'label'] =\n                orgin[self.labelField || 'label'];\n            }\n          } else if (unMatched && self.extractValue) {\n            unMatched = {\n              [self.valueField || 'value']: item,\n              [self.labelField || 'label']: 'UnKnown',\n              __unmatched: true\n            };\n          }\n\n          unMatched && selectedOptions.push(unMatched);\n        }\n      });\n\n      let parentStore = form.parentStore;\n      if (parentStore && parentStore.storeType === ComboStore.name) {\n        let combo = parentStore as IComboStore;\n        let group = combo.uniques.get(self.name) as IUniqueGroup;\n        let options: Array<any> = [];\n        group &&\n          group.items.forEach(item => {\n            if (self !== item) {\n              options.push(\n                ...item.selectedOptions.map((item: any) => item && item.value)\n              );\n            }\n          });\n\n        if (filteredOptions.length) {\n          filteredOptions = filteredOptions.filter(\n            option => !~options.indexOf(option.value)\n          );\n        }\n      }\n      isArrayChildrenModified(self.selectedOptions, selectedOptions) &&\n        (self.selectedOptions = selectedOptions);\n      isArrayChildrenModified(self.filteredOptions, filteredOptions) &&\n        (self.filteredOptions = filteredOptions);\n    }\n\n    function setLoading(value: boolean) {\n      self.loading = value;\n    }\n\n    let subStore: any;\n    function setSubStore(store: any) {\n      subStore = store;\n    }\n\n    function reset() {\n      self.validated = false;\n\n      if (subStore && subStore.storeType === 'ComboStore') {\n        const combo = subStore as IComboStore;\n        combo.forms.forEach(form => form.reset());\n      }\n\n      clearError();\n    }\n\n    function openDialog(\n      schema: any,\n      data: any = form.data,\n      callback?: (ret?: any) => void\n    ) {\n      self.dialogSchema = schema;\n      self.dialogData = data;\n      self.dialogOpen = true;\n      callback && dialogCallbacks.set(self.dialogData, callback);\n    }\n\n    function closeDialog(result?: any) {\n      const callback = dialogCallbacks.get(self.dialogData);\n      self.dialogOpen = false;\n\n      if (callback) {\n        dialogCallbacks.delete(self.dialogData);\n        setTimeout(() => callback(result), 200);\n      }\n    }\n\n    return {\n      focus,\n      blur,\n      config,\n      changeValue,\n      validate,\n      setError,\n      addError,\n      clearError,\n      setOptions,\n      loadOptions,\n      deferLoadOptions,\n      syncOptions,\n      setLoading,\n      setSubStore,\n      reset,\n      openDialog,\n      closeDialog\n    };\n  });\n\nexport type IFormItemStore = typeof FormItemStore.Type;\nexport type SFormItemStore = SnapshotIn<typeof FormItemStore>;\n"
    ]
}