{
    "version": 3,
    "file": "City.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/City.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {FormItem, FormControlProps, FormBaseControl} from './Item';\nimport {ClassNamesFn, themeable, ThemeProps} from '../../theme';\nimport {Select, Spinner} from '../../components';\nimport {autobind} from '../../utils/helper';\nimport {Option} from './Options';\nimport {localeable, LocaleProps} from '../../locale';\n\n/**\n * City 城市选择框。\n * 文档：https://baidu.gitee.io/amis/docs/components/form/city\n */\nexport interface CityControlSchema extends FormBaseControl {\n  /**\n   * 指定为城市选择框。\n   */\n  type: 'city';\n\n  /**\n   * 开启后只会存城市的 code 信息\n   */\n  extractValue?: boolean;\n\n  /**\n   * 是否将各个信息拼接成字符串。\n   */\n  joinValues?: boolean;\n\n  /**\n   * 拼接的符号是啥？\n   */\n  delimiter?: string;\n\n  /**\n   * 允许选择城市？\n   */\n  allowCity?: boolean;\n\n  /**\n   * 允许选择地区？\n   */\n  allowDistrict?: boolean;\n\n  /**\n   * 允许选择街道？\n   */\n  allowStreet?: boolean;\n}\n\nexport interface CityPickerProps\n  extends Omit<CityControlSchema, 'type'>,\n    LocaleProps,\n    ThemeProps {\n  value: any;\n  onChange: (value: any) => void;\n\n  extractValue: boolean;\n  delimiter: string;\n  allowCity: boolean;\n  allowDistrict: boolean;\n  allowStreet: boolean;\n}\n\nexport interface CityPickerState {\n  code: number;\n  province: string;\n  provinceCode: number;\n  city: string;\n  cityCode: number;\n  district: string;\n  districtCode: number;\n  street: string;\n\n  db?: {\n    province: Array<string>;\n    city: {\n      [propName: number]: Array<number>;\n    };\n    district: {\n      [propName: number]:\n        | {\n            [propName: number]: Array<number>;\n          }\n        | Array<number>;\n    };\n    [propName: string]: any;\n  };\n}\n\nexport class CityPicker extends React.Component<\n  CityPickerProps,\n  CityPickerState\n> {\n  static defaultProps = {\n    joinValues: true,\n    extractValue: true,\n    delimiter: ',',\n    allowCity: true,\n    allowDistrict: true,\n    allowStreet: false\n  };\n\n  state: CityPickerState = {\n    code: 0,\n    province: '',\n    provinceCode: 0,\n    city: '',\n    cityCode: 0,\n    district: '',\n    districtCode: 0,\n    street: ''\n  };\n\n  componentDidMount() {\n    this.loadDb(() => this.syncIn());\n  }\n\n  componentDidUpdate(prevProps: CityPickerProps) {\n    const props = this.props;\n\n    if (props.value !== prevProps.value) {\n      this.loadDb(() => this.syncIn(props));\n    }\n  }\n\n  loadDb(callback?: () => void) {\n    if (this.state.db) {\n      callback?.();\n      return;\n    }\n\n    (require as any)(['./CityDB'], (db: any) =>\n      this.setState(\n        {\n          db: {\n            ...db.default,\n            province: db.province,\n            city: db.city,\n            district: db.district\n          }\n        },\n        callback\n      )\n    );\n  }\n\n  @autobind\n  handleProvinceChange(option: Option) {\n    this.setState(\n      {\n        province: option.label as string,\n        provinceCode: option.value as number,\n        city: '',\n        cityCode: 0,\n        district: '',\n        districtCode: 0,\n        street: '',\n        code: option.value\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleCityChange(option: Option) {\n    if (option.value % 100) {\n      return this.handleDistrictChange(option, {\n        cityCode: option.value as number\n      });\n    }\n\n    this.setState(\n      {\n        city: option.label as string,\n        cityCode: option.value as number,\n        district: '',\n        districtCode: 0,\n        street: '',\n        code: option.value\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleDistrictChange(\n    option: Option,\n    otherStates: Partial<CityPickerState> = {}\n  ) {\n    this.setState(\n      {\n        ...(otherStates as any),\n        district: option.label as string,\n        districtCode: option.value as number,\n        street: '',\n        code: option.value as number\n      },\n      this.syncOut\n    );\n  }\n\n  @autobind\n  handleStreetChange(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      street: e.currentTarget.value\n    });\n  }\n\n  @autobind\n  handleStreetEnd() {\n    this.syncOut();\n  }\n\n  @autobind\n  syncIn(props = this.props) {\n    const db = this.state.db!;\n    const {value, delimiter} = props;\n\n    if (!db) {\n      return;\n    }\n\n    const state = {\n      code: 0,\n      province: '',\n      provinceCode: 0,\n      city: '',\n      cityCode: 0,\n      district: '',\n      districtCode: 0,\n      street: ''\n    };\n\n    let code =\n      (value && value.code) ||\n      (typeof value === 'number' && value) ||\n      (typeof value === 'string' && /(\\d{6})/.test(value) && RegExp.$1);\n\n    if (code && db[code]) {\n      code = parseInt(code, 10);\n      state.code = code;\n\n      const provinceCode = code - (code % 10000);\n      if (db[provinceCode]) {\n        state.provinceCode = provinceCode;\n        state.province = db[provinceCode];\n      }\n\n      const cityCode = code - (code % 100);\n      if (db[cityCode]) {\n        state.cityCode = cityCode;\n        state.city = db[cityCode];\n      } else if (~db.city[provinceCode]?.indexOf(code)) {\n        state.cityCode = code;\n        state.city = db[code];\n      }\n\n      if (code % 100) {\n        state.district = db[code];\n        state.districtCode = code;\n      }\n    } else if (value) {\n      // todo 模糊查找\n    }\n\n    if (value && value.street) {\n      state.street = value.street;\n    } else if (typeof value === 'string' && ~value.indexOf(delimiter)) {\n      state.street = value.slice(value.indexOf(delimiter) + delimiter.length);\n    }\n\n    this.setState(state);\n  }\n\n  @autobind\n  syncOut() {\n    const {\n      onChange,\n      allowStreet,\n      joinValues,\n      extractValue,\n      delimiter\n    } = this.props;\n\n    const {code, province, city, district, street} = this.state;\n\n    if (typeof extractValue === 'undefined' ? joinValues : extractValue) {\n      code\n        ? onChange(\n            allowStreet && street\n              ? [code, street].join(delimiter)\n              : String(code)\n          )\n        : onChange('');\n    } else {\n      onChange({\n        code,\n        province,\n        city,\n        district,\n        street\n      });\n    }\n  }\n\n  render() {\n    const {\n      classnames: cx,\n      className,\n      disabled,\n      allowCity,\n      allowDistrict,\n      allowStreet,\n      translate: __\n    } = this.props;\n\n    const {provinceCode, cityCode, districtCode, street, db} = this.state;\n\n    return db ? (\n      <div className={cx('CityPicker', className)}>\n        <Select\n          disabled={disabled}\n          options={db.province.map(item => ({\n            label: db[item],\n            value: item\n          }))}\n          value={provinceCode}\n          onChange={this.handleProvinceChange}\n        />\n\n        {provinceCode &&\n        allowDistrict &&\n        Array.isArray(db.district[provinceCode]) ? (\n          <Select\n            disabled={disabled}\n            options={(db.district[provinceCode] as Array<number>).map(item => ({\n              label: db[item],\n              value: item\n            }))}\n            value={districtCode}\n            onChange={this.handleDistrictChange}\n          />\n        ) : allowCity &&\n          db.city[provinceCode] &&\n          db.city[provinceCode].length ? (\n          <Select\n            disabled={disabled}\n            options={db.city[provinceCode].map(item => ({\n              label: db[item],\n              value: item\n            }))}\n            value={cityCode}\n            onChange={this.handleCityChange}\n          />\n        ) : null}\n\n        {cityCode &&\n        allowDistrict &&\n        (db.district[provinceCode]?.[cityCode] as any)?.length ? (\n          <Select\n            disabled={disabled}\n            options={(db.district[provinceCode][cityCode] as Array<number>).map(\n              item => ({\n                label: db[item],\n                value: item\n              })\n            )}\n            value={districtCode}\n            onChange={this.handleDistrictChange}\n          />\n        ) : null}\n\n        {allowStreet && provinceCode ? (\n          <input\n            className={cx('CityPicker-input')}\n            value={street}\n            onChange={this.handleStreetChange}\n            onBlur={this.handleStreetEnd}\n            placeholder={__('请输入街道信息')}\n            disabled={disabled}\n          />\n        ) : null}\n      </div>\n    ) : (\n      <Spinner show size=\"sm\" />\n    );\n  }\n}\n\nconst ThemedCity = themeable(localeable(CityPicker));\nexport default ThemedCity;\n\nexport interface LocationControlProps extends FormControlProps {\n  allowCity?: boolean;\n  allowDistrict?: boolean;\n  extractValue?: boolean;\n  joinValues?: boolean;\n  allowStreet?: boolean;\n}\nexport class LocationControl extends React.Component<LocationControlProps> {\n  render() {\n    const {\n      value,\n      onChange,\n      allowCity,\n      allowDistrict,\n      extractValue,\n      joinValues,\n      allowStreet,\n      disabled\n    } = this.props;\n    return (\n      <ThemedCity\n        value={value}\n        onChange={onChange}\n        allowCity={allowCity}\n        allowDistrict={allowDistrict}\n        extractValue={extractValue}\n        joinValues={joinValues}\n        allowStreet={allowStreet}\n        disabled={disabled}\n      />\n    );\n  }\n}\n\n@FormItem({\n  type: 'city',\n  sizeMutable: false\n})\nexport class CheckboxControlRenderer extends LocationControl {}\n"
    ]
}