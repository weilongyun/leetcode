{
    "version": 3,
    "file": "CRUD.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/CRUD.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {saveAs} from 'file-saver';\nimport PropTypes from 'prop-types';\nimport {Renderer, RendererProps} from '../factory';\nimport {\n  SchemaNode,\n  Schema,\n  Action,\n  Api,\n  ApiObject,\n  PlainObject\n} from '../types';\nimport {CRUDStore, ICRUDStore} from '../store/crud';\nimport {\n  createObject,\n  extendObject,\n  anyChanged,\n  isObjectShallowModified,\n  noop,\n  isVisible,\n  getVariable,\n  qsstringify\n} from '../utils/helper';\nimport {observer} from 'mobx-react';\nimport partition from 'lodash/partition';\nimport Scoped, {ScopedContext, IScopedContext} from '../Scoped';\nimport Button from '../components/Button';\nimport Select from '../components/Select';\nimport getExprProperties from '../utils/filter-schema';\nimport pick from 'lodash/pick';\nimport qs from 'qs';\nimport {findDOMNode} from 'react-dom';\nimport {evalExpression, filter} from '../utils/tpl';\nimport {isValidApi, buildApi, isEffectiveApi} from '../utils/api';\nimport omit from 'lodash/omit';\nimport find from 'lodash/find';\nimport findIndex from 'lodash/findIndex';\nimport Html from '../components/Html';\nimport {Spinner} from '../components';\nimport {Icon} from '../components/icons';\nimport {\n  BaseSchema,\n  SchemaApi,\n  SchemaClassName,\n  SchemaCollection,\n  SchemaExpression,\n  SchemaMessage,\n  SchemaName,\n  SchemaObject,\n  SchemaTokenizeableString,\n  SchemaTpl\n} from '../Schema';\nimport {ActionSchema} from './Action';\nimport {CardsSchema} from './Cards';\nimport {ListSchema} from './List';\nimport {TableSchema} from './Table';\n\nexport type CRUDBultinToolbarType =\n  | 'columns-toggler'\n  | 'drag-toggler'\n  | 'pagination'\n  | 'bulkActions'\n  | 'bulk-actions'\n  | 'statistics'\n  | 'switch-per-page'\n  | 'load-more'\n  | 'filter-toggler'\n  | 'export-csv'\n  | 'export-excel';\n\nexport interface CRUDBultinToolbar extends Omit<BaseSchema, 'type'> {\n  type: CRUDBultinToolbarType;\n}\n\nexport type CRUDToolbarChild = SchemaObject | CRUDBultinToolbar;\n\nexport type CRUDToolbarObject = {\n  /**\n   * 对齐方式\n   */\n  align?: 'left' | 'right';\n};\n\nexport interface CRUDCommonSchema extends BaseSchema {\n  /**\n   *  指定为 CRUD 渲染器。\n   */\n  type: 'crud';\n\n  /**\n   * 指定内容区的展示模式。\n   */\n  mode?: 'table' | 'grid' | 'cards' | /* grid 的别名*/ 'list';\n\n  /**\n   * 初始化数据 API\n   */\n  api?: SchemaApi;\n\n  /**\n   * 批量操作\n   */\n  bulkActions?: Array<ActionSchema>;\n\n  /**\n   * 单条操作\n   */\n  itemActions?: Array<ActionSchema>;\n\n  /**\n   * 可以默认给定初始参数如： {\\\"perPage\\\": 24}\n   */\n  defaultParams?: PlainObject;\n\n  /**\n   * 是否可通过拖拽排序\n   */\n  draggable?: boolean;\n\n  /**\n   * 是否可通过拖拽排序，通过表达式来配置\n   */\n  draggableOn?: SchemaExpression;\n\n  name?: SchemaName;\n\n  /**\n   * 过滤器表单\n   */\n  filter?: any; // todo\n\n  /**\n   * 初始是否拉取\n   * @deprecated 建议用 api 的 sendOn 代替。\n   */\n  initFetch?: boolean;\n\n  /**\n   * 初始是否拉取，用表达式来配置。\n   * @deprecated 建议用 api 的 sendOn 代替。\n   */\n  initFetchOn?: SchemaExpression;\n\n  /**\n   * 配置内部 DOM 的 className\n   */\n  innerClassName?: SchemaClassName;\n\n  /**\n   * 设置自动刷新时间\n   */\n  interval?: number;\n\n  /**\n   * 设置用来确定位置的字段名，设置后新的顺序将被赋值到该字段中。\n   */\n  orderField?: string;\n\n  /**\n   * 设置分页页码字段名。\n   * @default page\n   */\n  pageField?: string;\n\n  /**\n   * 设置分页一页显示的多少条数据的字段名。\n   * @default perPage\n   */\n  perPageField?: string;\n\n  /**\n   * 快速编辑后用来批量保存的 API\n   */\n  quickSaveApi?: SchemaApi;\n\n  /**\n   * 快速编辑配置成及时保存时使用的 API\n   */\n  quickSaveItemApi?: SchemaApi;\n\n  /**\n   * 保存排序的 api\n   */\n  saveOrderApi?: SchemaApi;\n\n  /**\n   * 是否将过滤条件的参数同步到地址栏,默认为true\n   * @default true\n   */\n  syncLocation?: boolean;\n\n  /**\n   * 顶部工具栏\n   */\n  headerToolbar?: Array<\n    (CRUDToolbarChild & CRUDToolbarObject) | CRUDBultinToolbarType\n  >;\n\n  /**\n   * 底部工具栏\n   */\n  footerToolbar?: Array<\n    (CRUDToolbarChild & CRUDToolbarObject) | CRUDBultinToolbarType\n  >;\n\n  /**\n   * 每页显示多少个空间成员的配置如： [10, 20, 50, 100]。\n   */\n  perPageAvailable?: Array<number>;\n\n  messages?: SchemaMessage;\n\n  /**\n   * 是否隐藏快速编辑的按钮。\n   */\n  hideQuickSaveBtn?: boolean;\n\n  /**\n   * 是否自动跳顶部，当切分页的时候。\n   */\n  autoJumpToTopOnPagerChange?: boolean;\n\n  /**\n   * 静默拉取\n   */\n  silentPolling?: boolean;\n  stopAutoRefreshWhen?: SchemaExpression;\n\n  stopAutoRefreshWhenModalIsOpen?: boolean;\n  filterTogglable?: boolean;\n  filterDefaultVisible?: boolean;\n\n  /**\n   * 是否将接口返回的内容自动同步到地址栏，前提是开启了同步地址栏。\n   */\n  syncResponse2Query?: boolean;\n\n  /**\n   * 分页的时候是否保留用户选择。\n   */\n  keepItemSelectionOnPageChange?: boolean;\n\n  /**\n   * 当配置 keepItemSelectionOnPageChange 时有用，用来配置已勾选项的文案。\n   */\n  labelTpl?: SchemaTpl;\n\n  /**\n   * 是否为前端单次加载模式，可以用来实现前端分页。\n   */\n  loadDataOnce?: boolean;\n\n  /**\n   * 在开启loadDataOnce时，filter时是否去重新请求api\n   */\n  loadDataOnceFetchOnFilter?: boolean;\n\n  /**\n   * 也可以直接从环境变量中读取，但是不太推荐。\n   */\n  source?: SchemaTokenizeableString;\n\n  /**\n   * 如果时内嵌模式，可以通过这个来配置默认的展开选项。\n   */\n  expandConfig?: {\n    /**\n     * 默认是展开第一个、所有、还是都不展开。\n     */\n    expand?: 'first' | 'all' | 'none';\n\n    /**\n     * 是否显示全部切换按钮\n     */\n    expandAll?: boolean;\n\n    /**\n     * 是否为手风琴模式\n     */\n    accordion?: boolean;\n  };\n}\n\nexport type CRUDCardsSchema = CRUDCommonSchema & {\n  mode: 'cards';\n} & Omit<CardsSchema, 'type'>;\n\nexport type CRUDListSchema = CRUDCommonSchema & {\n  mode: 'list';\n} & Omit<ListSchema, 'type'>;\n\nexport type CRUDTableSchem = CRUDCommonSchema & {\n  mode?: 'table';\n} & Omit<TableSchema, 'type'>;\n\n/**\n * CRUD 增删改查渲染器。\n * 文档：https://baidu.gitee.io/amis/docs/components/crud\n */\nexport type CRUDSchema = CRUDCardsSchema | CRUDListSchema | CRUDTableSchem;\n\nexport interface CRUDProps extends RendererProps, CRUDCommonSchema {\n  store: ICRUDStore;\n  pickerMode?: boolean; // 选择模式，用做表单中的选择操作\n}\n\nexport default class CRUD extends React.Component<CRUDProps, any> {\n  static propsList: Array<keyof CRUDProps> = [\n    'bulkActions',\n    'itemActions',\n    'mode',\n    'orderField',\n    'syncLocation',\n    'toolbar',\n    'toolbarInline',\n    'messages',\n    'value',\n    'options',\n    'multiple',\n    'valueField',\n    'defaultParams',\n    'bodyClassName',\n    'perPageAvailable',\n    'pageField',\n    'perPageField',\n    'hideQuickSaveBtn',\n    'autoJumpToTopOnPagerChange',\n    'interval',\n    'silentPolling',\n    'stopAutoRefreshWhen',\n    'stopAutoRefreshWhenModalIsOpen',\n    'api',\n    'affixHeader',\n    'columnsTogglable',\n    'placeholder',\n    'tableClassName',\n    'headerClassName',\n    'footerClassName',\n    // 'toolbarClassName',\n    'headerToolbar',\n    'footerToolbar',\n    'filterTogglable',\n    'filterDefaultVisible',\n    'syncResponse2Query',\n    'keepItemSelectionOnPageChange',\n    'labelTpl',\n    'labelField',\n    'loadDataOnce',\n    'loadDataOnceFetchOnFilter',\n    'source',\n    'header',\n    'columns',\n    'size',\n    'onChange',\n    'onInit',\n    'onSaved'\n  ];\n  static defaultProps = {\n    toolbarInline: true,\n    headerToolbar: ['bulkActions', 'pagination'],\n    footerToolbar: ['statistics', 'pagination'],\n    primaryField: 'id',\n    syncLocation: true,\n    pageField: 'page',\n    perPageField: 'perPage',\n    hideQuickSaveBtn: false,\n    autoJumpToTopOnPagerChange: true,\n    silentPolling: false,\n    filterTogglable: false,\n    filterDefaultVisible: true,\n    loadDataOnce: false,\n    loadDataOnceFetchOnFilter: true\n  };\n\n  control: any;\n  lastQuery: any;\n  dataInvalid: boolean = false;\n  timer: NodeJS.Timeout;\n  mounted: boolean;\n  constructor(props: CRUDProps) {\n    super(props);\n\n    this.controlRef = this.controlRef.bind(this);\n    this.handleFilterReset = this.handleFilterReset.bind(this);\n    this.handleFilterSubmit = this.handleFilterSubmit.bind(this);\n    this.handleFilterInit = this.handleFilterInit.bind(this);\n    this.handleAction = this.handleAction.bind(this);\n    this.handleBulkAction = this.handleBulkAction.bind(this);\n    this.handleChangePage = this.handleChangePage.bind(this);\n    this.handleBulkGo = this.handleBulkGo.bind(this);\n    this.handleDialogConfirm = this.handleDialogConfirm.bind(this);\n    this.handleDialogClose = this.handleDialogClose.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleSaveOrder = this.handleSaveOrder.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleChildPopOverOpen = this.handleChildPopOverOpen.bind(this);\n    this.handleChildPopOverClose = this.handleChildPopOverClose.bind(this);\n    this.search = this.search.bind(this);\n    this.silentSearch = this.silentSearch.bind(this);\n    this.handleQuery = this.handleQuery.bind(this);\n    this.renderHeaderToolbar = this.renderHeaderToolbar.bind(this);\n    this.renderFooterToolbar = this.renderFooterToolbar.bind(this);\n    this.clearSelection = this.clearSelection.bind(this);\n  }\n\n  componentWillMount() {\n    const {\n      location,\n      store,\n      pageField,\n      perPageField,\n      syncLocation,\n      loadDataOnce\n    } = this.props;\n\n    this.mounted = true;\n\n    if (syncLocation && location && (location.query || location.search)) {\n      store.updateQuery(\n        qs.parse(location.search.substring(1)),\n        undefined,\n        pageField,\n        perPageField\n      );\n    } else if (syncLocation && !location && window.location.search) {\n      store.updateQuery(\n        qs.parse(window.location.search.substring(1)) as object,\n        undefined,\n        pageField,\n        perPageField\n      );\n    }\n\n    this.props.store.setFilterTogglable(\n      !!this.props.filterTogglable,\n      this.props.filterDefaultVisible\n    );\n  }\n\n  componentDidMount() {\n    const store = this.props.store;\n\n    if (!this.props.filter || (store.filterTogggable && !store.filterVisible)) {\n      this.handleFilterInit({});\n    }\n\n    if (this.props.pickerMode && this.props.value) {\n      store.setSelectedItems(this.props.value);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: CRUDProps) {\n    const props = this.props;\n    const store = props.store;\n\n    if (\n      anyChanged(\n        ['toolbar', 'headerToolbar', 'footerToolbar', 'bulkActions'],\n        props,\n        nextProps\n      )\n    ) {\n      // 来点参数变化。\n      this.renderHeaderToolbar = this.renderHeaderToolbar.bind(this);\n      this.renderFooterToolbar = this.renderFooterToolbar.bind(this);\n    }\n\n    if (this.props.pickerMode && this.props.value !== nextProps.value) {\n      store.setSelectedItems(nextProps.value);\n    }\n\n    if (this.props.filterTogglable !== nextProps.filterTogglable) {\n      store.setFilterTogglable(\n        !!nextProps.filterTogglable,\n        nextProps.filterDefaultVisible\n      );\n    }\n\n    if (\n      props.syncLocation &&\n      props.location &&\n      props.location.search !== nextProps.location.search\n    ) {\n      // 同步地址栏，那么直接检测 query 是否变了，变了就重新拉数据\n      store.updateQuery(\n        qs.parse(nextProps.location.search.substring(1)),\n        undefined,\n        nextProps.pageField,\n        nextProps.perPageField\n      );\n      this.dataInvalid = isObjectShallowModified(\n        store.query,\n        this.lastQuery,\n        false\n      );\n    } else if (!props.syncLocation && props.api && nextProps.api) {\n      // 如果不同步地址栏，则直接看api上是否绑定参数，结果变了就重新刷新。\n      let prevApi = buildApi(props.api, props.data as object, {\n        ignoreData: true\n      });\n      let nextApi = buildApi(nextProps.api, nextProps.data as object, {\n        ignoreData: true\n      });\n\n      if (\n        prevApi.url !== nextApi.url &&\n        isValidApi(nextApi.url) &&\n        (!nextApi.sendOn || evalExpression(nextApi.sendOn, nextProps.data))\n      ) {\n        this.dataInvalid = true;\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.dataInvalid) {\n      this.dataInvalid = false;\n      this.search();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    clearTimeout(this.timer);\n  }\n\n  controlRef(control: any) {\n    // 因为 control 有可能被 n 层 hoc 包裹。\n    while (control && control.getWrappedInstance) {\n      control = control.getWrappedInstance();\n    }\n\n    this.control = control;\n  }\n\n  handleAction(\n    e: React.UIEvent<any> | undefined,\n    action: Action,\n    ctx: object,\n    throwErrors: boolean = false,\n    delegate?: IScopedContext\n  ): any {\n    const {\n      onAction,\n      store,\n      messages,\n      pickerMode,\n      env,\n      pageField,\n      stopAutoRefreshWhenModalIsOpen\n    } = this.props;\n\n    if (action.actionType === 'dialog') {\n      store.setCurrentAction(action);\n      const idx: number = (ctx as any).index;\n      const length = store.items.length;\n      stopAutoRefreshWhenModalIsOpen && clearTimeout(this.timer);\n      store.openDialog(ctx, {\n        hasNext: idx < length - 1,\n        nextIndex: idx + 1,\n        hasPrev: idx > 0,\n        prevIndex: idx - 1,\n        index: idx\n      });\n    } else if (action.actionType === 'ajax') {\n      store.setCurrentAction(action);\n      const data = ctx;\n\n      // 由于 ajax 一段时间后再弹出，肯定被浏览器给阻止掉的，所以提前弹。\n      const redirect = action.redirect && filter(action.redirect, data);\n      redirect && action.blank && env.jumpTo(redirect, action);\n\n      return store\n        .saveRemote(action.api!, data, {\n          successMessage:\n            (action.messages && action.messages.success) ||\n            (messages && messages.saveSuccess),\n          errorMessage:\n            (action.messages && action.messages.failed) ||\n            (messages && messages.saveFailed)\n        })\n        .then(async (payload: object) => {\n          const data = createObject(ctx, payload);\n\n          if (action.feedback && isVisible(action.feedback, data)) {\n            await this.openFeedback(action.feedback, data);\n            stopAutoRefreshWhenModalIsOpen && clearTimeout(this.timer);\n          }\n\n          const redirect = action.redirect && filter(action.redirect, data);\n          redirect && !action.blank && env.jumpTo(redirect, action);\n          action.reload\n            ? this.reloadTarget(action.reload, data)\n            : redirect\n            ? null\n            : this.search(undefined, undefined, true, true);\n          action.close && this.closeTarget(action.close);\n        })\n        .catch(() => {});\n    } else if (\n      pickerMode &&\n      (action.actionType === 'confirm' || action.actionType === 'submit')\n    ) {\n      store.setCurrentAction(action);\n      return Promise.resolve({\n        items: store.selectedItems.concat()\n      });\n    } else {\n      onAction(e, action, ctx, throwErrors, delegate || this.context);\n    }\n  }\n\n  handleBulkAction(\n    selectedItems: Array<any>,\n    unSelectedItems: Array<any>,\n    e: React.UIEvent<any>,\n    action: Action\n  ) {\n    const {\n      store,\n      primaryField,\n      onAction,\n      messages,\n      pageField,\n      stopAutoRefreshWhenModalIsOpen,\n      env\n    } = this.props;\n\n    if (!selectedItems.length && action.requireSelected !== false) {\n      return;\n    }\n\n    let ids = selectedItems\n      .map(item =>\n        item.hasOwnProperty(primaryField) ? item[primaryField as string] : null\n      )\n      .filter(item => item)\n      .join(',');\n\n    const ctx = createObject(store.mergedData, {\n      ...selectedItems[0],\n      rows: selectedItems,\n      items: selectedItems,\n      unSelectedItems: unSelectedItems,\n      ids\n    });\n\n    if (action.actionType === 'dialog') {\n      return this.handleAction(\n        e,\n        {\n          ...action,\n          __from: 'bulkAction'\n        },\n        ctx\n      );\n    } else if (action.actionType === 'ajax') {\n      isEffectiveApi(action.api, ctx) &&\n        store\n          .saveRemote(action.api as string, ctx, {\n            successMessage:\n              (action.messages && action.messages.success) ||\n              (messages && messages.saveSuccess),\n            errorMessage:\n              (action.messages && action.messages.failed) ||\n              (messages && messages.saveFailed)\n          })\n          .then(async (payload: object) => {\n            const data = createObject(ctx, payload);\n            if (action.feedback && isVisible(action.feedback, data)) {\n              await this.openFeedback(action.feedback, data);\n              stopAutoRefreshWhenModalIsOpen && clearTimeout(this.timer);\n            }\n\n            action.reload\n              ? this.reloadTarget(action.reload, data)\n              : this.search({[pageField || 'page']: 1}, undefined, true, true);\n            action.close && this.closeTarget(action.close);\n\n            const redirect = action.redirect && filter(action.redirect, data);\n            redirect && env.jumpTo(redirect, action);\n          })\n          .catch(() => null);\n    } else if (onAction) {\n      onAction(e, action, ctx, false, this.context);\n    }\n  }\n\n  handleItemAction(action: Action, ctx: any) {\n    this.doAction(action, ctx);\n  }\n\n  handleFilterInit(values: object) {\n    const {defaultParams, data, store} = this.props;\n\n    this.handleFilterSubmit(\n      {\n        ...defaultParams,\n        ...values,\n        ...store.query\n      },\n      false,\n      true,\n      this.props.initFetch !== false\n    );\n\n    store.setPristineQuery();\n\n    const {pickerMode, options} = this.props;\n\n    pickerMode &&\n      store.updateData({\n        items: options || []\n      });\n  }\n\n  handleFilterReset(values: object) {\n    const {store, syncLocation, env, pageField, perPageField} = this.props;\n\n    store.updateQuery(\n      store.pristineQuery,\n      syncLocation && env && env.updateLocation\n        ? (location: any) => env.updateLocation(location)\n        : undefined,\n      pageField,\n      perPageField,\n      true\n    );\n    this.lastQuery = store.query;\n    this.search();\n  }\n\n  handleFilterSubmit(\n    values: object,\n    jumpToFirstPage: boolean = true,\n    replaceLocation: boolean = false,\n    search: boolean = true\n  ) {\n    const {\n      store,\n      syncLocation,\n      env,\n      pageField,\n      perPageField,\n      loadDataOnceFetchOnFilter\n    } = this.props;\n    values = syncLocation ? qs.parse(qsstringify(values)) : values;\n\n    store.updateQuery(\n      {\n        ...values,\n        [pageField || 'page']: jumpToFirstPage ? 1 : store.page\n      },\n      syncLocation && env && env.updateLocation\n        ? (location: any) => env.updateLocation(location, replaceLocation)\n        : undefined,\n      pageField,\n      perPageField\n    );\n    this.lastQuery = store.query;\n    search &&\n      this.search(undefined, undefined, undefined, loadDataOnceFetchOnFilter);\n  }\n\n  handleBulkGo(\n    selectedItems: Array<any>,\n    unSelectedItems: Array<any>,\n    e: React.MouseEvent<any>\n  ) {\n    const action = this.props.store.selectedAction;\n    const env = this.props.env;\n\n    if (action.confirmText) {\n      return env\n        .confirm(action.confirmText)\n        .then(\n          (confirmed: boolean) =>\n            confirmed &&\n            this.handleBulkAction(\n              selectedItems,\n              unSelectedItems,\n              e as any,\n              action\n            )\n        );\n    }\n\n    return this.handleBulkAction(\n      selectedItems,\n      unSelectedItems,\n      e as any,\n      action\n    );\n  }\n\n  handleDialogConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    components: Array<any>\n  ) {\n    const {\n      store,\n      pageField,\n      stopAutoRefreshWhenModalIsOpen,\n      interval,\n      silentPolling,\n      env\n    } = this.props;\n\n    store.closeDialog();\n    const dialogAction = store.action as Action;\n\n    if (stopAutoRefreshWhenModalIsOpen && interval) {\n      this.timer = setTimeout(\n        silentPolling ? this.silentSearch : this.search,\n        Math.max(interval, 3000)\n      );\n    }\n\n    if (\n      action.actionType === 'next' &&\n      typeof ctx.nextIndex === 'number' &&\n      store.data.items[ctx.nextIndex]\n    ) {\n      return this.handleAction(\n        undefined,\n        {\n          ...dialogAction\n        },\n        createObject(\n          createObject(store.data, {\n            index: ctx.nextIndex\n          }),\n          store.data.items[ctx.nextIndex]\n        )\n      );\n    } else if (\n      action.actionType === 'prev' &&\n      typeof ctx.prevIndex === 'number' &&\n      store.data.items[ctx.prevIndex]\n    ) {\n      return this.handleAction(\n        undefined,\n        {\n          ...dialogAction\n        },\n        createObject(\n          createObject(store.data, {\n            index: ctx.prevIndex\n          }),\n          store.data.items[ctx.prevIndex]\n        )\n      );\n    } else if (values.length) {\n      const value = values[0];\n      ctx = createObject(ctx, value);\n      const component = components[0];\n\n      // 提交来自 form\n      if (component && component.props.type === 'form') {\n        // 数据保存了，说明列表数据已经无效了，重新刷新。\n        if (value && (value as any).__saved) {\n          // 配置了 reload 则跳过自动更新。\n          dialogAction.reload ||\n            this.search(\n              dialogAction.__from ? {[pageField || 'page']: 1} : undefined,\n              undefined,\n              true,\n              true\n            );\n        } else if (\n          value &&\n          ((value.hasOwnProperty('items') && (value as any).items) ||\n            value.hasOwnProperty('ids')) &&\n          this.control.bulkUpdate\n        ) {\n          this.control.bulkUpdate(value, (value as any).items);\n        }\n      }\n    }\n\n    if (dialogAction.reload) {\n      this.reloadTarget(dialogAction.reload, ctx);\n    }\n\n    const redirect = dialogAction.redirect && filter(action.redirect, ctx);\n    redirect && env.jumpTo(redirect, dialogAction);\n  }\n\n  handleDialogClose() {\n    const {\n      store,\n      stopAutoRefreshWhenModalIsOpen,\n      silentPolling,\n      interval\n    } = this.props;\n    store.closeDialog();\n\n    if (stopAutoRefreshWhenModalIsOpen && interval) {\n      this.timer = setTimeout(\n        silentPolling ? this.silentSearch : this.search,\n        Math.max(interval, 3000)\n      );\n    }\n  }\n\n  openFeedback(dialog: any, ctx: any) {\n    return new Promise(resolve => {\n      const {store} = this.props;\n      store.setCurrentAction({\n        type: 'button',\n        actionType: 'dialog',\n        dialog: dialog\n      });\n      store.openDialog(ctx, undefined, confirmed => {\n        resolve(confirmed);\n      });\n    });\n  }\n\n  search(\n    values?: any,\n    silent?: boolean,\n    clearSelection?: boolean,\n    forceReload = false\n  ) {\n    const {\n      store,\n      api,\n      messages,\n      pageField,\n      perPageField,\n      interval,\n      stopAutoRefreshWhen,\n      stopAutoRefreshWhenModalIsOpen,\n      silentPolling,\n      syncLocation,\n      syncResponse2Query,\n      keepItemSelectionOnPageChange,\n      pickerMode,\n      env,\n      loadDataOnce,\n      loadDataOnceFetchOnFilter,\n      source\n    } = this.props;\n\n    // reload 需要清空用户选择。\n    if (keepItemSelectionOnPageChange && clearSelection && !pickerMode) {\n      store.setSelectedItems([]);\n      store.setUnSelectedItems([]);\n    }\n\n    let loadDataMode = '';\n    if (values && typeof values.loadDataMode === 'string') {\n      loadDataMode = 'load-more';\n      delete values.loadDataMode;\n    }\n\n    clearTimeout(this.timer);\n    values &&\n      store.updateQuery(\n        values,\n        !loadDataMode && syncLocation && env && env.updateLocation\n          ? env.updateLocation\n          : undefined,\n        pageField,\n        perPageField\n      );\n    this.lastQuery = store.query;\n    const data = createObject(store.data, store.query);\n    isEffectiveApi(api, data)\n      ? store\n          .fetchInitData(api, data, {\n            successMessage: messages && messages.fetchSuccess,\n            errorMessage: messages && messages.fetchFailed,\n            autoAppend: true,\n            forceReload,\n            loadDataOnce,\n            loadDataOnceFetchOnFilter,\n            source,\n            silent,\n            pageField,\n            perPageField,\n            loadDataMode,\n            syncResponse2Query\n          })\n          .then(value => {\n            interval &&\n              this.mounted &&\n              (!stopAutoRefreshWhen ||\n                !(\n                  (stopAutoRefreshWhenModalIsOpen && store.hasModalOpened) ||\n                  evalExpression(stopAutoRefreshWhen, data)\n                )) &&\n              (this.timer = setTimeout(\n                silentPolling\n                  ? this.silentSearch.bind(this, undefined, undefined, true)\n                  : this.search.bind(\n                      this,\n                      undefined,\n                      undefined,\n                      undefined,\n                      true\n                    ),\n                Math.max(interval, 3000)\n              ));\n            return value;\n          })\n      : source && store.initFromScope(data, source);\n  }\n\n  silentSearch(values?: object, clearSelection?: boolean, forceReload = false) {\n    return this.search(values, true, clearSelection, forceReload);\n  }\n\n  handleChangePage(page: number, perPage?: number) {\n    const {\n      store,\n      syncLocation,\n      env,\n      pageField,\n      perPageField,\n      autoJumpToTopOnPagerChange,\n      affixOffsetTop\n    } = this.props;\n\n    let query: any = {\n      [pageField || 'page']: page\n    };\n\n    if (perPage) {\n      query[perPageField || 'perPage'] = perPage;\n    }\n\n    store.updateQuery(\n      query,\n      syncLocation && env?.updateLocation ? env.updateLocation : undefined,\n      pageField,\n      perPageField\n    );\n\n    this.search(undefined, undefined, undefined);\n\n    if (autoJumpToTopOnPagerChange && this.control) {\n      (findDOMNode(this.control) as HTMLElement).scrollIntoView();\n      const scrolledY = window.scrollY;\n      const offsetTop = affixOffsetTop ?? env?.affixOffsetTop ?? 50;\n      scrolledY && window.scroll(0, scrolledY - offsetTop);\n    }\n  }\n\n  handleSave(\n    rows: Array<object> | object,\n    diff: Array<object> | object,\n    indexes: Array<number>,\n    unModifiedItems?: Array<any>,\n    rowsOrigin?: Array<object> | object,\n    resetOnFailed?: boolean\n  ) {\n    const {\n      store,\n      quickSaveApi,\n      quickSaveItemApi,\n      primaryField,\n      env,\n      messages,\n      reload\n    } = this.props;\n\n    if (Array.isArray(rows)) {\n      if (!isEffectiveApi(quickSaveApi)) {\n        env && env.alert('CRUD quickSaveApi is required!');\n        return;\n      }\n\n      const data: any = createObject(store.data, {\n        rows,\n        rowsDiff: diff,\n        indexes: indexes,\n        rowsOrigin\n      });\n\n      if (rows.length && rows[0].hasOwnProperty(primaryField || 'id')) {\n        data.ids = rows\n          .map(item => (item as any)[primaryField || 'id'])\n          .join(',');\n      }\n\n      if (unModifiedItems) {\n        data.unModifiedItems = unModifiedItems;\n      }\n\n      store\n        .saveRemote(quickSaveApi, data, {\n          successMessage: messages && messages.saveFailed,\n          errorMessage: messages && messages.saveSuccess\n        })\n        .then(() => {\n          reload && this.reloadTarget(reload, data);\n          this.search(undefined, undefined, true, true);\n        })\n        .catch(() => {});\n    } else {\n      if (!isEffectiveApi(quickSaveItemApi)) {\n        env && env.alert('CRUD quickSaveItemApi is required!');\n        return;\n      }\n\n      const data = createObject(store.data, {\n        item: rows,\n        modified: diff,\n        origin: rowsOrigin\n      });\n\n      const sendData = createObject(data, rows);\n      store\n        .saveRemote(quickSaveItemApi, sendData)\n        .then(() => {\n          reload && this.reloadTarget(reload, data);\n          this.search(undefined, undefined, true, true);\n        })\n        .catch(() => {\n          resetOnFailed && this.control.reset();\n        });\n    }\n  }\n\n  handleSaveOrder(moved: Array<object>, rows: Array<object>) {\n    const {\n      store,\n      saveOrderApi,\n      orderField,\n      primaryField,\n      env,\n      reload\n    } = this.props;\n\n    if (!saveOrderApi) {\n      env && env.alert('CRUD saveOrderApi is required!');\n      return;\n    }\n\n    const model: {\n      insertAfter?: any;\n      insertBefore?: any;\n      idMap?: any;\n      rows?: any;\n      ids?: any;\n      order?: any;\n    } = createObject(store.data);\n\n    let insertAfter: any;\n    let insertBefore: any;\n    const holding: Array<object> = [];\n    const hasIdField =\n      primaryField &&\n      rows[0] &&\n      (rows[0] as object).hasOwnProperty(primaryField);\n\n    hasIdField || (model.idMap = {});\n\n    model.insertAfter = {};\n    rows.forEach((item: any) => {\n      if (~moved.indexOf(item)) {\n        if (insertAfter) {\n          let insertAfterId = hasIdField\n            ? (insertAfter as any)[primaryField as string]\n            : rows.indexOf(insertAfter);\n          model.insertAfter[insertAfterId] =\n            (model as any).insertAfter[insertAfterId] || [];\n\n          hasIdField || (model.idMap[insertAfterId] = insertAfter);\n          model.insertAfter[insertAfterId].push(\n            hasIdField ? item[primaryField as string] : item\n          );\n        } else {\n          holding.push(item);\n        }\n      } else {\n        insertAfter = item;\n        insertBefore = insertBefore || item;\n      }\n    });\n\n    if (insertBefore && holding.length) {\n      let insertBeforeId = hasIdField\n        ? insertBefore[primaryField as string]\n        : rows.indexOf(insertBefore);\n      hasIdField || (model.idMap[insertBeforeId] = insertBefore);\n      model.insertBefore = {};\n      model.insertBefore[insertBeforeId] = holding.map((item: any) =>\n        hasIdField ? item[primaryField as string] : item\n      );\n    } else if (holding.length) {\n      const first: any = holding[0];\n      const firstId = hasIdField\n        ? first[primaryField as string]\n        : rows.indexOf(first);\n\n      hasIdField || (model.idMap[firstId] = first);\n      model.insertAfter[firstId] = holding\n        .slice(1)\n        .map((item: any) => (hasIdField ? item[primaryField as string] : item));\n    }\n\n    if (orderField) {\n      const start = (store.page - 1) * store.perPage || 0;\n      rows = rows.map((item, key) =>\n        extendObject(item, {\n          [orderField]: start + key + 1\n        })\n      );\n    }\n\n    model.rows = rows.concat();\n    hasIdField &&\n      (model.ids = rows\n        .map((item: any) => item[primaryField as string])\n        .join(','));\n    hasIdField &&\n      orderField &&\n      (model.order = rows.map(item =>\n        pick(item, [primaryField as string, orderField])\n      ));\n\n    isEffectiveApi(saveOrderApi, model) &&\n      store\n        .saveRemote(saveOrderApi, model)\n        .then(() => {\n          reload && this.reloadTarget(reload, model);\n          this.search(undefined, undefined, true, true);\n        })\n        .catch(() => {});\n  }\n\n  handleSelect(items: Array<any>, unSelectedItems: Array<any>) {\n    const {\n      store,\n      keepItemSelectionOnPageChange,\n      primaryField,\n      multiple,\n      pickerMode,\n      onSelect\n    } = this.props;\n\n    let newItems = items;\n    let newUnSelectedItems = unSelectedItems;\n\n    if (keepItemSelectionOnPageChange && store.selectedItems.length) {\n      const oldItems = store.selectedItems.concat();\n      const oldUnselectedItems = store.unSelectedItems.concat();\n\n      items.forEach(item => {\n        const idx = findIndex(\n          oldItems,\n          a =>\n            a === item ||\n            (a[primaryField || 'id'] &&\n              a[primaryField || 'id'] == item[primaryField || 'id'])\n        );\n\n        if (~idx) {\n          oldItems[idx] = item;\n        } else {\n          oldItems.push(item);\n        }\n\n        const idx2 = findIndex(\n          oldUnselectedItems,\n          a =>\n            a === item ||\n            (a[primaryField || 'id'] &&\n              a[primaryField || 'id'] == item[primaryField || 'id'])\n        );\n\n        if (~idx2) {\n          oldUnselectedItems.splice(idx2, 1);\n        }\n      });\n\n      unSelectedItems.forEach(item => {\n        const idx = findIndex(\n          oldUnselectedItems,\n          a =>\n            a === item ||\n            (a[primaryField || 'id'] &&\n              a[primaryField || 'id'] == item[primaryField || 'id'])\n        );\n\n        const idx2 = findIndex(\n          oldItems,\n          a =>\n            a === item ||\n            (a[primaryField || 'id'] &&\n              a[primaryField || 'id'] == item[primaryField || 'id'])\n        );\n\n        if (~idx) {\n          oldUnselectedItems[idx] = item;\n        } else {\n          oldUnselectedItems.push(item);\n        }\n\n        ~idx2 && oldItems.splice(idx2, 1);\n      });\n\n      newItems = oldItems;\n      newUnSelectedItems = oldUnselectedItems;\n\n      // const thisBatch = items.concat(unSelectedItems);\n      // let notInThisBatch = (item: any) =>\n      //   !find(\n      //     thisBatch,\n      //     a => a[primaryField || 'id'] == item[primaryField || 'id']\n      //   );\n\n      // newItems = store.selectedItems.filter(notInThisBatch);\n      // newUnSelectedItems = store.unSelectedItems.filter(notInThisBatch);\n\n      // newItems.push(...items);\n      // newUnSelectedItems.push(...unSelectedItems);\n    }\n\n    if (pickerMode && !multiple && newItems.length > 1) {\n      newUnSelectedItems.push(...newItems.splice(0, newItems.length - 1));\n    }\n\n    store.setSelectedItems(newItems);\n    store.setUnSelectedItems(newUnSelectedItems);\n    onSelect && onSelect(newItems);\n  }\n\n  handleChildPopOverOpen(popOver: any) {\n    if (\n      this.props.interval &&\n      popOver &&\n      ~['dialog', 'drawer'].indexOf(popOver.mode)\n    ) {\n      this.props.stopAutoRefreshWhenModalIsOpen && clearTimeout(this.timer);\n      this.props.store.setInnerModalOpened(true);\n    }\n  }\n\n  handleChildPopOverClose(popOver: any) {\n    const {\n      stopAutoRefreshWhenModalIsOpen,\n      silentPolling,\n      interval\n    } = this.props;\n\n    if (popOver && ~['dialog', 'drawer'].indexOf(popOver.mode)) {\n      this.props.store.setInnerModalOpened(false);\n\n      if (stopAutoRefreshWhenModalIsOpen && interval) {\n        this.timer = setTimeout(\n          silentPolling ? this.silentSearch : this.search,\n          Math.max(interval, 3000)\n        );\n      }\n    }\n  }\n\n  handleQuery(values: object, forceReload: boolean = false) {\n    const {store, syncLocation, env, pageField, perPageField} = this.props;\n\n    store.updateQuery(\n      {\n        ...values,\n        [pageField || 'page']: 1\n      },\n      syncLocation && env && env.updateLocation\n        ? env.updateLocation\n        : undefined,\n      pageField,\n      perPageField\n    );\n    this.search(undefined, undefined, undefined, forceReload);\n  }\n\n  reload(subpath?: string, query?: any) {\n    if (query) {\n      return this.receive(query);\n    } else {\n      this.search(undefined, undefined, true, true);\n    }\n  }\n\n  receive(values: object) {\n    this.handleQuery(values, true);\n  }\n\n  reloadTarget(target: string, data: any) {\n    // implement this.\n  }\n\n  closeTarget(target: string) {\n    // implement this.\n  }\n\n  doAction(action: Action, data: object, throwErrors: boolean = false) {\n    return this.handleAction(undefined, action, data, throwErrors);\n  }\n\n  unSelectItem(item: any, index: number) {\n    const {store} = this.props;\n    const selected = store.selectedItems.concat();\n    const unSelected = store.unSelectedItems.concat();\n\n    const idx = selected.indexOf(item);\n    ~idx && unSelected.push(...selected.splice(idx, 1));\n\n    store.setSelectedItems(selected);\n    store.setUnSelectedItems(unSelected);\n  }\n\n  clearSelection() {\n    const {store} = this.props;\n    const selected = store.selectedItems.concat();\n    const unSelected = store.unSelectedItems.concat();\n\n    store.setSelectedItems([]);\n    store.setUnSelectedItems(unSelected.concat(selected));\n  }\n\n  hasBulkActionsToolbar() {\n    const {headerToolbar, footerToolbar} = this.props;\n\n    const isBulkActions = (item: any) =>\n      ~['bulkActions', 'bulk-actions'].indexOf(item.type || item);\n    return (\n      (Array.isArray(headerToolbar) && find(headerToolbar, isBulkActions)) ||\n      (Array.isArray(footerToolbar) && find(footerToolbar, isBulkActions))\n    );\n  }\n\n  hasBulkActions() {\n    const {bulkActions, itemActions, store} = this.props;\n\n    if (\n      (!bulkActions || !bulkActions.length) &&\n      (!itemActions || !itemActions.length)\n    ) {\n      return false;\n    }\n\n    let bulkBtns: Array<ActionSchema> = [];\n    let itemBtns: Array<ActionSchema> = [];\n    const ctx = store.mergedData;\n\n    if (bulkActions && bulkActions.length) {\n      bulkBtns = bulkActions\n        .map(item => ({\n          ...item,\n          ...getExprProperties(item as Schema, ctx)\n        }))\n        .filter(item => !item.hidden && item.visible !== false);\n    }\n\n    const itemData = createObject(\n      store.data,\n      store.selectedItems.length ? store.selectedItems[0] : {}\n    );\n\n    if (itemActions && itemActions.length) {\n      itemBtns = itemActions\n        .map(item => ({\n          ...item,\n          ...getExprProperties(item as Schema, itemData)\n        }))\n        .filter(item => !item.hidden && item.visible !== false);\n    }\n\n    return bulkBtns.length || itemBtns.length;\n  }\n\n  renderBulkActions(childProps: any) {\n    let {bulkActions, itemActions, store, render, classnames: cx} = this.props;\n\n    const items = childProps.items;\n\n    if (\n      !items.length ||\n      ((!bulkActions || !bulkActions.length) &&\n        (!itemActions || !itemActions.length))\n    ) {\n      return null;\n    }\n\n    const selectedItems = store.selectedItems;\n    const unSelectedItems = store.unSelectedItems;\n\n    let bulkBtns: Array<ActionSchema> = [];\n    let itemBtns: Array<ActionSchema> = [];\n\n    const ctx = store.mergedData;\n\n    // const ctx = createObject(store.data, {\n    //     ...store.query,\n    //     items: childProps.items,\n    //     selectedItems: childProps.selectedItems,\n    //     unSelectedItems: childProps.unSelectedItems\n    // });\n\n    if (\n      bulkActions &&\n      bulkActions.length &&\n      (!itemActions || !itemActions.length || selectedItems.length > 1)\n    ) {\n      bulkBtns = bulkActions\n        .map(item => ({\n          ...item,\n          ...getExprProperties(item as Schema, ctx)\n        }))\n        .filter(item => !item.hidden && item.visible !== false);\n    }\n\n    const itemData = createObject(\n      store.data,\n      selectedItems.length ? selectedItems[0] : {}\n    );\n\n    if (itemActions && selectedItems.length === 1) {\n      itemBtns = itemActions\n        .map(item => ({\n          ...item,\n          ...getExprProperties(item as Schema, itemData)\n        }))\n        .filter(item => !item.hidden && item.visible !== false);\n    }\n\n    return bulkBtns.length || itemBtns.length ? (\n      <div className={cx('Crud-actions')}>\n        {bulkBtns.map((btn, index) =>\n          render(\n            `bulk-action/${index}`,\n            {\n              size: 'sm',\n              ...omit(btn, ['visibleOn', 'hiddenOn', 'disabledOn']),\n              type: 'button'\n            },\n            {\n              key: `bulk-${index}`,\n              data: ctx,\n              disabled:\n                btn.disabled ||\n                (btn.requireSelected !== false ? !selectedItems.length : false),\n              onAction: this.handleBulkAction.bind(\n                this,\n                selectedItems.concat(),\n                unSelectedItems.concat()\n              )\n            }\n          )\n        )}\n\n        {itemBtns.map((btn, index) =>\n          render(\n            `bulk-action/${index}`,\n            {\n              size: 'sm',\n              ...omit(btn, ['visibleOn', 'hiddenOn', 'disabledOn']),\n              type: 'button'\n            },\n            {\n              key: `item-${index}`,\n              data: itemData,\n              disabled: btn.disabled,\n              onAction: this.handleItemAction.bind(this, btn, itemData)\n            }\n          )\n        )}\n      </div>\n    ) : null;\n  }\n\n  renderPagination() {\n    const {store, render, classnames: cx} = this.props;\n\n    const {page, lastPage} = store;\n\n    if (store.mode !== 'simple' && store.lastPage < 2) {\n      return null;\n    }\n\n    return (\n      <div className={cx('Crud-pager')}>\n        {render(\n          'pagination',\n          {\n            type: 'pagination'\n          },\n          {\n            activePage: page,\n            items: lastPage,\n            hasNext: store.hasNext,\n            mode: store.mode,\n            onPageChange: this.handleChangePage\n          }\n        )}\n      </div>\n    );\n  }\n\n  renderStatistics() {\n    const {store, classnames: cx, translate: __} = this.props;\n\n    if (store.lastPage <= 1) {\n      return null;\n    }\n\n    return (\n      <div className={cx('Crud-statistics')}>\n        {__('{{page}}/{{lastPage}} 总共：{{total}} 项。', {\n          page: store.page,\n          lastPage: store.lastPage,\n          total: store.total\n        })}\n      </div>\n    );\n  }\n\n  renderSwitchPerPage(childProps: any) {\n    const {\n      store,\n      perPageAvailable,\n      classnames: cx,\n      classPrefix: ns,\n      translate: __\n    } = this.props;\n\n    const items = childProps.items;\n\n    if (!items.length) {\n      return null;\n    }\n\n    const perPages = (perPageAvailable || [5, 10, 20, 50, 100]).map(\n      (item: any) => ({\n        label: item,\n        value: item + ''\n      })\n    );\n\n    return (\n      <div className={cx('Crud-pageSwitch')}>\n        {__('每页显示')}\n        <Select\n          classPrefix={ns}\n          searchable={false}\n          placeholder={__('请选择')}\n          options={perPages}\n          value={store.perPage + ''}\n          onChange={(value: any) => this.handleChangePage(1, value.value)}\n          clearable={false}\n        />\n      </div>\n    );\n  }\n\n  renderLoadMore() {\n    const {store, classPrefix: ns, classnames: cx, translate: __} = this.props;\n    const {page, lastPage} = store;\n\n    return page < lastPage ? (\n      <div className={cx('Crud-loadMore')}>\n        <Button\n          classPrefix={ns}\n          onClick={() =>\n            this.search({page: page + 1, loadDataMode: 'load-more'})\n          }\n          size=\"sm\"\n        >\n          {__('加载更多')}\n        </Button>\n      </div>\n    ) : (\n      ''\n    );\n  }\n\n  renderFilterToggler() {\n    const {store, classnames: cx, translate: __} = this.props;\n\n    if (!store.filterTogggable) {\n      return null;\n    }\n\n    return (\n      <button\n        onClick={() => store.setFilterVisible(!store.filterVisible)}\n        className={cx('Button Button--sm Button--default', {\n          'is-active': store.filterVisible\n        })}\n      >\n        <Icon icon=\"filter\" className=\"icon m-r-xs\" />\n        {__('筛选')}\n      </button>\n    );\n  }\n\n  renderExportCSV() {\n    const {store, classPrefix: ns, classnames: cx, translate: __} = this.props;\n\n    return (\n      <Button\n        classPrefix={ns}\n        onClick={() => {\n          (require as any)(['papaparse'], (papaparse: any) => {\n            const csvText = papaparse.unparse(store.data.items);\n            if (csvText) {\n              const blob = new Blob([csvText], {\n                type: 'text/plain;charset=utf-8'\n              });\n              saveAs(blob, 'data.csv');\n            }\n          });\n        }}\n        size=\"sm\"\n      >\n        {__('导出 CSV')}\n      </Button>\n    );\n  }\n\n  renderToolbar(\n    toolbar?: SchemaNode,\n    index: number = 0,\n    childProps: any = {},\n    toolbarRenderer?: (toolbar: SchemaNode, index: number) => React.ReactNode\n  ) {\n    if (!toolbar) {\n      return null;\n    }\n\n    const type = (toolbar as Schema).type || toolbar;\n\n    if (type === 'bulkActions' || type === 'bulk-actions') {\n      return this.renderBulkActions(childProps);\n    } else if (type === 'pagination') {\n      return this.renderPagination();\n    } else if (type === 'statistics') {\n      return this.renderStatistics();\n    } else if (type === 'switch-per-page') {\n      return this.renderSwitchPerPage(childProps);\n    } else if (type === 'load-more') {\n      return this.renderLoadMore();\n    } else if (type === 'filter-toggler') {\n      return this.renderFilterToggler();\n    } else if (type === 'export-csv') {\n      return this.renderExportCSV();\n    } else if (Array.isArray(toolbar)) {\n      const children: Array<any> = toolbar\n        .map((toolbar, index) => ({\n          dom: this.renderToolbar(toolbar, index, childProps, toolbarRenderer),\n          toolbar\n        }))\n        .filter(item => item.dom);\n      const len = children.length;\n      const cx = this.props.classnames;\n      if (len) {\n        return (\n          <div className={cx('Crud-toolbar')} key={index}>\n            {children.map(({toolbar, dom: child}, index) => {\n              const type = (toolbar as Schema).type || toolbar;\n              let align =\n                toolbar.align ||\n                (type === 'pagination' || (index === len - 1 && index > 0)\n                  ? 'right'\n                  : index < len - 1\n                  ? 'left'\n                  : '');\n\n              return (\n                <div\n                  key={index}\n                  className={cx(\n                    'Crud-toolbar-item',\n                    align ? `Crud-toolbar-item--${align}` : '',\n                    toolbar.className\n                  )}\n                >\n                  {child}\n                </div>\n              );\n            })}\n          </div>\n        );\n      }\n      return null;\n    }\n\n    const result = toolbarRenderer\n      ? toolbarRenderer(toolbar, index)\n      : undefined;\n\n    if (result !== void 0) {\n      return result;\n    }\n\n    const {render, store} = this.props;\n    const $$editable = childProps.$$editable;\n\n    return render(`toolbar/${index}`, toolbar, {\n      // 包两层，主要是为了处理以下 case\n      // 里面放了个 form，form 提交过来的时候不希望把 items 这些发送过来。\n      // 因为会把数据呈现在地址栏上。\n      data: createObject(\n        createObject(store.filterData, {\n          items: childProps.items,\n          selectedItems: childProps.selectedItems,\n          unSelectedItems: childProps.unSelectedItems\n        }),\n        {}\n      ),\n      page: store.page,\n      lastPage: store.lastPage,\n      perPage: store.perPage,\n      total: store.total,\n      onQuery: this.handleQuery,\n      onAction: this.handleAction,\n      onChangePage: this.handleChangePage,\n      onBulkAction: this.handleBulkAction,\n      $$editable\n    });\n  }\n\n  renderHeaderToolbar(\n    childProps: any,\n    toolbarRenderer?: (toolbar: SchemaNode, index: number) => React.ReactNode\n  ) {\n    let {toolbar, toolbarInline, headerToolbar} = this.props;\n\n    if (toolbar) {\n      if (Array.isArray(headerToolbar)) {\n        headerToolbar = toolbarInline\n          ? headerToolbar.concat(toolbar)\n          : [headerToolbar, toolbar];\n      } else if (headerToolbar) {\n        headerToolbar = [headerToolbar, toolbar];\n      } else {\n        headerToolbar = toolbar;\n      }\n    }\n\n    return this.renderToolbar(\n      headerToolbar || [],\n      0,\n      childProps,\n      toolbarRenderer\n    );\n  }\n\n  renderFooterToolbar(\n    childProps: any,\n    toolbarRenderer?: (toolbar: SchemaNode, index: number) => React.ReactNode\n  ) {\n    let {toolbar, toolbarInline, footerToolbar} = this.props;\n\n    if (toolbar) {\n      if (Array.isArray(footerToolbar)) {\n        footerToolbar = toolbarInline\n          ? footerToolbar.concat(toolbar)\n          : [footerToolbar, toolbar];\n      } else if (footerToolbar) {\n        footerToolbar = [footerToolbar, toolbar];\n      } else {\n        footerToolbar = toolbar;\n      }\n    }\n\n    return this.renderToolbar(footerToolbar, 0, childProps, toolbarRenderer);\n  }\n\n  renderSelection(): React.ReactNode {\n    const {\n      store,\n      classnames: cx,\n      labelField,\n      labelTpl,\n      primaryField,\n      translate: __\n    } = this.props;\n\n    if (!store.selectedItems.length) {\n      return null;\n    }\n\n    return (\n      <div className={cx('Crud-selection')}>\n        <div className={cx('Crud-selectionLabel')}>已选条目：</div>\n        {store.selectedItems.map((item, index) => (\n          <div key={index} className={cx(`Crud-value`)}>\n            <span\n              data-tooltip={__('删除')}\n              data-position=\"bottom\"\n              className={cx('Crud-valueIcon')}\n              onClick={this.unSelectItem.bind(this, item, index)}\n            >\n              ×\n            </span>\n            <span className={cx('Crud-valueLabel')}>\n              {labelTpl ? (\n                <Html html={filter(labelTpl, item)} />\n              ) : (\n                getVariable(item, labelField || 'label') ||\n                getVariable(item, primaryField || 'id')\n              )}\n            </span>\n          </div>\n        ))}\n        <a onClick={this.clearSelection} className={cx('Crud-selectionClear')}>\n          {__('清空')}\n        </a>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      className,\n      bodyClassName,\n      filter,\n      render,\n      store,\n      mode,\n      syncLocation,\n      children,\n      bulkActions,\n      pickerMode,\n      multiple,\n      valueField,\n      primaryField,\n      value,\n      hideQuickSaveBtn,\n      itemActions,\n      classnames: cx,\n      keepItemSelectionOnPageChange,\n      onAction,\n      popOverContainer,\n      translate: __,\n      ...rest\n    } = this.props;\n\n    return (\n      <div\n        className={cx('Crud', className, {\n          'is-loading': store.loading\n        })}\n      >\n        {filter && (!store.filterTogggable || store.filterVisible)\n          ? render(\n              'filter',\n              {\n                title: __('条件过滤'),\n                mode: 'inline',\n                submitText: __('搜索'),\n                ...filter,\n                type: 'form',\n                api: null\n              },\n              {\n                key: 'filter',\n                data: store.filterData,\n                onReset: this.handleFilterReset,\n                onSubmit: this.handleFilterSubmit,\n                onInit: this.handleFilterInit\n              }\n            )\n          : null}\n\n        {keepItemSelectionOnPageChange && multiple\n          ? this.renderSelection()\n          : null}\n\n        {render(\n          'body',\n          {\n            ...rest,\n            type: mode || 'table'\n          },\n          {\n            key: 'body',\n            className: cx('Crud-body', bodyClassName),\n            ref: this.controlRef,\n            selectable: !!(\n              (this.hasBulkActionsToolbar() && this.hasBulkActions()) ||\n              pickerMode\n            ),\n            itemActions,\n            multiple:\n              multiple === void 0\n                ? bulkActions && bulkActions.length > 0\n                  ? true\n                  : false\n                : multiple,\n            selected:\n              pickerMode || keepItemSelectionOnPageChange\n                ? store.selectedItemsAsArray\n                : undefined,\n            valueField: valueField || primaryField,\n            primaryField: primaryField,\n            hideQuickSaveBtn,\n            items: store.data.items,\n            query: store.query,\n            orderBy: store.query.orderBy,\n            orderDir: store.query.orderDir,\n            popOverContainer,\n            onAction: this.handleAction,\n            onSave: this.handleSave,\n            onSaveOrder: this.handleSaveOrder,\n            onQuery: this.handleQuery,\n            onSelect: this.handleSelect,\n            onPopOverOpened: this.handleChildPopOverOpen,\n            onPopOverClosed: this.handleChildPopOverClose,\n            headerToolbarRender: this.renderHeaderToolbar,\n            footerToolbarRender: this.renderFooterToolbar,\n            data: store.mergedData\n          }\n        )}\n\n        <Spinner overlay size=\"lg\" key=\"info\" show={store.loading} />\n\n        {render(\n          'dialog',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).dialog as object)),\n            type: 'dialog'\n          },\n          {\n            key: 'dialog',\n            data: store.dialogData,\n            onConfirm: this.handleDialogConfirm,\n            onClose: this.handleDialogClose,\n            show: store.dialogOpen\n          }\n        )}\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  test: /(^|\\/)crud$/,\n  storeType: CRUDStore.name,\n  name: 'crud'\n})\nexport class CRUDRenderer extends CRUD {\n  static contextType = ScopedContext;\n\n  componentWillMount() {\n    super.componentWillMount();\n\n    const scoped = this.context as IScopedContext;\n    scoped.registerComponent(this);\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount();\n    const scoped = this.context as IScopedContext;\n    scoped.unRegisterComponent(this);\n  }\n\n  reloadTarget(target: string, data: any) {\n    const scoped = this.context as IScopedContext;\n    scoped.reload(target, data);\n  }\n\n  closeTarget(target: string) {\n    const scoped = this.context as IScopedContext;\n    scoped.close(target);\n  }\n}\n"
    ]
}