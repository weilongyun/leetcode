{
    "version": 3,
    "file": "Nav.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Nav.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Renderer, RendererProps} from '../factory';\nimport {ServiceStore, IServiceStore} from '../store/service';\nimport cx from 'classnames';\nimport getExprProperties from '../utils/filter-schema';\nimport {filter, evalExpression} from '../utils/tpl';\nimport {createObject, mapTree, someTree} from '../utils/helper';\nimport {resolveVariable, isPureVariable} from '../utils/tpl-builtin';\nimport {isApiOutdated, isEffectiveApi} from '../utils/api';\nimport {ScopedContext, IScopedContext} from '../Scoped';\nimport {Api} from '../types';\nimport {ClassNamesFn, themeable, ThemeProps} from '../theme';\nimport {Icon} from '../components/icons';\nimport {BaseSchema, SchemaApi, SchemaIcon, SchemaUrlPath} from '../Schema';\n\nexport type NavItemSchema = {\n  /**\n   * 文字说明\n   */\n  label?: string;\n\n  /**\n   * 图标类名，参考 fontawesome 4。\n   */\n  icon?: SchemaIcon;\n\n  to?: SchemaUrlPath;\n\n  children?: Array<NavItemSchema>;\n} & Omit<BaseSchema, 'type'>;\n\n/**\n * Nav 导航渲染器\n * 文档：https://baidu.gitee.io/amis/docs/components/nav\n */\nexport interface NavSchema extends BaseSchema {\n  /**\n   * 指定为 Nav 导航渲染器\n   */\n  type: 'nav';\n\n  /**\n   * 链接地址集合\n   */\n  links?: Array<NavItemSchema>;\n\n  /**\n   * 可以通过 API 拉取。\n   */\n  source?: SchemaApi;\n\n  /**\n   * true 为垂直排列，false 为水平排列类似如 tabs。\n   */\n  stacked?: boolean;\n}\n\nexport interface Link {\n  className?: string;\n  label?: string;\n  to?: string;\n  icon?: string;\n  active?: boolean;\n  activeOn?: string;\n  unfolded?: boolean;\n  children?: Links;\n  [propName: string]: any;\n}\nexport interface Links extends Array<Link> {}\n\nexport interface NavigationState {\n  links: Links;\n  error?: string;\n}\n\nexport interface NavigationProps extends RendererProps, ThemeProps, NavSchema {\n  onSelect?: (item: Link) => any;\n}\n\nexport class Navigation extends React.Component<\n  NavigationProps,\n  NavigationState\n> {\n  static defaultProps: Partial<NavigationProps> = {};\n\n  mounted: boolean = true;\n  constructor(props: NavigationProps) {\n    super(props);\n\n    this.renderItem = this.renderItem.bind(this);\n\n    this.state = {\n      links: this.syncLinks(\n        props,\n        (props.source &&\n          typeof props.source === 'string' &&\n          isPureVariable(props.source) &&\n          resolveVariable(props.source, props.data)) ||\n          props.links\n      )\n    };\n  }\n\n  componentDidMount() {\n    const {source} = this.props;\n\n    if (source && !isPureVariable(source as string)) {\n      this.reload();\n    }\n  }\n\n  componentWillReceiveProps(nextProps: NavigationProps) {\n    const props = this.props;\n\n    if (nextProps.source && isPureVariable(nextProps.source as string)) {\n      if (nextProps.source !== props.source) {\n        this.setState({\n          links: this.syncLinks(nextProps)\n        });\n      } else {\n        const links = resolveVariable(\n          nextProps.source as string,\n          nextProps.data\n        );\n        const prevLinks = resolveVariable(props.source as string, props.data);\n\n        if (links !== prevLinks) {\n          this.setState({\n            links: this.syncLinks(nextProps, links)\n          });\n        }\n      }\n    } else if (props.links !== nextProps.links) {\n      this.setState({\n        links: this.syncLinks(nextProps)\n      });\n    } else if (nextProps.location && props.location !== nextProps.location) {\n      this.setState({\n        links: this.syncLinks(nextProps, this.state.links, true)\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps: NavigationProps) {\n    const props = this.props;\n\n    if (props.source && !isPureVariable(props.source as string)) {\n      isApiOutdated(\n        prevProps.source,\n        props.source,\n        prevProps.data,\n        props.data\n      ) && this.reload();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  reload(target?: string, query?: any, values?: object) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const {data, env, source, translate: __} = this.props;\n    const finalData = values ? createObject(data, values) : data;\n\n    if (!isEffectiveApi(source, data)) {\n      return;\n    }\n\n    env\n      .fetcher(source as Api, finalData)\n      .then(payload => {\n        if (!this.mounted) {\n          return;\n        }\n\n        if (!payload.ok) {\n          this.setState({\n            error: payload.msg || __('获取链接错误')\n          });\n        } else {\n          const links = Array.isArray(payload.data)\n            ? payload.data\n            : payload.data.links ||\n              payload.data.options ||\n              payload.data.items ||\n              payload.data.rows;\n\n          if (!Array.isArray(links)) {\n            throw new Error('\bpayload.data.options is not array.');\n          }\n\n          this.setState(\n            {\n              links: this.syncLinks(this.props, links)\n            },\n            () => {\n              if (\n                payload.data &&\n                payload.data.value &&\n                !someTree(this.state.links, (item: any) => item.active)\n              ) {\n                env.jumpTo(filter(payload.data.value as string, data));\n              }\n            }\n          );\n        }\n      })\n      .catch(\n        e =>\n          this.mounted &&\n          this.setState({\n            error: e.message\n          })\n      );\n  }\n\n  receive(values: object) {\n    const {store, initApi} = this.props;\n\n    this.reload(undefined, undefined, values);\n  }\n\n  syncLinks(\n    props: NavigationProps,\n    links = props.links,\n    clearActive?: boolean\n  ): Links {\n    const {data, env} = props;\n\n    if (!Array.isArray(links) || !links.length) {\n      return [];\n    }\n\n    return mapTree(\n      links,\n      (link: Link) => {\n        return {\n          ...link,\n          ...getExprProperties(link, data as object),\n          active:\n            (!clearActive && link.active) ||\n            (link.activeOn\n              ? evalExpression(link.activeOn as string, data)\n              : !!(\n                  link.hasOwnProperty('to') &&\n                  env &&\n                  env.isCurrentUrl(filter(link.to as string, data))\n                )),\n          unfolded:\n            link.unfolded ||\n            (link.children && link.children.some(link => !!link.active))\n        };\n      },\n      1,\n      true\n    );\n  }\n\n  handleClick(link: {\n    label?: string;\n    to?: string;\n    icon?: string;\n    children?: Links;\n  }) {\n    const {env, data, onSelect} = this.props;\n\n    if (onSelect && onSelect(link) === false) {\n      return;\n    }\n\n    if (!link.to) {\n      link.children && link.children.length && this.toggleLink(link);\n      return;\n    }\n\n    env && env.jumpTo(filter(link.to as string, data), link as any);\n  }\n\n  toggleLink(target: Link) {\n    this.setState({\n      links: mapTree(this.state.links, (link: Link) =>\n        target === link\n          ? {\n              ...link,\n              unfolded: !link.unfolded\n            }\n          : link\n      )\n    });\n  }\n\n  renderItem(link: Link, index: number) {\n    if (link.hidden === true || link.visible === false) {\n      return null;\n    }\n    const isActive: boolean = !!link.active;\n    const {disabled, togglerClassName, classnames: cx} = this.props;\n\n    return (\n      <li\n        key={index}\n        className={cx('Nav-item', link.className, {\n          'is-disabled': disabled || link.disabled,\n          'is-active': isActive,\n          'is-unfolded': link.unfolded\n        })}\n      >\n        <a onClick={this.handleClick.bind(this, link)}>\n          {link.icon ? <i className={cx('Nav-itemIcon', link.icon)} /> : null}\n          {link.label}\n        </a>\n\n        {link.children && link.children.length ? (\n          <span\n            onClick={() => this.toggleLink(link)}\n            className={cx('Nav-itemToggler', togglerClassName)}\n          >\n            <Icon icon=\"caret\" className=\"icon\" />\n          </span>\n        ) : null}\n\n        {link.children && link.children.length ? (\n          <ul className={cx('Nav-subItems')}>\n            {link.children.map((link, index) => this.renderItem(link, index))}\n          </ul>\n        ) : null}\n      </li>\n    );\n  }\n\n  render(): JSX.Element {\n    const {className, stacked, classnames: cx} = this.props;\n\n    const links = this.state.links;\n\n    return (\n      <ul\n        className={cx('Nav', className, stacked ? 'Nav--stacked' : 'Nav--tabs')}\n      >\n        {links.map(this.renderItem)}\n      </ul>\n    );\n  }\n}\n\nexport default themeable(Navigation);\n\n@Renderer({\n  test: /(^|\\/)(?:nav|navigation)$/,\n  name: 'nav'\n})\nexport class NavigationRenderer extends Navigation {\n  static contextType = ScopedContext;\n\n  componentWillMount() {\n    const scoped = this.context as IScopedContext;\n    scoped.registerComponent(this);\n  }\n\n  componentWillUnmount() {\n    const scoped = this.context as IScopedContext;\n    scoped.unRegisterComponent(this);\n    super.componentWillUnmount();\n  }\n}\n"
    ]
}