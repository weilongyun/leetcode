{
    "version": 3,
    "file": "index.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/index.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Renderer, RendererProps} from '../../factory';\nimport {observer} from 'mobx-react';\nimport {FormStore, IFormStore} from '../../store/form';\nimport {Api, SchemaNode, Schema, Action, ApiObject, Payload} from '../../types';\nimport {filter, evalExpression} from '../../utils/tpl';\nimport cx from 'classnames';\nimport getExprProperties from '../../utils/filter-schema';\nimport {\n  promisify,\n  difference,\n  until,\n  noop,\n  isObject,\n  isVisible,\n  cloneObject,\n  SkipOperation\n} from '../../utils/helper';\nimport debouce from 'lodash/debounce';\nimport flatten from 'lodash/flatten';\nimport find from 'lodash/find';\nimport Scoped, {\n  ScopedContext,\n  IScopedContext,\n  ScopedComponentType\n} from '../../Scoped';\nimport {IComboStore} from '../../store/combo';\nimport qs from 'qs';\nimport {dataMapping} from '../../utils/tpl-builtin';\nimport {isApiOutdated, isEffectiveApi} from '../../utils/api';\nimport Spinner from '../../components/Spinner';\nimport {LazyComponent} from '../../components';\nimport {isAlive} from 'mobx-state-tree';\nimport {asFormItem, FormControlSchema} from './Item';\nimport {SimpleMap} from '../../utils/SimpleMap';\nimport {trace} from 'mobx';\nimport {\n  BaseSchema,\n  SchemaApi,\n  SchemaClassName,\n  SchemaCollection,\n  SchemaDefaultData,\n  SchemaExpression,\n  SchemaMessage,\n  SchemaName,\n  SchemaRedirect,\n  SchemaReload\n} from '../../Schema';\nimport {ActionSchema} from '../Action';\n\nexport interface FormSchemaHorizontal {\n  left?: number;\n  right?: number;\n  leftFixed?: boolean | number | 'xs' | 'sm' | 'md' | 'lg';\n}\n\n/**\n * Form 表单渲染器。\n *\n * 说明：https://baidu.gitee.io/amis/docs/components/form/index\n */\nexport interface FormSchema extends BaseSchema {\n  /**\n   * 指定为表单渲染器。\n   */\n  type: 'form';\n\n  /**\n   * 表单标题\n   */\n  title?: string;\n\n  /**\n   * 按钮集合，会固定在底部显示。\n   */\n  actions?: Array<ActionSchema>;\n\n  /**\n   * 表单项集合\n   */\n  controls?: Array<FormControlSchema>;\n\n  /**\n   * @deprecated 请用类型 tabs\n   */\n  tabs?: any;\n\n  /**\n   * @deprecated 请用类型 fieldSet\n   */\n  fieldSet?: any;\n\n  data?: SchemaDefaultData;\n\n  /**\n   * 是否开启调试，开启后会在顶部实时显示表单项数据。\n   */\n  debug?: boolean;\n\n  /**\n   * 用来初始化表单数据\n   */\n  initApi?: SchemaApi;\n\n  /**\n   * Form 用来获取初始数据的 api,与initApi不同的是，会一直轮训请求该接口，直到返回 finished 属性为 true 才 结束。\n   */\n  initAsyncApi?: SchemaApi;\n\n  /**\n   * 设置了initAsyncApi后，默认会从返回数据的data.finished来判断是否完成，也可以设置成其他的xxx，就会从data.xxx中获取\n   */\n  initFinishedField?: string;\n\n  /**\n   * 设置了initAsyncApi以后，默认拉取的时间间隔\n   */\n  initCheckInterval?: number;\n\n  /**\n   * 是否初始加载\n   */\n  initFetch?: boolean;\n\n  /**\n   * 建议改成 api 的 sendOn 属性。\n   */\n  initFetchOn?: SchemaExpression;\n\n  /**\n   * 设置后将轮询调用 initApi\n   */\n  interval?: number;\n\n  /**\n   * 是否静默拉取\n   */\n  silentPolling?: boolean;\n\n  /**\n   * 配置停止轮询的条件\n   */\n  stopAutoRefreshWhen?: string;\n\n  /**\n   * 是否开启本地缓存\n   */\n  persistData?: boolean;\n\n  /**\n   * 提交成功后清空本地缓存\n   */\n  clearPersistDataAfterSubmit?: boolean;\n\n  /**\n   * Form 用来保存数据的 api。\n   *\n   * 详情：https://baidu.gitee.io/amis/docs/components/form/index#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4\n   */\n  api?: SchemaApi;\n\n  /**\n   * 设置此属性后，表单提交发送保存接口后，还会继续轮训请求该接口，直到返回 finished 属性为 true 才 结束。\n   */\n  asyncApi?: SchemaApi;\n\n  /**\n   * 轮训请求的时间间隔，默认为 3秒。设置 asyncApi 才有效\n   */\n  checkInterval?: number;\n\n  /**\n   * 如果决定结束的字段名不是 `finished` 请设置此属性，比如 `is_success`\n   */\n  finishedField?: string;\n\n  /**\n   * 提交完后重置表单\n   */\n  resetAfterSubmit?: boolean;\n\n  /**\n   * 配置表单项默认的展示方式。\n   */\n  mode?: 'normal' | 'inline' | 'horizontal';\n\n  /**\n   * 如果是水平排版，这个属性可以细化水平排版的左右宽度占比。\n   */\n  horizontal?: FormSchemaHorizontal;\n\n  /**\n   * 是否自动将第一个表单元素聚焦。\n   */\n  autoFocus?: boolean;\n\n  /**\n   * 消息文案配置，记住这个优先级是最低的，如果你的接口返回了 msg，接口返回的优先。\n   */\n  messages?: {\n    /**\n     * 表单验证失败时的提示\n     */\n    validateFailed?: string;\n  } & SchemaMessage;\n\n  name?: SchemaName;\n\n  /**\n   * 配置容器 panel className\n   */\n  panelClassName?: SchemaClassName;\n\n  /**\n   * 设置主键 id, 当设置后，检测表单是否完成时（asyncApi），只会携带此数据。\n   * @default id\n   */\n  primaryField?: string;\n\n  redirect?: SchemaRedirect;\n\n  reload?: SchemaReload;\n\n  /**\n   * 修改的时候是否直接提交表单。\n   */\n  submitOnChange?: boolean;\n\n  /**\n   * 表单初始先提交一次，联动的时候有用\n   */\n  submitOnInit?: boolean;\n\n  /**\n   * 默认的提交按钮名称，如果设置成空，则可以把默认按钮去掉。\n   */\n  submitText?: string;\n\n  /**\n   * 默认表单提交自己会通过发送 api 保存数据，但是也可以设定另外一个 form 的 name 值，或者另外一个 `CRUD` 模型的 name 值。 如果 target 目标是一个 `Form` ，则目标 `Form` 会重新触发 `initApi` 和 `schemaApi`，api 可以拿到当前 form 数据。如果目标是一个 `CRUD` 模型，则目标模型会重新触发搜索，参数为当前 Form 数据。\n   */\n  target?: string;\n\n  /**\n   * 是否用 panel 包裹起来\n   */\n  wrapWithPanel?: boolean;\n\n  /**\n   * 内容区\n   */\n  body?: SchemaCollection;\n\n  /**\n   * 是否固定底下的按钮在底部。\n   */\n  affixFooter?: boolean;\n}\n\nexport type FormGroup = FormSchema & {\n  title?: string;\n  className?: string;\n};\nexport type FormGroupNode = FormGroup | FormGroupArray;\nexport interface FormGroupArray extends Array<FormGroupNode> {}\n\nexport type FormHorizontal = FormSchemaHorizontal;\n\nexport interface FormProps extends RendererProps, Omit<FormSchema, 'mode'> {\n  data: any;\n  store: IFormStore;\n  wrapperComponent: React.ElementType;\n  canAccessSuperData: boolean;\n  trimValues?: boolean;\n  lazyLoad?: boolean;\n  simpleMode?: boolean;\n  onInit?: (values: object, props: any) => any;\n  onReset?: (values: object) => void;\n  onSubmit?: (values: object, action: any) => any;\n  onChange?: (values: object, diff: object, props: any) => any;\n  onFailed?: (reason: string, errors: any) => any;\n  onFinished: (values: object, action: any) => any;\n  onValidate: (values: object, form: any) => any;\n  messages: {\n    fetchSuccess?: string;\n    fetchFailed?: string;\n    saveSuccess?: string;\n    saveFailed?: string;\n    validateFailed?: string;\n  };\n  lazyChange?: boolean; // 表单项的\n  formLazyChange?: boolean; // 表单的\n}\n\nexport default class Form extends React.Component<FormProps, object> {\n  static defaultProps = {\n    title: '表单',\n    submitText: '提交',\n    initFetch: true,\n    wrapWithPanel: true,\n    mode: 'normal',\n    collapsable: false,\n    controlWidth: 'full',\n    horizontal: {\n      left: 2,\n      right: 10,\n      offset: 2\n    },\n    panelClassName: 'Panel--default',\n    messages: {\n      fetchFailed: '初始化失败',\n      saveSuccess: '保存成功',\n      saveFailed: '保存失败'\n    },\n    wrapperComponent: '',\n    finishedField: 'finished',\n    initFinishedField: 'finished'\n  };\n  static propsList: Array<string> = [\n    'title',\n    'header',\n    'controls',\n    'tabs',\n    'fieldSet',\n    'submitText',\n    'initFetch',\n    'wrapWithPanel',\n    'mode',\n    'collapsable',\n    'horizontal',\n    'panelClassName',\n    'messages',\n    'wrapperComponent',\n    'resetAfterSubmit',\n    'submitOnInit',\n    'submitOnChange',\n    'onInit',\n    'onReset',\n    'onSubmit',\n    'onChange',\n    'onFailed',\n    'onFinished',\n    'onSaved',\n    'canAccessSuperData',\n    'lazyChange',\n    'formLazyChange',\n    'lazyLoad',\n    'formInited',\n    'simpleMode'\n  ];\n\n  hooks: {\n    [propName: string]: Array<() => Promise<any>>;\n  } = {};\n  asyncCancel: () => void;\n  disposeOnValidate: () => void;\n  shouldLoadInitApi: boolean = false;\n  timer: NodeJS.Timeout;\n  mounted: boolean;\n  lazyHandleChange = debouce(this.handleChange.bind(this), 250, {\n    trailing: true,\n    leading: false\n  });\n  componentCache: SimpleMap = new SimpleMap();\n  constructor(props: FormProps) {\n    super(props);\n\n    this.onInit = this.onInit.bind(this);\n    this.handleAction = this.handleAction.bind(this);\n    this.handleQuery = this.handleQuery.bind(this);\n    this.handleDialogConfirm = this.handleDialogConfirm.bind(this);\n    this.handleDialogClose = this.handleDialogClose.bind(this);\n    this.handleDrawerConfirm = this.handleDrawerConfirm.bind(this);\n    this.handleDrawerClose = this.handleDrawerClose.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.validate = this.validate.bind(this);\n    this.submit = this.submit.bind(this);\n    this.addHook = this.addHook.bind(this);\n    this.removeHook = this.removeHook.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.renderFormItems = this.renderFormItems.bind(this);\n    this.reload = this.reload.bind(this);\n    this.silentReload = this.silentReload.bind(this);\n    this.initInterval = this.initInterval.bind(this);\n  }\n\n  componentWillMount() {\n    const {store, canAccessSuperData, persistData, simpleMode} = this.props;\n\n    store.setCanAccessSuperData(canAccessSuperData !== false);\n    persistData && store.getPersistData();\n\n    if (simpleMode) {\n      store.setInited(true);\n    }\n\n    if (\n      store &&\n      store.parentStore &&\n      store.parentStore.storeType === 'ComboStore'\n    ) {\n      const combo = store.parentStore as IComboStore;\n      combo.addForm(store);\n      combo.forms.forEach(item =>\n        item.items.forEach(item => item.unique && item.syncOptions())\n      );\n    }\n  }\n\n  componentDidMount() {\n    const {\n      initApi,\n      initFetch,\n      initFetchOn,\n      initAsyncApi,\n      initFinishedField,\n      initCheckInterval,\n      store,\n      messages: {fetchSuccess, fetchFailed},\n      onValidate\n    } = this.props;\n\n    this.mounted = true;\n\n    if (onValidate) {\n      const finnalValidate = promisify(onValidate);\n      this.disposeOnValidate = this.addHook(async () => {\n        const result = await finnalValidate(store.data, store);\n\n        if (result && isObject(result)) {\n          Object.keys(result).forEach(key => {\n            let msg = result[key];\n            const item = store.getItemByName(key);\n\n            // 没有这个 formItem\n            if (!item) {\n              return;\n            }\n\n            if (msg) {\n              msg = Array.isArray(msg) ? msg : [msg];\n              item.addError(msg);\n            } else {\n              item.clearError();\n            }\n          });\n        }\n      });\n    }\n\n    if (isEffectiveApi(initApi, store.data, initFetch, initFetchOn)) {\n      store\n        .fetchInitData(initApi as any, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed,\n          onSuccess: () => {\n            if (\n              !isEffectiveApi(initAsyncApi, store.data) ||\n              store.data[initFinishedField || 'finished']\n            ) {\n              return;\n            }\n\n            return until(\n              () => store.checkRemote(initAsyncApi, store.data),\n              (ret: any) => ret && ret[initFinishedField || 'finished'],\n              cancel => (this.asyncCancel = cancel),\n              initCheckInterval\n            );\n          }\n        })\n        .then(this.initInterval)\n        .then(this.onInit);\n    } else {\n      setTimeout(this.onInit.bind(this), 4);\n    }\n  }\n\n  componentDidUpdate(prevProps: FormProps) {\n    const props = this.props;\n    const store = props.store;\n\n    if (\n      isApiOutdated(\n        prevProps.initApi,\n        props.initApi,\n        prevProps.data,\n        props.data\n      )\n    ) {\n      const {fetchSuccess, fetchFailed} = props;\n\n      store\n        .fetchData(props.initApi as Api, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed\n        })\n        .then(this.initInterval);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    clearTimeout(this.timer);\n    // this.lazyHandleChange.flush();\n    this.lazyHandleChange.cancel();\n    this.asyncCancel && this.asyncCancel();\n    this.disposeOnValidate && this.disposeOnValidate();\n    this.componentCache.dispose();\n  }\n\n  async onInit() {\n    const {onInit, store, submitOnInit} = this.props;\n    if (!isAlive(store)) {\n      return;\n    }\n\n    // 先拿出来数据，主要担心 form 被什么东西篡改了，然后又应用出去了\n    // 之前遇到过问题，所以拿出来了。但是 options  loadOptions 默认值失效了。\n    // 所以目前需要两个都要设置一下，再 init Hook 里面。\n    let data = cloneObject(store.data);\n    const initedAt = store.initedAt;\n\n    store.setInited(true);\n    const hooks: Array<(data: any) => Promise<any>> = this.hooks['init'] || [];\n    await Promise.all(hooks.map(hook => hook(data)));\n\n    if (!isAlive(store)) {\n      return;\n    }\n\n    if (store.initedAt !== initedAt) {\n      // 说明，之前的数据已经失效了。\n      // 比如 combo 一开始设置了初始值，然后 form 的 initApi 又返回了新的值。\n      // 这个时候 store 的数据应该已经 init 了新的值。但是 data 还是老的，这个时候\n      // onInit 出去就是错误的。\n      data = {\n        ...data,\n        ...store.data\n      };\n    }\n\n    onInit && onInit(data, this.props);\n\n    submitOnInit &&\n      this.handleAction(\n        undefined,\n        {\n          type: 'submit'\n        },\n        store.data\n      );\n  }\n\n  reload(subPath?: string, query?: any, ctx?: any, silent?: boolean) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const {\n      store,\n      initApi,\n      initAsyncApi,\n      initFinishedField,\n      messages: {fetchSuccess, fetchFailed}\n    } = this.props;\n\n    isEffectiveApi(initAsyncApi, store.data) &&\n      store.updateData({\n        [initFinishedField || 'finished']: false\n      });\n\n    isEffectiveApi(initApi, store.data)\n      ? store\n          .fetchInitData(initApi, store.data, {\n            successMessage: fetchSuccess,\n            errorMessage: fetchFailed,\n            silent,\n            onSuccess: () => {\n              if (\n                !isEffectiveApi(initAsyncApi, store.data) ||\n                store.data[initFinishedField || 'finished']\n              ) {\n                return;\n              }\n\n              return until(\n                () => store.checkRemote(initAsyncApi, store.data),\n                (ret: any) => ret && ret[initFinishedField || 'finished'],\n                cancel => (this.asyncCancel = cancel)\n              );\n            }\n          })\n          .then((result: Payload) => {\n            if (result?.ok) {\n              this.initInterval(result);\n              store.reset(undefined, false);\n            }\n          })\n      : store.reset(undefined, false);\n  }\n\n  receive(values: object) {\n    const {store} = this.props;\n\n    store.updateData(values);\n    this.reload();\n  }\n\n  silentReload(target?: string, query?: any) {\n    this.reload(target, query, undefined, true);\n  }\n\n  initInterval(value: any) {\n    const {interval, silentPolling, stopAutoRefreshWhen, data} = this.props;\n\n    clearTimeout(this.timer);\n    interval &&\n      this.mounted &&\n      (!stopAutoRefreshWhen || !evalExpression(stopAutoRefreshWhen, data)) &&\n      (this.timer = setTimeout(\n        silentPolling ? this.silentReload : this.reload,\n        Math.max(interval, 3000)\n      ));\n    return value;\n  }\n\n  isValidated() {\n    return this.props.store.validated;\n  }\n\n  validate(forceValidate?: boolean): Promise<boolean> {\n    const {store} = this.props;\n\n    this.flush();\n    return store.validate(this.hooks['validate'] || [], forceValidate);\n  }\n\n  clearErrors() {\n    const {store} = this.props;\n\n    return store.clearErrors();\n  }\n\n  getValues() {\n    const {store} = this.props;\n    this.flush();\n    return store.data;\n  }\n\n  setValues(value: any) {\n    const {store} = this.props;\n    this.flush();\n    store.setValues(value);\n  }\n\n  submit(fn?: (values: object) => Promise<any>): Promise<any> {\n    const {store, messages, translate: __} = this.props;\n    this.flush();\n\n    return store.submit(\n      fn,\n      this.hooks['validate'] || [],\n      __(messages && messages.validateFailed)\n    );\n  }\n\n  // 如果开启了 lazyChange，需要一个 flush 方法把队列中值应用上。\n  flush() {\n    const hooks = this.hooks['flush'] || [];\n    hooks.forEach(fn => fn());\n    this.lazyHandleChange.flush();\n  }\n\n  reset() {\n    const {store, onReset} = this.props;\n    store.reset(onReset);\n  }\n\n  addHook(fn: () => any, type: 'validate' | 'init' | 'flush' = 'validate') {\n    this.hooks[type] = this.hooks[type] || [];\n    this.hooks[type].push(type === 'flush' ? fn : promisify(fn));\n    return () => {\n      this.removeHook(fn, type);\n      fn = noop;\n    };\n  }\n\n  removeHook(fn: () => any, type: string = 'validate') {\n    const hooks = this.hooks[type];\n\n    if (!hooks) {\n      return;\n    }\n\n    for (let i = 0, len = hooks.length; i < len; i++) {\n      let hook = hooks[i];\n\n      if (hook === fn || (hook as any).raw === fn) {\n        hooks.splice(i, 1);\n        len--;\n        i--;\n      }\n    }\n  }\n\n  handleChange(value: any, name: string, submit: boolean) {\n    const {onChange, store, submitOnChange} = this.props;\n\n    onChange &&\n      onChange(store.data, difference(store.data, store.pristine), this.props);\n\n    (submit || submitOnChange) &&\n      this.handleAction(\n        undefined,\n        {\n          type: 'submit'\n        },\n        store.data\n      );\n  }\n\n  handleFormSubmit(e: React.UIEvent<any>) {\n    e.preventDefault();\n    return this.handleAction(\n      e,\n      {\n        type: 'submit'\n      },\n      this.props.store.data\n    );\n  }\n\n  handleAction(\n    e: React.UIEvent<any> | void,\n    action: Action,\n    data: object,\n    throwErrors: boolean = false,\n    delegate?: IScopedContext\n  ): any {\n    const {\n      store,\n      onSubmit,\n      api,\n      asyncApi,\n      finishedField,\n      checkInterval,\n      messages: {saveSuccess, saveFailed},\n      resetAfterSubmit,\n      onAction,\n      onSaved,\n      onReset,\n      onFinished,\n      onFailed,\n      redirect,\n      reload,\n      target,\n      env,\n      onChange,\n      clearPersistDataAfterSubmit,\n      trimValues,\n      translate: __\n    } = this.props;\n\n    // 做动作之前，先把数据同步一下。\n    this.flush();\n\n    if (trimValues) {\n      store.trimValues();\n    }\n\n    // 如果 data 就是当前层，则 flush 一下。\n    if (data === this.props.data) {\n      data = store.data;\n    }\n\n    if (Array.isArray(action.required) && action.required.length) {\n      return store.validateFields(action.required).then(result => {\n        if (!result) {\n          env.notify('error', __('依赖的部分字段没有通过验证，请注意填写！'));\n        } else {\n          this.handleAction(\n            e,\n            {...action, required: undefined},\n            data,\n            throwErrors,\n            delegate\n          );\n        }\n      });\n    }\n\n    if (\n      action.type === 'submit' ||\n      action.actionType === 'submit' ||\n      action.actionType === 'confirm'\n    ) {\n      store.setCurrentAction(action);\n      return this.submit((values): any => {\n        if (onSubmit && onSubmit(values, action) === false) {\n          return Promise.resolve(false);\n        }\n\n        if (target) {\n          this.submitToTarget(target, values);\n        } else if (action.actionType === 'reload') {\n          action.target && this.reloadTarget(action.target, values);\n        } else if (action.actionType === 'dialog') {\n          store.openDialog(data);\n        } else if (action.actionType === 'drawer') {\n          store.openDrawer(data);\n        } else if (isEffectiveApi(action.api || api, values)) {\n          let finnalAsyncApi = action.asyncApi || asyncApi;\n\n          isEffectiveApi(finnalAsyncApi, store.data) &&\n            store.updateData({\n              [finishedField || 'finished']: false\n            });\n\n          return store\n            .saveRemote(action.api || (api as Api), values, {\n              successMessage: saveSuccess,\n              errorMessage: saveFailed,\n              onSuccess: () => {\n                if (\n                  !isEffectiveApi(finnalAsyncApi, store.data) ||\n                  store.data[finishedField || 'finished']\n                ) {\n                  return;\n                }\n\n                return until(\n                  () => store.checkRemote(finnalAsyncApi as Api, store.data),\n                  (ret: any) => ret && ret[finishedField || 'finished'],\n                  cancel => (this.asyncCancel = cancel),\n                  checkInterval\n                );\n              }\n            })\n            .then(async response => {\n              onSaved && onSaved(values, response);\n\n              // submit 也支持 feedback\n              if (action.feedback && isVisible(action.feedback, store.data)) {\n                const confirmed = await this.openFeedback(\n                  action.feedback,\n                  store.data\n                );\n\n                // 如果 feedback 配置了，取消就跳过原有逻辑。\n                if (action.feedback.skipRestOnCancel && !confirmed) {\n                  throw new SkipOperation();\n                }\n              }\n\n              // return values;\n            });\n        }\n\n        return Promise.resolve(null);\n      })\n        .then(values => {\n          // 有可能 onSubmit return false 了，那么后面的就不应该再执行了。\n          if (values === false) {\n            return store.data;\n          }\n\n          if (onFinished && onFinished(values, action) === false) {\n            return values;\n          }\n\n          resetAfterSubmit && store.reset(onReset);\n          clearPersistDataAfterSubmit && store.clearPersistData();\n\n          if (action.redirect || redirect) {\n            const finalRedirect = filter(\n              action.redirect || redirect,\n              store.data\n            );\n            finalRedirect && env.jumpTo(finalRedirect, action);\n          } else if (action.reload || reload) {\n            this.reloadTarget(action.reload || reload!, store.data);\n          }\n\n          action.close && this.closeTarget(action.close);\n          return values;\n        })\n        .catch(reason => {\n          if (reason instanceof SkipOperation) {\n            return;\n          }\n\n          onFailed && onFailed(reason, store.errors);\n\n          if (throwErrors) {\n            throw reason;\n          }\n        });\n    } else if (action.type === 'reset') {\n      store.setCurrentAction(action);\n      store.reset(onReset);\n    } else if (action.actionType === 'dialog') {\n      store.setCurrentAction(action);\n      store.openDialog(data);\n    } else if (action.actionType === 'drawer') {\n      store.setCurrentAction(action);\n      store.openDrawer(data);\n    } else if (action.actionType === 'ajax') {\n      store.setCurrentAction(action);\n      if (!isEffectiveApi(action.api)) {\n        return env.alert(__(`当 actionType 为 ajax 时，请设置 api 属性`));\n      }\n\n      return store\n        .saveRemote(action.api as Api, data, {\n          successMessage: __(\n            (action.messages && action.messages.success) || saveSuccess\n          ),\n          errorMessage: __(\n            (action.messages && action.messages.failed) || saveFailed\n          )\n        })\n        .then(async response => {\n          response &&\n            onChange &&\n            onChange(\n              store.data,\n              difference(store.data, store.pristine),\n              this.props\n            );\n          if (store.validated) {\n            await this.validate(true);\n          }\n\n          if (action.feedback && isVisible(action.feedback, store.data)) {\n            await this.openFeedback(action.feedback, store.data);\n          }\n\n          const redirect =\n            action.redirect && filter(action.redirect, store.data);\n          redirect && env.jumpTo(redirect, action);\n\n          action.reload && this.reloadTarget(action.reload, store.data);\n          action.close && this.closeTarget(action.close);\n        })\n        .catch(e => {\n          onFailed && onFailed(e, store.errors);\n          if (throwErrors) {\n            throw e;\n          }\n        });\n    } else if (action.actionType === 'reload') {\n      store.setCurrentAction(action);\n      action.target && this.reloadTarget(action.target, data);\n    } else if (onAction) {\n      // 不识别的丢给上层去处理。\n      return onAction(e, action, data, throwErrors, delegate || this.context);\n    }\n  }\n\n  handleQuery(query: any) {\n    if (this.props.initApi) {\n      this.receive(query);\n    } else {\n      this.props.onQuery?.(query);\n    }\n  }\n\n  handleDialogConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    const {store, onChange} = this.props;\n\n    if (\n      (action.mergeData || store.action.mergeData) &&\n      values.length === 1 &&\n      values[0] &&\n      targets[0].props.type === 'form'\n    ) {\n      store.updateData(values[0]);\n      onChange &&\n        onChange(\n          store.data,\n          difference(store.data, store.pristine),\n          this.props\n        );\n    }\n\n    store.closeDialog(true);\n  }\n\n  handleDialogClose() {\n    const {store} = this.props;\n    store.closeDialog(false);\n  }\n\n  handleDrawerConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    const {store, onChange} = this.props;\n\n    if (\n      (action.mergeData || store.action.mergeData) &&\n      values.length === 1 &&\n      values[0] &&\n      targets[0].props.type === 'form'\n    ) {\n      store.updateData(values[0]);\n      onChange &&\n        onChange(\n          store.data,\n          difference(store.data, store.pristine),\n          this.props\n        );\n    }\n\n    store.closeDrawer(true);\n  }\n\n  handleDrawerClose() {\n    const {store} = this.props;\n    store.closeDrawer(false);\n  }\n\n  submitToTarget(target: string, values: object) {\n    // 会被覆写\n  }\n\n  reloadTarget(target: string, data?: any) {\n    // 会被覆写\n  }\n\n  closeTarget(target: string) {\n    // 会被覆写\n  }\n\n  openFeedback(dialog: any, ctx: any) {\n    return new Promise(resolve => {\n      const {store} = this.props;\n      store.setCurrentAction({\n        type: 'button',\n        actionType: 'dialog',\n        dialog: dialog\n      });\n      store.openDialog(ctx, undefined, confirmed => {\n        resolve(confirmed);\n      });\n    });\n  }\n\n  buildActions() {\n    const {actions, submitText, controls, translate: __} = this.props;\n\n    if (\n      typeof actions !== 'undefined' ||\n      !submitText ||\n      (Array.isArray(controls) &&\n        controls.some(\n          item =>\n            !!~['submit', 'button', 'reset', 'button-group'].indexOf(\n              (item as Schema).type\n            )\n        ))\n    ) {\n      return actions;\n    }\n\n    return [\n      {\n        type: 'submit',\n        label: __(submitText),\n        primary: true\n      }\n    ];\n  }\n\n  renderFormItems(\n    schema: Partial<FormSchema>,\n    region: string = '',\n    otherProps: Partial<FormProps> = {}\n  ): React.ReactNode {\n    return this.renderControls(schema.controls!, region, otherProps);\n\n    // return schema.tabs ? this.renderTabs(schema.tabs, schema, region)\n    // : schema.fieldSet ? this.renderFiledSet(schema.fieldSet, schema, region) : this.renderControls(schema.controls as SchemaNode, schema, region);\n  }\n\n  renderControls(\n    controls: Array<any>,\n    region: string,\n    otherProps: Partial<FormProps> = {}\n  ): React.ReactNode {\n    controls = controls || [];\n\n    if (!Array.isArray(controls)) {\n      controls = [controls];\n    }\n\n    if (this.props.mode === 'row') {\n      const ns = this.props.classPrefix;\n\n      controls = flatten(controls).filter(item => {\n        if ((item as Schema).hidden || (item as Schema).visible === false) {\n          return false;\n        }\n\n        const exprProps = getExprProperties(\n          item as Schema,\n          this.props.store.data,\n          undefined,\n          this.props\n        );\n        if (exprProps.hidden || exprProps.visible === false) {\n          return false;\n        }\n\n        return true;\n      });\n\n      if (!controls.length) {\n        return null;\n      }\n\n      return (\n        <div className={`${ns}Form-row`}>\n          {controls.map((control, key) =>\n            ~['hidden', 'formula'].indexOf((control as any).type) ||\n            (control as any).mode === 'inline' ? (\n              this.renderControl(control, key, otherProps)\n            ) : (\n              <div\n                key={key}\n                className={cx(\n                  `${ns}Form-col`,\n                  (control as Schema).columnClassName\n                )}\n              >\n                {this.renderControl(control, '', {\n                  ...otherProps,\n                  mode: 'row'\n                })}\n              </div>\n            )\n          )}\n        </div>\n      );\n    }\n\n    return controls.map((control, key) =>\n      this.renderControl(control, key, otherProps, region)\n    );\n  }\n\n  renderControl(\n    control: SchemaNode,\n    key: any = '',\n    otherProps: Partial<FormProps> = {},\n    region: string = ''\n  ): React.ReactNode {\n    if (!control) {\n      return null;\n    } else if (typeof control === 'string') {\n      control = {\n        type: 'tpl',\n        tpl: control\n      };\n    }\n\n    const props = {\n      ...this.props,\n      ...otherProps\n    };\n    const form = this.props.store;\n    const {\n      render,\n      mode,\n      horizontal,\n      store,\n      disabled,\n      controlWidth,\n      resolveDefinitions,\n      lazyChange,\n      formLazyChange\n    } = props;\n\n    const subProps = {\n      formStore: form,\n      data: store.data,\n      key: `${(control as Schema).name || ''}-${\n        (control as Schema).type\n      }-${key}`,\n      formInited: form.inited,\n      formMode: mode,\n      formHorizontal: horizontal,\n      controlWidth,\n      disabled: disabled || (control as Schema).disabled || form.loading,\n      btnDisabled: form.loading || form.validating,\n      onAction: this.handleAction,\n      onQuery: this.handleQuery,\n      onChange:\n        formLazyChange === false ? this.handleChange : this.lazyHandleChange,\n      addHook: this.addHook,\n      removeHook: this.removeHook,\n      renderFormItems: this.renderFormItems,\n      formPristine: form.pristine\n    };\n\n    const subSchema: any =\n      (control as Schema).type === 'control'\n        ? control\n        : {\n            type: 'control',\n            control\n          };\n\n    if (subSchema.control) {\n      let control = subSchema.control as Schema;\n      if (control.$ref) {\n        subSchema.control = control = {\n          ...resolveDefinitions(control.$ref),\n          ...control,\n          ...getExprProperties(control, store.data, undefined, subProps)\n        };\n      } else {\n        subSchema.control = control = {\n          ...control,\n          ...getExprProperties(control, store.data, undefined, subProps)\n        };\n      }\n\n      // 自定义组件如果在节点设置了 label name 什么的，就用 formItem 包一层\n      // 至少自动支持了 valdiations, label, description 等逻辑。\n      if (\n        control.component &&\n        (control.formItemConfig ||\n          (control.label !== undefined && control.name))\n      ) {\n        const cache = this.componentCache.get(control.component);\n\n        if (cache) {\n          control.component = cache;\n        } else {\n          const cache = asFormItem({\n            strictMode: false,\n            ...control.formItemConfig\n          })(control.component);\n          this.componentCache.set(control.component, cache);\n          control.component = cache;\n        }\n      }\n\n      control.hiddenOn && (subSchema.hiddenOn = control.hiddenOn);\n      control.visibleOn && (subSchema.visibleOn = control.visibleOn);\n      lazyChange === false && (control.changeImmediately = true);\n    }\n\n    return render(`${region ? `${region}/` : ''}${key}`, subSchema, subProps);\n  }\n\n  renderBody() {\n    const {\n      tabs,\n      fieldSet,\n      controls,\n      mode,\n      className,\n      classnames: cx,\n      debug,\n      $path,\n      store,\n      render\n    } = this.props;\n\n    const WrapperComponent =\n      this.props.wrapperComponent ||\n      (/(?:\\/|^)form\\//.test($path as string) ? 'div' : 'form');\n\n    return (\n      <WrapperComponent\n        className={cx(`Form`, `Form--${mode || 'normal'}`, className)}\n        onSubmit={this.handleFormSubmit}\n        noValidate\n      >\n        {debug ? (\n          <pre>\n            <code>{JSON.stringify(store.data, null, 2)}</code>\n          </pre>\n        ) : null}\n\n        <Spinner show={store.loading} overlay />\n\n        {this.renderFormItems({\n          tabs,\n          fieldSet,\n          controls\n        })}\n\n        {render(\n          'modal',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).dialog as object)),\n            type: 'dialog'\n          },\n          {\n            key: 'dialog',\n            data: store.dialogData,\n            onConfirm: this.handleDialogConfirm,\n            onClose: this.handleDialogClose,\n            show: store.dialogOpen\n          }\n        )}\n\n        {render(\n          'modal',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).drawer as object)),\n            type: 'drawer'\n          },\n          {\n            key: 'drawer',\n            data: store.drawerData,\n            onConfirm: this.handleDrawerConfirm,\n            onClose: this.handleDrawerClose,\n            show: store.drawerOpen\n          }\n        )}\n      </WrapperComponent>\n    );\n  }\n\n  render() {\n    const {\n      wrapWithPanel,\n      render,\n      title,\n      store,\n      panelClassName,\n      headerClassName,\n      footerClassName,\n      actionsClassName,\n      bodyClassName,\n      classnames: cx,\n      affixFooter,\n      lazyLoad,\n      translate: __\n    } = this.props;\n\n    // trace(true);\n    // console.log('Form');\n\n    let body: JSX.Element = this.renderBody();\n\n    if (wrapWithPanel) {\n      body = render(\n        'body',\n        {\n          type: 'panel',\n          title: __(title)\n        },\n        {\n          className: cx(panelClassName, 'Panel--form'),\n          children: body,\n          actions: this.buildActions(),\n          onAction: this.handleAction,\n          onQuery: this.handleQuery,\n          disabled: store.loading,\n          btnDisabled: store.loading || store.validating,\n          headerClassName,\n          footerClassName,\n          actionsClassName,\n          bodyClassName,\n          affixFooter\n        }\n      ) as JSX.Element;\n    }\n\n    if (lazyLoad) {\n      body = <LazyComponent>{body}</LazyComponent>;\n    }\n\n    return body;\n  }\n}\n\n@Renderer({\n  test: (path: string) =>\n    /(^|\\/)form$/.test(path) &&\n    !/(^|\\/)form(?:\\/.+)?\\/control\\/form$/.test(path),\n  storeType: FormStore.name,\n  name: 'form',\n  isolateScope: true,\n  shouldSyncSuperStore: (store, nextProps) => {\n    // 如果是 QuickEdit，让 store 同步 __super 数据。\n    if (\n      nextProps.canAccessSuperData &&\n      nextProps.quickEditFormRef &&\n      nextProps.onQuickChange\n    ) {\n      return true;\n    }\n\n    return undefined;\n  }\n})\nexport class FormRenderer extends Form {\n  static contextType = ScopedContext;\n\n  componentWillMount() {\n    const scoped = this.context as IScopedContext;\n    scoped.registerComponent(this);\n    super.componentWillMount();\n  }\n\n  componentDidMount() {\n    super.componentDidMount();\n\n    if (this.props.autoFocus) {\n      const scoped = this.context as IScopedContext;\n      const inputs = scoped.getComponents();\n      let focuableInput = find(\n        inputs,\n        input => input.focus\n      ) as ScopedComponentType;\n      focuableInput && setTimeout(() => focuableInput.focus!(), 200);\n    }\n  }\n\n  componentWillUnmount() {\n    const scoped = this.context as IScopedContext;\n    scoped.unRegisterComponent(this);\n\n    super.componentWillUnmount();\n  }\n\n  doAction(\n    action: Action,\n    data: object = this.props.store.data,\n    throwErrors: boolean = false\n  ) {\n    return this.handleAction(undefined, action, data, throwErrors);\n  }\n\n  handleAction(\n    e: React.UIEvent<any> | undefined,\n    action: Action,\n    ctx: object,\n    throwErrors: boolean = false,\n    delegate?: IScopedContext\n  ) {\n    if (action.target && action.actionType !== 'reload') {\n      const scoped = this.context as IScopedContext;\n\n      return Promise.all(\n        action.target.split(',').map(name => {\n          let target = scoped.getComponentByName(name);\n          return (\n            target &&\n            target.doAction &&\n            target.doAction(\n              {\n                ...action,\n                target: undefined\n              },\n              ctx,\n              throwErrors\n            )\n          );\n        })\n      );\n    } else {\n      return super.handleAction(e, action, ctx, throwErrors, delegate);\n    }\n  }\n\n  handleDialogConfirm(\n    values: object[],\n    action: Action,\n    ctx: any,\n    targets: Array<any>\n  ) {\n    super.handleDialogConfirm(values, action, ctx, targets);\n\n    const store = this.props.store;\n    const scoped = this.context as IScopedContext;\n\n    if (action.reload) {\n      scoped.reload(action.reload, ctx);\n    } else if (store.action && store.action.reload) {\n      scoped.reload(store.action.reload, ctx);\n    }\n  }\n\n  submitToTarget(target: string, values: object) {\n    const scoped = this.context as IScopedContext;\n    scoped.send(target, values);\n  }\n\n  reloadTarget(target: string, data: any) {\n    const scoped = this.context as IScopedContext;\n    scoped.reload(target, data);\n  }\n\n  closeTarget(target: string) {\n    const scoped = this.context as IScopedContext;\n    scoped.close(target);\n  }\n\n  reload(target?: string, query?: any, ctx?: any, silent?: boolean) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const scoped = this.context as IScopedContext;\n    let subPath: string = '';\n    let idx: number;\n    let subQuery: any = null;\n    if (target && ~(idx = target.indexOf('.'))) {\n      subPath = target.substring(idx + 1);\n      target = target.substring(0, idx);\n    }\n    const idx2 = target ? target.indexOf('?') : -1;\n    if (~idx2) {\n      subQuery = dataMapping(\n        qs.parse((target as string).substring(idx2 + 1)),\n        ctx\n      );\n      target = (target as string).substring(0, idx2);\n    }\n\n    let component;\n    if (\n      target &&\n      (component = scoped.getComponentByName(target)) &&\n      component.reload\n    ) {\n      component.reload(subPath, subQuery, ctx);\n    } else if (target === '*') {\n      super.reload(target, query, ctx, silent);\n      const components = scoped.getComponents();\n      components.forEach(\n        (component: any) =>\n          component.reload && component.reload('', subQuery, ctx)\n      );\n    } else {\n      super.reload(target, query, ctx, silent);\n    }\n  }\n\n  receive(values: object, name?: string) {\n    if (name) {\n      const scoped = this.context as IScopedContext;\n      const idx = name.indexOf('.');\n      let subPath = '';\n\n      if (~idx) {\n        subPath = name.substring(1 + idx);\n        name = name.substring(0, idx);\n      }\n\n      const component = scoped.getComponentByName(name);\n      component && component.receive && component.receive(values, subPath);\n      return;\n    }\n\n    return super.receive(values);\n  }\n}\n"
    ]
}