{
    "version": 3,
    "file": "index.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Table/index.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {findDOMNode} from 'react-dom';\nimport {Renderer, RendererProps} from '../../factory';\nimport {SchemaNode, Action, Schema} from '../../types';\nimport forEach from 'lodash/forEach';\nimport {filter} from '../../utils/tpl';\nimport DropDownButton from '../DropDownButton';\nimport Checkbox from '../../components/Checkbox';\nimport Button from '../../components/Button';\nimport {TableStore, ITableStore, IColumn, IRow} from '../../store/table';\nimport {\n  anyChanged,\n  getScrollParent,\n  difference,\n  noop,\n  autobind,\n  isArrayChildrenModified\n} from '../../utils/helper';\nimport {resolveVariable} from '../../utils/tpl-builtin';\nimport debounce from 'lodash/debounce';\nimport Sortable from 'sortablejs';\nimport {resizeSensor} from '../../utils/resize-sensor';\nimport find from 'lodash/find';\nimport {Icon} from '../../components/icons';\nimport {TableCell} from './TableCell';\nimport {TableRow} from './TableRow';\nimport {HeadCellFilterDropDown} from './HeadCellFilterDropdown';\nimport {HeadCellSearchDropDown} from './HeadCellSearchDropdown';\nimport {TableContent} from './TableContent';\nimport {\n  BaseSchema,\n  SchemaClassName,\n  SchemaObject,\n  SchemaTokenizeableString,\n  SchemaType\n} from '../../Schema';\nimport {FormControlSchema, FormControlType} from '../Form/Item';\nimport {SchemaPopOver} from '../PopOver';\nimport {SchemaQuickEdit} from '../QuickEdit';\nimport {SchemaCopyable} from '../Copyable';\nimport {SchemaRemark} from '../Remark';\nimport {toDataURL, getImageDimensions} from '../../utils/image';\n\n/**\n * 表格列，不指定类型时默认为文本类型。\n */\nexport type TableColumnObject = {\n  /**\n   * 列标题\n   */\n  label: string;\n\n  /**\n   * 配置是否固定当前列\n   */\n  fixed?: 'left' | 'right' | 'none';\n\n  /**\n   * 绑定字段名\n   */\n  name?: string;\n\n  /**\n   * 配置查看详情功能\n   */\n  popOver?: SchemaPopOver;\n\n  /**\n   * 配置快速编辑功能\n   */\n  quickEdit?: SchemaQuickEdit;\n\n  /**\n   * 作为表单项时，可以单独配置编辑时的快速编辑面板。\n   */\n  quickEditOnUpdate?: SchemaQuickEdit;\n\n  /**\n   * 配置点击复制功能\n   */\n  copyable?: SchemaCopyable;\n\n  /**\n   * 配置是否可以排序\n   */\n  sortable?: boolean;\n\n  /**\n   * 是否可快速搜索\n   */\n  searchable?: boolean;\n\n  /**\n   * 配置是否默认展示\n   */\n  toggled?: boolean;\n\n  /**\n   * 列宽度\n   */\n  width?: number | string;\n\n  /**\n   * todo\n   */\n  filterable?: any;\n\n  /**\n   * 结合表格的 footable 一起使用。\n   * 填写 *、xs、sm、md、lg指定 footable 的触发条件，可以填写多个用空格隔开\n   */\n  breakpoint?: '*' | 'xs' | 'sm' | 'md' | 'lg';\n\n  /**\n   * 提示信息\n   */\n  remark?: SchemaRemark;\n};\n\nexport type TableColumnWithType = SchemaObject & TableColumnObject;\nexport type TableColumn = TableColumnWithType | TableColumnObject;\n\n/**\n * Table 表格渲染器。\n * 文档：https://baidu.gitee.io/amis/docs/components/table\n */\nexport interface TableSchema extends BaseSchema {\n  /**\n   * 指定为表格渲染器。\n   */\n  type: 'table' | 'static-table';\n\n  /**\n   * 是否固定表头\n   */\n  affixHeader?: boolean;\n\n  /**\n   * 表格的列信息\n   */\n  columns?: Array<TableColumn>;\n\n  /**\n   * 展示列显示开关，自动即：列数量大于或等于5个时自动开启\n   */\n  columnsTogglable?: boolean | 'auto';\n\n  /**\n   * 是否开启底部展示功能，适合移动端展示\n   */\n  footable?:\n    | boolean\n    | {\n        expand?: 'first' | 'all' | 'none';\n\n        /**\n         * 是否为手风琴模式\n         */\n        accordion?: boolean;\n      };\n\n  /**\n   * 底部外层 CSS 类名\n   */\n  footerClassName?: SchemaClassName;\n\n  /**\n   * 顶部外层 CSS 类名\n   */\n  headerClassName?: SchemaClassName;\n\n  /**\n   * 占位符\n   */\n  placeholder?: string;\n\n  /**\n   * 是否显示底部\n   */\n  showFooter?: boolean;\n\n  /**\n   * 是否显示头部\n   */\n  showHeader?: boolean;\n\n  /**\n   * 数据源：绑定当前环境变量\n   */\n  source?: SchemaTokenizeableString;\n\n  /**\n   * 表格 CSS 类名\n   */\n  tableClassName?: SchemaClassName;\n\n  /**\n   * 标题\n   */\n  title?: string;\n\n  /**\n   * 工具栏 CSS 类名\n   */\n  toolbarClassName?: SchemaClassName;\n\n  /**\n   * 合并单元格配置，配置数字表示从左到右的多少列自动合并单元格。\n   */\n  combineNum?: number;\n}\n\nexport interface TableProps extends RendererProps {\n  title?: string; // 标题\n  header?: SchemaNode;\n  footer?: SchemaNode;\n  actions?: Action[];\n  className?: string;\n  headerClassName?: string;\n  footerClassName?: string;\n  store: ITableStore;\n  columns?: Array<TableColumn>;\n  headingClassName?: string;\n  toolbarClassName?: string;\n  headerToolbarClassName?: string;\n  footerToolbarClassName?: string;\n  tableClassName?: string;\n  source?: string;\n  selectable?: boolean;\n  selected?: Array<any>;\n  valueField?: string;\n  draggable?: boolean;\n  columnsTogglable?: boolean | 'auto';\n  affixHeader?: boolean;\n  affixColumns?: boolean;\n  combineNum?: number;\n  footable?:\n    | boolean\n    | {\n        expand?: 'first' | 'all' | 'none';\n        expandAll?: boolean;\n        accordion?: boolean;\n      };\n  expandConfig?: {\n    expand?: 'first' | 'all' | 'none';\n    expandAll?: boolean;\n    accordion?: boolean;\n  };\n  itemCheckableOn?: string;\n  itemDraggableOn?: string;\n  itemActions?: Array<Action>;\n  onSelect: (\n    selectedItems: Array<object>,\n    unSelectedItems: Array<object>\n  ) => void;\n  onSave?: (\n    items: Array<object> | object,\n    diff: Array<object> | object,\n    rowIndexes: Array<number> | number,\n    unModifiedItems?: Array<object>,\n    rowOrigins?: Array<object> | object,\n    resetOnFailed?: boolean\n  ) => void;\n  onSaveOrder?: (moved: Array<object>, items: Array<object>) => void;\n  onQuery: (values: object) => void;\n  onImageEnlarge?: (data: any, target: any) => void;\n  buildItemProps?: (item: any, index: number) => any;\n  checkOnItemClick?: boolean;\n  hideCheckToggler?: boolean;\n  rowClassName?: string;\n  rowClassNameExpr?: string;\n  popOverContainer?: any;\n  canAccessSuperData?: boolean;\n}\n\n/**\n * 将 url 转成绝对地址\n */\nconst getAbsoluteUrl = (function () {\n  let link: HTMLAnchorElement;\n  return function (url: string) {\n    if (!link) link = document.createElement('a');\n    link.href = url;\n    return link.href;\n  };\n})();\n\nexport default class Table extends React.Component<TableProps, object> {\n  static propsList: Array<string> = [\n    'header',\n    'headerToolbarRender',\n    'footer',\n    'footerToolbarRender',\n    'footable',\n    'expandConfig',\n    'placeholder',\n    'tableClassName',\n    'headingClassName',\n    'source',\n    'selectable',\n    'columnsTogglable',\n    'affixHeader',\n    'affixColumns',\n    'headerClassName',\n    'footerClassName',\n    'selected',\n    'multiple',\n    'primaryField',\n    'hideQuickSaveBtn',\n    'itemCheckableOn',\n    'itemDraggableOn',\n    'checkOnItemClick',\n    'hideCheckToggler',\n    'itemActions',\n    'combineNum',\n    'items',\n    'columns',\n    'valueField',\n    'saveImmediately',\n    'rowClassName',\n    'rowClassNameExpr',\n    'popOverContainer',\n    'headerToolbarClassName',\n    'toolbarClassName',\n    'footerToolbarClassName'\n  ];\n  static defaultProps: Partial<TableProps> = {\n    className: '',\n    placeholder: '暂无数据',\n    tableClassName: '',\n    source: '$items',\n    selectable: false,\n    columnsTogglable: 'auto',\n    affixHeader: true,\n    headerClassName: '',\n    footerClassName: '',\n    toolbarClassName: '',\n    headerToolbarClassName: '',\n    footerToolbarClassName: '',\n    primaryField: 'id',\n    itemCheckableOn: '',\n    itemDraggableOn: '',\n    hideCheckToggler: false,\n    canAccessSuperData: false\n  };\n\n  table?: HTMLTableElement;\n  sortable?: Sortable;\n  dragTip?: HTMLElement;\n  affixedTable?: HTMLTableElement;\n  parentNode?: HTMLElement | Window;\n  lastScrollLeft: number = -1;\n  totalWidth: number = 0;\n  totalHeight: number = 0;\n  outterWidth: number = 0;\n  outterHeight: number = 0;\n  unSensor?: Function;\n  updateTableInfoLazy: () => void;\n  widths: {\n    [propName: string]: number;\n  } = {};\n  heights: {\n    [propName: string]: number;\n  } = {};\n  renderedToolbars: Array<string> = [];\n  subForms: any = {};\n\n  constructor(props: TableProps) {\n    super(props);\n\n    this.handleOutterScroll = this.handleOutterScroll.bind(this);\n    this.affixDetect = this.affixDetect.bind(this);\n    this.updateTableInfoLazy = debounce(this.updateTableInfo.bind(this), 250, {\n      trailing: true,\n      leading: true\n    });\n    this.tableRef = this.tableRef.bind(this);\n    this.affixedTableRef = this.affixedTableRef.bind(this);\n    this.handleAction = this.handleAction.bind(this);\n    this.handleCheck = this.handleCheck.bind(this);\n    this.handleCheckAll = this.handleCheckAll.bind(this);\n    this.handleQuickChange = this.handleQuickChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleSaveOrder = this.handleSaveOrder.bind(this);\n    this.reset = this.reset.bind(this);\n    this.dragTipRef = this.dragTipRef.bind(this);\n    this.getPopOverContainer = this.getPopOverContainer.bind(this);\n    this.renderCell = this.renderCell.bind(this);\n    this.renderHeadCell = this.renderHeadCell.bind(this);\n    this.renderToolbar = this.renderToolbar.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.subFormRef = this.subFormRef.bind(this);\n  }\n\n  static syncRows(\n    store: ITableStore,\n    props: TableProps,\n    prevProps?: TableProps\n  ) {\n    const source = props.source;\n    const value = props.value || props.items;\n    let rows: Array<object> = [];\n    let updateRows = true;\n\n    if (Array.isArray(value)) {\n      rows = value;\n    } else if (typeof source === 'string') {\n      const resolved = resolveVariable(source, props.data);\n      const prev = prevProps ? resolveVariable(source, prevProps.data) : null;\n\n      if (prev && prev === resolved) {\n        updateRows = false;\n      } else if (Array.isArray(resolved)) {\n        rows = resolved;\n      }\n    }\n\n    updateRows && store.initRows(rows, props.getEntryId);\n    typeof props.selected !== 'undefined' &&\n      store.updateSelected(props.selected, props.valueField);\n  }\n\n  componentWillMount() {\n    const {\n      store,\n      columns,\n      selectable,\n      columnsTogglable,\n      draggable,\n      orderBy,\n      orderDir,\n      multiple,\n      footable,\n      primaryField,\n      itemCheckableOn,\n      itemDraggableOn,\n      hideCheckToggler,\n      combineNum,\n      expandConfig\n    } = this.props;\n\n    store.update({\n      selectable,\n      draggable,\n      columns,\n      columnsTogglable,\n      orderBy,\n      orderDir,\n      multiple,\n      footable,\n      expandConfig,\n      primaryField,\n      itemCheckableOn,\n      itemDraggableOn,\n      hideCheckToggler,\n      combineNum\n    });\n\n    Table.syncRows(store, this.props);\n    this.syncSelected();\n  }\n\n  componentDidMount() {\n    let parent: HTMLElement | Window | null = getScrollParent(\n      findDOMNode(this) as HTMLElement\n    );\n\n    if (!parent || parent === document.body) {\n      parent = window;\n    }\n\n    this.parentNode = parent;\n    this.updateTableInfo();\n\n    const dom = findDOMNode(this) as HTMLElement;\n    if (dom.closest('.modal-body')) {\n      return;\n    }\n\n    this.affixDetect();\n    parent.addEventListener('scroll', this.affixDetect);\n    window.addEventListener('resize', this.affixDetect);\n  }\n\n  componentWillReceiveProps(nextProps: TableProps) {\n    const props = this.props;\n    const store = nextProps.store;\n\n    if (\n      anyChanged(\n        [\n          'selectable',\n          'columnsTogglable',\n          'draggable',\n          'orderBy',\n          'orderDir',\n          'multiple',\n          'footable',\n          'primaryField',\n          'itemCheckableOn',\n          'itemDraggableOn',\n          'hideCheckToggler',\n          'combineNum',\n          'expandConfig'\n        ],\n        props,\n        nextProps\n      )\n    ) {\n      store.update({\n        selectable: nextProps.selectable,\n        columnsTogglable: nextProps.columnsTogglable,\n        draggable: nextProps.draggable,\n        orderBy: nextProps.orderBy,\n        orderDir: nextProps.orderDir,\n        multiple: nextProps.multiple,\n        primaryField: nextProps.primaryField,\n        footable: nextProps.footable,\n        itemCheckableOn: nextProps.itemCheckableOn,\n        itemDraggableOn: nextProps.itemDraggableOn,\n        hideCheckToggler: nextProps.hideCheckToggler,\n        combineNum: nextProps.combineNum,\n        expandConfig: nextProps.expandConfig\n      });\n    }\n\n    if (props.columns !== nextProps.columns) {\n      store.update({\n        columns: nextProps.columns\n      });\n    }\n\n    if (\n      anyChanged(['source', 'value', 'items'], props, nextProps) ||\n      (!nextProps.value && !nextProps.items && nextProps.data !== props.data)\n    ) {\n      Table.syncRows(store, nextProps, props);\n      this.syncSelected();\n    } else if (isArrayChildrenModified(props.selected!, nextProps.selected!)) {\n      store.updateSelected(nextProps.selected || [], nextProps.valueField);\n      this.syncSelected();\n    }\n  }\n\n  componentDidUpdate() {\n    this.updateTableInfoLazy();\n  }\n\n  componentWillUnmount() {\n    const parent = this.parentNode;\n    parent && parent.removeEventListener('scroll', this.affixDetect);\n    window.removeEventListener('resize', this.affixDetect);\n    (this.updateTableInfoLazy as any).cancel();\n    this.unSensor && this.unSensor();\n  }\n\n  subFormRef(form: any, x: number, y: number) {\n    const {quickEditFormRef} = this.props;\n\n    quickEditFormRef && quickEditFormRef(form, x, y);\n    this.subForms[`${x}-${y}`] = form;\n  }\n\n  handleAction(e: React.UIEvent<any>, action: Action, ctx: object) {\n    const {onAction} = this.props;\n\n    // todo\n    onAction(e, action, ctx);\n  }\n\n  handleCheck(item: IRow) {\n    item.toggle();\n    this.syncSelected();\n  }\n\n  handleCheckAll() {\n    const {store} = this.props;\n\n    store.toggleAll();\n    this.syncSelected();\n  }\n\n  handleQuickChange(\n    item: IRow,\n    values: object,\n    saveImmediately?: boolean | any,\n    savePristine?: boolean,\n    resetOnFailed?: boolean\n  ) {\n    const {\n      onSave,\n      saveImmediately: propsSaveImmediately,\n      primaryField\n    } = this.props;\n\n    item.change(values, savePristine);\n\n    // 值发生变化了，需要通过 onSelect 通知到外面，否则会出现数据不同步的问题\n    item.modified && this.syncSelected();\n\n    if ((!saveImmediately && !propsSaveImmediately) || savePristine) {\n      return;\n    }\n\n    if (saveImmediately && saveImmediately.api) {\n      this.props.onAction(\n        null,\n        {\n          actionType: 'ajax',\n          api: saveImmediately.api\n        },\n        values\n      );\n      return;\n    }\n\n    if (!onSave) {\n      return;\n    }\n\n    onSave(\n      item.data,\n      difference(item.data, item.pristine, ['id', primaryField]),\n      item.index,\n      undefined,\n      item.pristine,\n      resetOnFailed\n    );\n  }\n\n  async handleSave() {\n    const {store, onSave, primaryField} = this.props;\n\n    if (!onSave || !store.modifiedRows.length) {\n      return;\n    }\n\n    // 验证所有表单项，没有错误才继续\n    const subForms: Array<any> = [];\n    Object.keys(this.subForms).forEach(\n      key => this.subForms[key] && subForms.push(this.subForms[key])\n    );\n    if (subForms.length) {\n      const result = await Promise.all(subForms.map(item => item.validate()));\n      if (~result.indexOf(false)) {\n        return;\n      }\n    }\n\n    const rows = store.modifiedRows.map(item => item.data);\n    const rowIndexes = store.modifiedRows.map(item => item.index);\n    const diff = store.modifiedRows.map(item =>\n      difference(item.data, item.pristine, ['id', primaryField])\n    );\n    const unModifiedRows = store.rows\n      .filter(item => !item.modified)\n      .map(item => item.data);\n    onSave(\n      rows,\n      diff,\n      rowIndexes,\n      unModifiedRows,\n      store.modifiedRows.map(item => item.pristine)\n    );\n  }\n\n  handleSaveOrder() {\n    const {store, onSaveOrder} = this.props;\n\n    if (!onSaveOrder || !store.movedRows.length) {\n      return;\n    }\n\n    onSaveOrder(\n      store.movedRows.map(item => item.data),\n      store.rows.map(item => item.getDataWithModifiedChilden())\n    );\n  }\n\n  syncSelected() {\n    const {store, onSelect} = this.props;\n\n    onSelect &&\n      onSelect(\n        store.selectedRows.map(item => item.data),\n        store.unSelectedRows.map(item => item.data)\n      );\n  }\n\n  reset() {\n    const {store} = this.props;\n\n    store.reset();\n\n    const subForms: Array<any> = [];\n    Object.keys(this.subForms).forEach(\n      key => this.subForms[key] && subForms.push(this.subForms[key])\n    );\n    subForms.forEach(item => item.clearErrors());\n  }\n\n  bulkUpdate(value: any, items: Array<object>) {\n    const {store, primaryField} = this.props;\n\n    if (primaryField && value.ids) {\n      const ids = value.ids.split(',');\n      const rows = store.rows.filter(item =>\n        find(ids, (id: any) => id && id == item.data[primaryField])\n      );\n      const newValue = {...value, ids: undefined};\n      rows.forEach(row => row.change(newValue));\n    } else {\n      const rows = store.rows.filter(item => ~items.indexOf(item.pristine));\n      rows.forEach(row => row.change(value));\n    }\n  }\n\n  getSelected() {\n    const {store} = this.props;\n\n    return store.selectedRows.map(item => item.data);\n  }\n\n  affixDetect() {\n    if (!this.props.affixHeader || !this.table) {\n      return;\n    }\n\n    const ns = this.props.classPrefix;\n    const dom = findDOMNode(this) as HTMLElement;\n    const clip = (this.table as HTMLElement).getBoundingClientRect();\n    const offsetY =\n      this.props.affixOffsetTop ?? this.props.env.affixOffsetTop ?? 0;\n    const affixed = clip.top < offsetY && clip.top + clip.height - 40 > offsetY;\n    const affixedDom = dom.querySelector(`.${ns}Table-fixedTop`) as HTMLElement;\n\n    affixedDom.style.cssText += `top: ${offsetY}px;width: ${\n      (this.table.parentNode as HTMLElement).offsetWidth\n    }px`;\n    affixed\n      ? affixedDom.classList.add('in')\n      : affixedDom.classList.remove('in');\n    // store.markHeaderAffix(clip.top < offsetY && (clip.top + clip.height - 40) > offsetY);\n  }\n\n  updateTableInfo() {\n    if (!this.table) {\n      return;\n    }\n\n    const table = this.table;\n    const outter = table.parentNode as HTMLElement;\n    const affixHeader = this.props.affixHeader;\n    const ns = this.props.classPrefix;\n\n    // 完成宽高都没有变化就直接跳过了。\n    // if (this.totalWidth === table.scrollWidth && this.totalHeight === table.scrollHeight) {\n    //     return;\n    // }\n\n    this.totalWidth = table.scrollWidth;\n    this.totalHeight = table.scrollHeight;\n    this.outterWidth = outter.offsetWidth;\n    this.outterHeight = outter.offsetHeight;\n\n    let widths: {\n      [propName: string]: number;\n    } = (this.widths = {});\n    let heights: {\n      [propName: string]: number;\n    } = (this.heights = {});\n\n    heights.header ||\n      (heights.header = table.querySelector('thead')!.offsetHeight);\n\n    forEach(\n      table.querySelectorAll('thead>tr:last-child>th'),\n      (item: HTMLElement) => {\n        widths[item.getAttribute('data-index') as string] = item.offsetWidth;\n      }\n    );\n    forEach(\n      table.querySelectorAll('tbody>tr>*:last-child'),\n      (item: HTMLElement, index: number) => (heights[index] = item.offsetHeight)\n    );\n\n    // 让 react 去更新非常慢，还是手动更新吧。\n    const dom = findDOMNode(this) as HTMLElement;\n\n    forEach(\n      dom.querySelectorAll(`.${ns}Table-fixedLeft, .${ns}Table-fixedRight`),\n      (item: HTMLElement) =>\n        item.parentNode === dom &&\n        (item.style.cssText += `height:${this.totalHeight}px;`)\n    );\n\n    if (affixHeader) {\n      (dom.querySelector(\n        `.${ns}Table-fixedTop>.${ns}Table-wrapper`\n      ) as HTMLElement).style.cssText += `width: ${this.outterWidth}px`;\n      let affixedTable = dom.querySelector(\n        `.${ns}Table-wrapper table`\n      ) as HTMLElement;\n      affixedTable.style.cssText += `width: ${this.totalWidth}px`;\n    }\n\n    forEach(\n      dom.querySelectorAll(\n        `.${ns}Table-fixedTop table, .${ns}Table-fixedLeft table, .${ns}Table-fixedRight table`\n      ),\n      (table: HTMLTableElement) => {\n        let totalWidth = 0;\n\n        forEach(\n          table.querySelectorAll('thead>tr:last-child>th'),\n          (item: HTMLElement) => {\n            const width = this.widths[\n              parseInt(item.getAttribute('data-index') as string, 10)\n            ];\n\n            const style = getComputedStyle(item);\n            const borderWidth =\n              (parseInt(style.getPropertyValue('border-left-width'), 10) || 0) +\n              (parseInt(style.getPropertyValue('border-right-width'), 10) || 0);\n\n            item.style.cssText += `width: ${width - borderWidth}px`;\n            totalWidth += width;\n          }\n        );\n\n        forEach(\n          table.querySelectorAll('tbody>tr'),\n          (item: HTMLElement, index) => {\n            item.style.cssText += `height: ${this.heights[index]}px`;\n          }\n        );\n\n        table.style.cssText += `width: ${totalWidth}px;table-layout: fixed;`;\n      }\n    );\n\n    this.lastScrollLeft = -1;\n    this.handleOutterScroll();\n  }\n\n  handleOutterScroll() {\n    const outter = (this.table as HTMLElement).parentNode as HTMLElement;\n    const scrollLeft = outter.scrollLeft;\n\n    if (scrollLeft === this.lastScrollLeft) {\n      return;\n    }\n\n    this.lastScrollLeft = scrollLeft;\n    let leading = scrollLeft === 0;\n    let trailing = Math.ceil(scrollLeft) + this.outterWidth >= this.totalWidth;\n    // console.log(scrollLeft, store.outterWidth, store.totalWidth, (scrollLeft + store.outterWidth) === store.totalWidth);\n    // store.setLeading(leading);\n    // store.setTrailing(trailing);\n\n    const ns = this.props.classPrefix;\n    const dom = findDOMNode(this) as HTMLElement;\n\n    const fixedLeft = dom.querySelectorAll(`.${ns}Table-fixedLeft`);\n    if (fixedLeft && fixedLeft.length) {\n      for (let i = 0, len = fixedLeft.length; i < len; i++) {\n        let node = fixedLeft[i];\n        leading ? node.classList.remove('in') : node.classList.add('in');\n      }\n    }\n\n    const fixedRight = dom.querySelectorAll(`.${ns}Table-fixedRight`);\n    if (fixedRight && fixedRight.length) {\n      for (let i = 0, len = fixedRight.length; i < len; i++) {\n        let node = fixedRight[i];\n        trailing ? node.classList.remove('in') : node.classList.add('in');\n      }\n    }\n    const table = this.affixedTable;\n    if (table) {\n      table.style.cssText += `transform: translateX(-${scrollLeft}px)`;\n    }\n  }\n\n  tableRef(ref: HTMLTableElement) {\n    this.table = ref;\n\n    if (ref) {\n      this.unSensor = resizeSensor(\n        ref.parentNode as HTMLElement,\n        this.updateTableInfoLazy\n      );\n    } else {\n      this.unSensor && this.unSensor();\n      delete this.unSensor;\n    }\n  }\n\n  dragTipRef(ref: any) {\n    if (!this.dragTip && ref) {\n      this.initDragging();\n    } else if (this.dragTip && !ref) {\n      this.destroyDragging();\n    }\n\n    this.dragTip = ref;\n  }\n\n  affixedTableRef(ref: HTMLTableElement) {\n    this.affixedTable = ref;\n  }\n\n  initDragging() {\n    const store = this.props.store;\n    const ns = this.props.classPrefix;\n    this.sortable = new Sortable(\n      (this.table as HTMLElement).querySelector('tbody') as HTMLElement,\n      {\n        group: 'table',\n        animation: 150,\n        handle: `.${ns}Table-dragCell`,\n        ghostClass: 'is-dragging',\n        onEnd: (e: any) => {\n          // 没有移动\n          if (e.newIndex === e.oldIndex) {\n            return;\n          }\n\n          const parent = e.to as HTMLElement;\n          if (e.oldIndex < parent.childNodes.length - 1) {\n            parent.insertBefore(e.item, parent.childNodes[e.oldIndex]);\n          } else {\n            parent.appendChild(e.item);\n          }\n\n          store.exchange(e.oldIndex, e.newIndex);\n        }\n      }\n    );\n  }\n\n  destroyDragging() {\n    this.sortable && this.sortable.destroy();\n  }\n\n  getPopOverContainer() {\n    return findDOMNode(this);\n  }\n\n  handleMouseMove(e: React.MouseEvent<any>) {\n    const tr: HTMLElement = (e.target as HTMLElement).closest(\n      'tr[data-index]'\n    ) as HTMLElement;\n\n    if (\n      !tr ||\n      !this.props.itemActions ||\n      !this.props.itemActions.filter(item => !item.hiddenOnHover).length\n    ) {\n      return;\n    }\n\n    const store = this.props.store;\n    const index = parseInt(tr.getAttribute('data-index') as string, 10);\n    if (store.hoverIndex !== index) {\n      store.rows.forEach((item, key) => item.setIsHover(index === key));\n    }\n  }\n\n  handleMouseLeave() {\n    const store = this.props.store;\n\n    if (~store.hoverIndex) {\n      store.rows[store.hoverIndex].setIsHover(false);\n    }\n  }\n\n  draggingTr: HTMLTableRowElement;\n  originIndex: number;\n  draggingSibling: Array<HTMLTableRowElement>;\n\n  @autobind\n  handleDragStart(e: React.DragEvent) {\n    const store = this.props.store;\n    const target = e.currentTarget;\n    const tr = (this.draggingTr = target.closest('tr')!);\n    const id = tr.getAttribute('data-id')!;\n    const tbody = tr.parentNode!;\n    this.originIndex = Array.prototype.indexOf.call(tbody.childNodes, tr);\n\n    tr.classList.add('is-dragging');\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', id);\n\n    e.dataTransfer.setDragImage(tr, 0, 0);\n    const item = store.getRowById(id)!;\n    store.collapseAllAtDepth(item.depth);\n\n    let siblings: Array<IRow> = store.rows;\n    if (item.parentId) {\n      const parent = store.getRowById(item.parentId)!;\n      siblings = parent.children as any;\n    }\n    siblings = siblings.filter(sibling => sibling !== item);\n\n    tbody.addEventListener('dragover', this.handleDragOver);\n    tbody.addEventListener('drop', this.handleDrop);\n\n    this.draggingSibling = siblings.map(item => {\n      let tr: HTMLTableRowElement = tbody.querySelector(\n        `tr[data-id=\"${item.id}\"]`\n      ) as HTMLTableRowElement;\n\n      tr.classList.add('is-drop-allowed');\n\n      return tr;\n    });\n    tr.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  @autobind\n  handleDragOver(e: any) {\n    if (!e.target) {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer!.dropEffect = 'move';\n\n    const overTr: HTMLElement = (e.target as HTMLElement).closest('tr')!;\n    if (\n      !overTr ||\n      !~overTr.className.indexOf('is-drop-allowed') ||\n      overTr === this.draggingTr\n    ) {\n      return;\n    }\n\n    const tbody = overTr.parentElement!;\n    const dRect = this.draggingTr.getBoundingClientRect();\n    const tRect = overTr.getBoundingClientRect();\n    let ratio = dRect.top < tRect.top ? 0.1 : 0.9;\n\n    const next = (e.clientY - tRect.top) / (tRect.bottom - tRect.top) > ratio;\n    tbody.insertBefore(this.draggingTr, (next && overTr.nextSibling) || overTr);\n  }\n\n  @autobind\n  handleDrop() {\n    const store = this.props.store;\n    const tr = this.draggingTr;\n    const tbody = tr.parentElement!;\n    const index = Array.prototype.indexOf.call(tbody.childNodes, tr);\n    const item: IRow = store.getRowById(tr.getAttribute('data-id')!) as any;\n\n    // destroy\n    this.handleDragEnd();\n\n    store.exchange(this.originIndex, index, item);\n  }\n\n  @autobind\n  handleDragEnd() {\n    const tr = this.draggingTr;\n    const tbody = tr.parentElement!;\n    const index = Array.prototype.indexOf.call(tbody.childNodes, tr);\n    tbody.insertBefore(\n      tr,\n      tbody.childNodes[\n        index < this.originIndex ? this.originIndex + 1 : this.originIndex\n      ]\n    );\n\n    tr.classList.remove('is-dragging');\n    tr.removeEventListener('dragend', this.handleDragEnd);\n    tbody.removeEventListener('dragover', this.handleDragOver);\n    tbody.removeEventListener('drop', this.handleDrop);\n    this.draggingSibling.forEach(item =>\n      item.classList.remove('is-drop-allowed')\n    );\n  }\n\n  @autobind\n  handleImageEnlarge(info: any, target: {rowIndex: number; colIndex: number}) {\n    const onImageEnlarge = this.props.onImageEnlarge;\n\n    // 如果已经是多张了，直接跳过\n    if (Array.isArray(info.list)) {\n      return onImageEnlarge && onImageEnlarge(info, target);\n    }\n\n    // 从列表中收集所有图片，然后作为一个图片集合派送出去。\n    const store = this.props.store;\n    const column = store.filteredColumns[target.colIndex].pristine;\n\n    let index = target.rowIndex;\n    const list: Array<any> = [];\n    store.rows.forEach((row, i) => {\n      const src = resolveVariable(column.name, row.data);\n\n      if (!src) {\n        if (i < target.rowIndex) {\n          index--;\n        }\n        return;\n      }\n\n      list.push({\n        src,\n        originalSrc: column.originalSrc\n          ? filter(column.originalSrc, row.data)\n          : src,\n        title: column.enlargeTitle\n          ? filter(column.enlargeTitle, row.data)\n          : column.title\n          ? filter(column.title, row.data)\n          : undefined,\n        caption: column.enlargeCaption\n          ? filter(column.enlargeCaption, row.data)\n          : column.caption\n          ? filter(column.caption, row.data)\n          : undefined\n      });\n    });\n\n    if (list.length > 1) {\n      onImageEnlarge &&\n        onImageEnlarge(\n          {\n            ...info,\n            list,\n            index\n          },\n          target\n        );\n    } else {\n      onImageEnlarge && onImageEnlarge(info, target);\n    }\n  }\n\n  renderHeading() {\n    let {\n      title,\n      store,\n      hideQuickSaveBtn,\n      data,\n      classnames: cx,\n      saveImmediately,\n      headingClassName,\n      translate: __\n    } = this.props;\n\n    if (\n      title ||\n      (!saveImmediately && store.modified && !hideQuickSaveBtn) ||\n      store.moved\n    ) {\n      return (\n        <div className={cx('Table-heading', headingClassName)} key=\"heading\">\n          {!saveImmediately && store.modified && !hideQuickSaveBtn ? (\n            <span>\n              {__(\n                '当前有 {{modified}} 条记录修改了内容, 但并没有提交。请选择:',\n                {\n                  modified: store.modified\n                }\n              )}\n              <button\n                type=\"button\"\n                className={cx('Button Button--xs Button--success m-l-sm')}\n                onClick={this.handleSave}\n              >\n                <Icon icon=\"check\" className=\"icon m-r-xs\" />\n                {__('提交')}\n              </button>\n              <button\n                type=\"button\"\n                className={cx('Button Button--xs Button--danger m-l-sm')}\n                onClick={this.reset}\n              >\n                <Icon icon=\"close\" className=\"icon m-r-xs\" />\n                {__('放弃')}\n              </button>\n            </span>\n          ) : store.moved ? (\n            <span>\n              {__('当前有 {{moved}} 条记录修改了顺序, 但并没有提交。请选择:', {\n                moved: store.moved\n              })}\n              <button\n                type=\"button\"\n                className={cx('Button Button--xs Button--success m-l-sm')}\n                onClick={this.handleSaveOrder}\n              >\n                <Icon icon=\"check\" className=\"icon m-r-xs\" />\n                {__('提交')}\n              </button>\n              <button\n                type=\"button\"\n                className={cx('Button Button--xs Button--danger m-l-sm')}\n                onClick={this.reset}\n              >\n                <Icon icon=\"close\" className=\"icon m-r-xs\" />\n                {__('放弃')}\n              </button>\n            </span>\n          ) : title ? (\n            filter(title, data)\n          ) : (\n            ''\n          )}\n        </div>\n      );\n    }\n\n    return null;\n  }\n\n  renderHeadCell(column: IColumn, props?: any) {\n    const {\n      store,\n      query,\n      onQuery,\n      multiple,\n      env,\n      render,\n      classPrefix: ns,\n      classnames: cx\n    } = this.props;\n\n    if (column.type === '__checkme') {\n      return (\n        <th {...props} className={cx(column.pristine.className)}>\n          {store.rows.length && multiple ? (\n            <Checkbox\n              classPrefix={ns}\n              partial={!store.allChecked}\n              checked={store.someChecked}\n              onChange={this.handleCheckAll}\n            />\n          ) : (\n            '\\u00A0'\n          )}\n        </th>\n      );\n    } else if (column.type === '__dragme') {\n      return <th {...props} className={cx(column.pristine.className)} />;\n    } else if (column.type === '__expandme') {\n      return (\n        <th {...props} className={cx(column.pristine.className)}>\n          {(store.footable &&\n            (store.footable.expandAll === false || store.footable.accordion)) ||\n          (store.expandConfig &&\n            (store.expandConfig.expandAll === false ||\n              store.expandConfig.accordion)) ? null : (\n            <a\n              className={cx(\n                'Table-expandBtn',\n                store.allExpanded ? 'is-active' : ''\n              )}\n              // data-tooltip=\"展开/收起全部\"\n              // data-position=\"top\"\n              onClick={store.toggleExpandAll}\n            >\n              <Icon icon=\"right-arrow-bold\" className=\"icon\" />\n            </a>\n          )}\n        </th>\n      );\n    }\n\n    let affix = null;\n\n    if (column.searchable && column.name) {\n      affix = (\n        <HeadCellSearchDropDown\n          {...this.props}\n          onQuery={onQuery}\n          name={column.name}\n          searchable={column.searchable}\n          sortable={column.sortable}\n          type={column.type}\n          data={query}\n          orderBy={store.orderBy}\n          orderDir={store.orderDir}\n          popOverContainer={this.getPopOverContainer}\n        />\n      );\n    } else if (column.sortable && column.name) {\n      affix = (\n        <span\n          className={cx('TableCell-sortBtn')}\n          onClick={() => {\n            if (column.name === store.orderBy) {\n              if (store.orderDir === 'desc') {\n                // 降序之后取消排序\n                store.setOrderByInfo('', 'asc');\n              } else {\n                // 升序之后降序\n                store.setOrderByInfo(column.name, 'desc');\n              }\n            } else {\n              store.setOrderByInfo(column.name as string, 'asc');\n            }\n\n            onQuery &&\n              onQuery({\n                orderBy: store.orderBy,\n                orderDir: store.orderDir\n              });\n          }}\n        >\n          <i\n            className={cx(\n              'TableCell-sortBtn--down',\n              store.orderBy === column.name && store.orderDir === 'desc'\n                ? 'is-active'\n                : ''\n            )}\n          >\n            <Icon icon=\"sort-desc\" className=\"icon\" />\n          </i>\n          <i\n            className={cx(\n              'TableCell-sortBtn--up',\n              store.orderBy === column.name && store.orderDir === 'asc'\n                ? 'is-active'\n                : ''\n            )}\n          >\n            <Icon icon=\"sort-asc\" className=\"icon\" />\n          </i>\n          <i\n            className={cx(\n              'TableCell-sortBtn--default',\n              store.orderBy === column.name ? '' : 'is-active'\n            )}\n          >\n            <Icon icon=\"sort-default\" className=\"icon\" />\n          </i>\n        </span>\n      );\n    } else if (column.filterable && column.name) {\n      affix = (\n        <HeadCellFilterDropDown\n          {...this.props}\n          onQuery={onQuery}\n          name={column.name}\n          type={column.type}\n          data={query}\n          filterable={column.filterable}\n          popOverContainer={this.getPopOverContainer}\n        />\n      );\n    }\n\n    if (column.pristine.width) {\n      props.style = props.style || {};\n      props.style.width = column.pristine.width;\n    }\n\n    return (\n      <th\n        {...props}\n        className={cx(\n          props ? (props as any).className : '',\n          column.pristine.className,\n          {\n            'TableCell--sortable': column.sortable,\n            'TableCell--searchable': column.searchable,\n            'TableCell--filterable': column.filterable,\n            'Table-operationCell': column.type === 'operation'\n          }\n        )}\n      >\n        <div className={cx(`${ns}TableCell--title`)}>\n          {column.label ? render('tpl', column.label) : null}\n\n          {column.remark\n            ? render('remark', {\n                type: 'remark',\n                tooltip: column.remark,\n                container:\n                  env && env.getModalContainer\n                    ? env.getModalContainer\n                    : undefined\n              })\n            : null}\n        </div>\n\n        {affix}\n      </th>\n    );\n  }\n\n  renderCell(\n    region: string,\n    column: IColumn,\n    item: IRow,\n    props: any,\n    ignoreDrag = false\n  ) {\n    const {\n      render,\n      store,\n      multiple,\n      classPrefix: ns,\n      classnames: cx,\n      checkOnItemClick,\n      popOverContainer,\n      canAccessSuperData\n    } = this.props;\n\n    if (column.name && item.rowSpans[column.name] === 0) {\n      return null;\n    }\n\n    if (column.type === '__checkme') {\n      return (\n        <td key={props.key} className={cx(column.pristine.className)}>\n          {item.checkable ? (\n            <Checkbox\n              classPrefix={ns}\n              type={multiple ? 'checkbox' : 'radio'}\n              checked={item.checked}\n              onChange={\n                checkOnItemClick ? noop : this.handleCheck.bind(this, item)\n              }\n            />\n          ) : null}\n        </td>\n      );\n    } else if (column.type === '__dragme') {\n      return (\n        <td key={props.key} className={cx(column.pristine.className)}>\n          {item.draggable ? <Icon icon=\"drag-bar\" className=\"icon\" /> : null}\n        </td>\n      );\n    } else if (column.type === '__expandme') {\n      return (\n        <td key={props.key} className={cx(column.pristine.className)}>\n          {item.depth > 2\n            ? Array.from({length: item.depth - 2}).map((_, index) => (\n                <i key={index} className={cx('Table-divider-' + (index + 1))} />\n              ))\n            : null}\n\n          {item.expandable ? (\n            <a\n              className={cx(\n                'Table-expandBtn',\n                item.expanded ? 'is-active' : ''\n              )}\n              // data-tooltip=\"展开/收起\"\n              // data-position=\"top\"\n              onClick={item.toggleExpanded}\n            >\n              <Icon icon=\"right-arrow-bold\" className=\"icon\" />\n            </a>\n          ) : null}\n        </td>\n      );\n    }\n\n    let prefix: React.ReactNode = null;\n\n    if (\n      !ignoreDrag &&\n      column.isPrimary &&\n      store.isNested &&\n      store.draggable &&\n      item.draggable\n    ) {\n      prefix = (\n        <a\n          draggable\n          onDragStart={this.handleDragStart}\n          className={cx('Table-dragBtn')}\n        >\n          <Icon icon=\"drag-bar\" className=\"icon\" />\n        </a>\n      );\n    }\n\n    const subProps: any = {\n      ...props,\n      btnDisabled: store.dragging,\n      data: item.locals,\n      value: column.name\n        ? resolveVariable(\n            column.name,\n            canAccessSuperData ? item.locals : item.data\n          )\n        : column.value,\n      popOverContainer: popOverContainer || this.getPopOverContainer,\n      rowSpan: item.rowSpans[column.name as string],\n      quickEditFormRef: this.subFormRef,\n      prefix,\n      onImageEnlarge: this.handleImageEnlarge,\n      canAccessSuperData\n    };\n    delete subProps.label;\n\n    return render(\n      region,\n      {\n        ...column.pristine,\n        column: column.pristine,\n        type: 'cell'\n      },\n      subProps\n    );\n  }\n\n  renderAffixHeader(tableClassName: string) {\n    const {store, affixHeader, render, classnames: cx} = this.props;\n    const hideHeader = store.filteredColumns.every(column => !column.label);\n\n    return affixHeader ? (\n      <div\n        className={cx('Table-fixedTop', {\n          'is-fakeHide': hideHeader\n        })}\n      >\n        {this.renderHeading()}\n        {this.renderHeader(false)}\n        <div className={cx('Table-fixedLeft')}>\n          {store.leftFixedColumns.length\n            ? this.renderFixedColumns(\n                store.rows,\n                store.leftFixedColumns,\n                true,\n                tableClassName\n              )\n            : null}\n        </div>\n        <div className={cx('Table-fixedRight')}>\n          {store.rightFixedColumns.length\n            ? this.renderFixedColumns(\n                store.rows,\n                store.rightFixedColumns,\n                true,\n                tableClassName\n              )\n            : null}\n        </div>\n        <div className={cx('Table-wrapper')}>\n          <table ref={this.affixedTableRef} className={tableClassName}>\n            <thead>\n              {store.columnGroup.length ? (\n                <tr>\n                  {store.columnGroup.map((item, index) => (\n                    <th\n                      key={index}\n                      data-index={item.index}\n                      colSpan={item.colSpan}\n                    >\n                      {item.label ? render('tpl', item.label) : null}\n                    </th>\n                  ))}\n                </tr>\n              ) : null}\n              <tr>\n                {store.filteredColumns.map(column =>\n                  this.renderHeadCell(column, {\n                    'key': column.index,\n                    'data-index': column.index\n                  })\n                )}\n              </tr>\n            </thead>\n          </table>\n        </div>\n      </div>\n    ) : null;\n  }\n\n  renderFixedColumns(\n    rows: Array<any>,\n    columns: Array<IColumn>,\n    headerOnly: boolean = false,\n    tableClassName: string = ''\n  ) {\n    const {placeholder, store, classnames: cx, render, data} = this.props;\n    const hideHeader = store.filteredColumns.every(column => !column.label);\n\n    return (\n      <table\n        className={cx(\n          'Table-table',\n          store.combineNum > 0 ? 'Table-table--withCombine' : '',\n          tableClassName\n        )}\n      >\n        <thead>\n          {store.columnGroup.length ? (\n            <tr>\n              {store.columnGroup.map((item, index) => {\n                const renderColumns = columns.filter(a => ~item.has.indexOf(a));\n\n                return renderColumns.length ? (\n                  <th\n                    key={index}\n                    data-index={item.index}\n                    colSpan={renderColumns.length}\n                  >\n                    {'\\u00A0'}\n                  </th>\n                ) : null;\n              })}\n            </tr>\n          ) : null}\n          <tr className={hideHeader ? 'fake-hide' : ''}>\n            {columns.map(column =>\n              this.renderHeadCell(column, {\n                'key': column.index,\n                'data-index': column.index\n              })\n            )}\n          </tr>\n        </thead>\n\n        {headerOnly ? null : (\n          <tbody>\n            {rows.length ? (\n              this.renderRows(rows, columns, {\n                regionPrefix: 'fixed/',\n                renderCell: (\n                  region: string,\n                  column: IColumn,\n                  item: IRow,\n                  props: any\n                ) => this.renderCell(region, column, item, props, true)\n              })\n            ) : (\n              <tr className={cx('Table-placeholder')}>\n                <td colSpan={columns.length}>\n                  {render('placeholder', placeholder, {data})}\n                </td>\n              </tr>\n            )}\n          </tbody>\n        )}\n      </table>\n    );\n  }\n\n  renderToolbar(toolbar: SchemaNode) {\n    const type = (toolbar as Schema).type || (toolbar as string);\n\n    if (type === 'columns-toggler') {\n      this.renderedToolbars.push(type);\n      return this.renderColumnsToggler(toolbar as any);\n    } else if (type === 'drag-toggler') {\n      this.renderedToolbars.push(type);\n      return this.renderDragToggler();\n    } else if (type === 'export-excel') {\n      return this.renderExportExcel();\n    }\n\n    return void 0;\n  }\n\n  renderColumnsToggler(config?: any) {\n    const {\n      className,\n      store,\n      classPrefix: ns,\n      classnames: cx,\n      ...rest\n    } = this.props;\n    const __ = rest.translate;\n    const env = rest.env;\n\n    const render = this.props.render;\n\n    if (!store.columnsTogglable) {\n      return null;\n    }\n\n    return (\n      <DropDownButton\n        {...rest}\n        tooltip={__('点击选择显示列')}\n        tooltipContainer={\n          env && env.getModalContainer ? env.getModalContainer : undefined\n        }\n        align={config ? config.align : 'left'}\n        classnames={cx}\n        classPrefix={ns}\n        key=\"columns-toggable\"\n        size=\"sm\"\n        label={<Icon icon=\"columns\" className=\"icon m-r-none\" />}\n      >\n        {store.toggableColumns.map(column => (\n          <li\n            className={cx('DropDown-menuItem')}\n            key={column.index}\n            onClick={column.toggleToggle}\n          >\n            <Checkbox size=\"sm\" classPrefix={ns} checked={column.toggled}>\n              {column.label ? render('tpl', column.label) : null}\n            </Checkbox>\n          </li>\n        ))}\n      </DropDownButton>\n    );\n  }\n\n  renderDragToggler() {\n    const {store, env, draggable, classPrefix: ns, translate: __} = this.props;\n\n    if (!draggable || store.isNested) {\n      return null;\n    }\n\n    return (\n      <Button\n        disabled={!!store.modified}\n        classPrefix={ns}\n        key=\"dragging-toggle\"\n        tooltip={__('点击开始排序')}\n        tooltipContainer={\n          env && env.getModalContainer ? env.getModalContainer : undefined\n        }\n        size=\"sm\"\n        active={store.dragging}\n        onClick={(e: React.MouseEvent<any>) => {\n          e.preventDefault();\n          store.toggleDragging();\n          store.dragging && store.clear();\n        }}\n        iconOnly\n      >\n        <Icon icon=\"exchange\" className=\"icon\" />\n      </Button>\n    );\n  }\n\n  renderExportExcel() {\n    const {\n      store,\n      classPrefix: ns,\n      classnames: cx,\n      translate: __,\n      columns\n    } = this.props;\n\n    if (!columns) {\n      return null;\n    }\n\n    // 按名字快速查找列信息\n    const columnNameMap: {[key: string]: any} = {};\n    for (const column of columns) {\n      if (column.name) {\n        columnNameMap[column.name] = column;\n      }\n    }\n\n    return (\n      <Button\n        classPrefix={ns}\n        onClick={() => {\n          (require as any)(['exceljs'], async (ExcelJS: any) => {\n            if (!store.data.items || store.data.items.length === 0) {\n              return;\n            }\n            const workbook = new ExcelJS.Workbook();\n            const worksheet = workbook.addWorksheet('sheet', {\n              properties: {defaultColWidth: 15}\n            });\n            worksheet.views = [{state: 'frozen', xSplit: 0, ySplit: 1}];\n\n            const items = store.data.items;\n            // 基于第一行数据来生成列名，所以必须保证第一行数据是完整的\n            const firstRowKeys = Object.keys(items[0]);\n            const firstRowLabels = firstRowKeys.map(key => {\n              if (key in columnNameMap) {\n                return columnNameMap[key].label || key;\n              }\n              return key;\n            });\n            const firstRow = worksheet.getRow(1);\n            firstRow.values = firstRowLabels;\n            worksheet.autoFilter = {\n              from: {\n                row: 1,\n                column: 1\n              },\n              to: {\n                row: 1,\n                column: firstRowKeys.length\n              }\n            };\n            // 数据从第二行开始\n            let rowIndex = 1;\n            for (const row of store.rows) {\n              rowIndex += 1;\n              const sheetRow = worksheet.getRow(rowIndex);\n              let columIndex = 0;\n              for (const key of firstRowKeys) {\n                columIndex += 1;\n                if (!(key in row.data)) {\n                  continue;\n                }\n                // 处理合并单元格\n                if (key in row.rowSpans) {\n                  if (row.rowSpans[key] === 0) {\n                    continue;\n                  } else {\n                    // start row, start column, end row, end column\n                    worksheet.mergeCells(\n                      rowIndex,\n                      columIndex,\n                      rowIndex + row.rowSpans[key] - 1,\n                      columIndex\n                    );\n                  }\n                }\n                const value = row.data[key];\n                const type = columnNameMap[key]?.type || 'plain';\n                if (type === 'image') {\n                  const imageData = await toDataURL(value);\n                  const imageDimensions = await getImageDimensions(imageData);\n                  let imageWidth = imageDimensions.width;\n                  let imageHeight = imageDimensions.height;\n                  // 限制一下图片高宽\n                  const imageMaxSize = 100;\n                  if (imageWidth > imageHeight) {\n                    if (imageWidth > imageMaxSize) {\n                      imageHeight = (imageMaxSize * imageHeight) / imageWidth;\n                      imageWidth = imageMaxSize;\n                    }\n                  } else {\n                    if (imageHeight > imageMaxSize) {\n                      imageWidth = (imageMaxSize * imageWidth) / imageHeight;\n                      imageHeight = imageMaxSize;\n                    }\n                  }\n                  const imageMatch = imageData.match(/data:image\\/(.*);/);\n                  let imageExt = 'png';\n                  if (imageMatch) {\n                    imageExt = imageMatch[1];\n                  }\n                  // 目前 excel 只支持这些格式，所以其它格式直接输出 url\n                  if (\n                    imageExt != 'png' &&\n                    imageExt != 'jpeg' &&\n                    imageExt != 'gif'\n                  ) {\n                    sheetRow.getCell(columIndex).value = value;\n                    continue;\n                  }\n                  const imageId = workbook.addImage({\n                    base64: imageData,\n                    extension: imageExt\n                  });\n                  const linkURL = getAbsoluteUrl(value);\n                  worksheet.addImage(imageId, {\n                    // 这里坐标位置是从 0 开始的，所以要减一\n                    tl: {col: columIndex - 1, row: rowIndex - 1},\n                    ext: {\n                      width: imageWidth,\n                      height: imageHeight\n                    },\n                    hyperlinks: {\n                      tooltip: linkURL\n                    }\n                  });\n                } else if (type == 'link') {\n                  const linkURL = getAbsoluteUrl(value);\n                  sheetRow.getCell(columIndex).value = {\n                    text: value,\n                    hyperlink: linkURL\n                  };\n                } else if (type === 'mapping') {\n                  // 拷贝自 Mapping.tsx\n                  const map = columnNameMap[key].map;\n                  if (\n                    typeof value !== 'undefined' &&\n                    map &&\n                    (map[value] ?? map['*'])\n                  ) {\n                    const viewValue =\n                      map[value] ??\n                      (value === true && map['1']\n                        ? map['1']\n                        : value === false && map['0']\n                        ? map['0']\n                        : map['*']); // 兼容平台旧用法：即 value 为 true 时映射 1 ，为 false 时映射 0\n                    sheetRow.getCell(columIndex).value = viewValue;\n                  } else {\n                    sheetRow.getCell(columIndex).value = value;\n                  }\n                } else {\n                  sheetRow.getCell(columIndex).value = value;\n                }\n              }\n            }\n\n            const buffer = await workbook.xlsx.writeBuffer();\n\n            if (buffer) {\n              var blob = new Blob([buffer], {\n                type:\n                  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n              });\n              saveAs(blob, 'data.xlsx');\n            }\n          });\n        }}\n        size=\"sm\"\n      >\n        {__('导出 Excel')}\n      </Button>\n    );\n  }\n\n  renderActions(region: string) {\n    let {actions, render, store, classnames: cx, data} = this.props;\n\n    actions = Array.isArray(actions) ? actions.concat() : [];\n\n    if (\n      store.toggable &&\n      region === 'header' &&\n      !~this.renderedToolbars.indexOf('columns-toggler')\n    ) {\n      actions.push({\n        type: 'button',\n        children: this.renderColumnsToggler()\n      });\n    }\n\n    if (\n      store.draggable &&\n      !store.isNested &&\n      region === 'header' &&\n      store.rows.length > 1 &&\n      !~this.renderedToolbars.indexOf('drag-toggler')\n    ) {\n      actions.push({\n        type: 'button',\n        children: this.renderDragToggler()\n      });\n    }\n\n    return Array.isArray(actions) && actions.length ? (\n      <div className={cx('Table-actions')}>\n        {actions.map((action, key) =>\n          render(\n            `action/${key}`,\n            {\n              type: 'button',\n              ...(action as any)\n            },\n            {\n              onAction: this.handleAction,\n              key,\n              btnDisabled: store.dragging,\n              data: store.getData(data)\n            }\n          )\n        )}\n      </div>\n    ) : null;\n  }\n\n  renderHeader(editable?: boolean) {\n    const {\n      header,\n      headerClassName,\n      toolbarClassName,\n      headerToolbarClassName,\n      headerToolbarRender,\n      render,\n      showHeader,\n      store,\n      classnames: cx,\n      data,\n      translate: __\n    } = this.props;\n\n    if (showHeader === false) {\n      return null;\n    }\n\n    const otherProps: any = {};\n    // editable === false && (otherProps.$$editable = false);\n\n    const child = headerToolbarRender\n      ? headerToolbarRender(\n          {\n            ...this.props,\n            selectedItems: store.selectedRows.map(item => item.data),\n            items: store.rows.map(item => item.data),\n            unSelectedItems: store.unSelectedRows.map(item => item.data),\n            ...otherProps\n          },\n          this.renderToolbar\n        )\n      : null;\n    const actions = this.renderActions('header');\n\n    const toolbarNode =\n      actions || child || store.dragging ? (\n        <div\n          className={cx(\n            'Table-toolbar Table-headToolbar',\n            toolbarClassName,\n            headerToolbarClassName\n          )}\n          key=\"header-toolbar\"\n        >\n          {actions}\n          {child}\n          {store.dragging ? (\n            <div className={cx('Table-dragTip')} ref={this.dragTipRef}>\n              {__('请拖动左边的按钮进行排序')}\n            </div>\n          ) : null}\n        </div>\n      ) : null;\n    const headerNode =\n      header && (!Array.isArray(header) || header.length) ? (\n        <div className={cx('Table-header', headerClassName)} key=\"header\">\n          {render('header', header, {\n            ...(editable === false ? otherProps : null),\n            data: store.getData(data)\n          })}\n        </div>\n      ) : null;\n\n    return headerNode && toolbarNode\n      ? [headerNode, toolbarNode]\n      : headerNode || toolbarNode || null;\n  }\n\n  renderFooter() {\n    const {\n      footer,\n      toolbarClassName,\n      footerToolbarClassName,\n      footerClassName,\n      footerToolbarRender,\n      render,\n      showFooter,\n      store,\n      data,\n      classnames: cx\n    } = this.props;\n\n    if (showFooter === false) {\n      return null;\n    }\n\n    const child = footerToolbarRender\n      ? footerToolbarRender(\n          {\n            ...this.props,\n            selectedItems: store.selectedRows.map(item => item.data),\n            items: store.rows.map(item => item.data)\n          },\n          this.renderToolbar\n        )\n      : null;\n    const actions = this.renderActions('footer');\n\n    const toolbarNode =\n      actions || child ? (\n        <div\n          className={cx(\n            'Table-toolbar Table-footToolbar',\n            toolbarClassName,\n            footerToolbarClassName\n          )}\n          key=\"footer-toolbar\"\n        >\n          {actions}\n          {child}\n        </div>\n      ) : null;\n    const footerNode =\n      footer && (!Array.isArray(footer) || footer.length) ? (\n        <div className={cx('Table-footer', footerClassName)} key=\"footer\">\n          {render('footer', footer, {\n            data: store.getData(data)\n          })}\n        </div>\n      ) : null;\n    return footerNode && toolbarNode\n      ? [toolbarNode, footerNode]\n      : footerNode || toolbarNode || null;\n  }\n\n  renderRows(\n    rows: Array<any>,\n    columns = this.props.store.filteredColumns,\n    rowProps: any = {}\n  ): any {\n    const {\n      store,\n      rowClassName,\n      rowClassNameExpr,\n      onAction,\n      buildItemProps,\n      checkOnItemClick,\n      classPrefix: ns,\n      classnames: cx,\n      render\n    } = this.props;\n\n    return rows.map((item: IRow, rowIndex: number) => {\n      const itemProps = buildItemProps ? buildItemProps(item, rowIndex) : null;\n\n      const doms = [\n        <TableRow\n          {...itemProps}\n          classPrefix={ns}\n          classnames={cx}\n          checkOnItemClick={checkOnItemClick}\n          key={item.id}\n          itemIndex={rowIndex}\n          item={item}\n          itemClassName={cx(\n            rowClassNameExpr\n              ? filter(rowClassNameExpr, item.data)\n              : rowClassName,\n            {\n              'is-last': item.depth > 1 && rowIndex === rows.length - 1,\n              'is-expanded': item.expanded,\n              'is-expandable': item.expandable\n            }\n          )}\n          columns={columns}\n          renderCell={this.renderCell}\n          render={render}\n          onAction={onAction}\n          onCheck={this.handleCheck}\n          // todo 先注释 quickEditEnabled={item.depth === 1}\n          onQuickChange={store.dragging ? null : this.handleQuickChange}\n          {...rowProps}\n        />\n      ];\n\n      if (store.footable && store.footableColumns.length) {\n        if (item.depth === 1) {\n          doms.push(\n            <TableRow\n              {...itemProps}\n              classPrefix={ns}\n              classnames={cx}\n              checkOnItemClick={checkOnItemClick}\n              key={`foot-${item.id}`}\n              itemIndex={rowIndex}\n              item={item}\n              itemClassName={cx(\n                rowClassNameExpr\n                  ? filter(rowClassNameExpr, item.data)\n                  : rowClassName\n              )}\n              columns={store.footableColumns}\n              renderCell={this.renderCell}\n              render={render}\n              onAction={onAction}\n              onCheck={this.handleCheck}\n              footableMode\n              footableColSpan={store.filteredColumns.length}\n              onQuickChange={store.dragging ? null : this.handleQuickChange}\n              {...rowProps}\n            />\n          );\n        }\n      } else if (Array.isArray(item.data.children)) {\n        // 嵌套表格\n        doms.push(...this.renderRows(item.children, columns, rowProps));\n      }\n\n      return doms;\n    });\n  }\n\n  renderItemActions() {\n    const {itemActions, render, store, classnames: cx} = this.props;\n    const finnalActions = Array.isArray(itemActions)\n      ? itemActions.filter(action => !action.hiddenOnHover)\n      : [];\n\n    const rowIndex = store.hoverIndex;\n    if (!~rowIndex || !finnalActions.length) {\n      return null;\n    }\n\n    const heights = this.heights;\n    let height = 40;\n    let top = 0;\n\n    if (heights && heights[rowIndex]) {\n      height = heights[rowIndex];\n      top += heights.header;\n      for (let i = rowIndex - 1; i >= 0; i--) {\n        top += heights[i];\n      }\n    }\n\n    return (\n      <div\n        className={cx('Table-itemActions-wrap')}\n        style={{\n          top,\n          height\n        }}\n      >\n        <div className={cx('Table-itemActions')}>\n          {finnalActions.map((action, index) =>\n            render(\n              `itemAction/${index}`,\n              {\n                ...(action as any),\n                isMenuItem: true\n              },\n              {\n                key: index,\n                item: store.rows[rowIndex],\n                data: store.rows[rowIndex].locals,\n                rowIndex\n              }\n            )\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderTableContent() {\n    const {\n      classnames: cx,\n      tableClassName,\n      store,\n      placeholder,\n      render,\n      checkOnItemClick,\n      buildItemProps,\n      rowClassNameExpr,\n      rowClassName\n    } = this.props;\n\n    return (\n      <TableContent\n        tableClassName={cx(\n          store.combineNum > 0 ? 'Table-table--withCombine' : '',\n          tableClassName\n        )}\n        classnames={cx}\n        columns={store.filteredColumns}\n        columnsGroup={store.columnGroup}\n        rows={store.rows}\n        placeholder={placeholder}\n        render={render}\n        onMouseMove={this.handleMouseMove}\n        onScroll={this.handleOutterScroll}\n        tableRef={this.tableRef}\n        renderHeadCell={this.renderHeadCell}\n        renderCell={this.renderCell}\n        onCheck={this.handleCheck}\n        onQuickChange={store.dragging ? undefined : this.handleQuickChange}\n        footable={store.footable}\n        footableColumns={store.footableColumns}\n        checkOnItemClick={checkOnItemClick}\n        buildItemProps={buildItemProps}\n        onAction={this.handleAction}\n        rowClassNameExpr={rowClassNameExpr}\n        rowClassName={rowClassName}\n      />\n    );\n  }\n\n  render() {\n    const {className, store, classnames: cx, affixColumns} = this.props;\n\n    this.renderedToolbars = []; // 用来记录哪些 toolbar 已经渲染了，已经渲染了就不重复渲染了。\n    const heading = this.renderHeading();\n    const header = this.renderHeader();\n    const footer = this.renderFooter();\n    const tableClassName = cx(\n      'Table-table',\n      store.combineNum > 0 ? 'Table-table--withCombine' : '',\n      this.props.tableClassName\n    );\n\n    return (\n      <div\n        className={cx('Table', className, {\n          'Table--unsaved': !!store.modified || !!store.moved\n        })}\n      >\n        {heading}\n        {header}\n        <div\n          className={cx('Table-contentWrap')}\n          onMouseLeave={this.handleMouseLeave}\n        >\n          <div className={cx('Table-fixedLeft')}>\n            {affixColumns !== false && store.leftFixedColumns.length\n              ? this.renderFixedColumns(\n                  store.rows,\n                  store.leftFixedColumns,\n                  false,\n                  tableClassName\n                )\n              : null}\n          </div>\n          <div className={cx('Table-fixedRight')}>\n            {affixColumns !== false && store.rightFixedColumns.length\n              ? this.renderFixedColumns(\n                  store.rows,\n                  store.rightFixedColumns,\n                  false,\n                  tableClassName\n                )\n              : null}\n          </div>\n          {this.renderTableContent()}\n          {~store.hoverIndex ? this.renderItemActions() : null}\n        </div>\n        {this.renderAffixHeader(tableClassName)}\n        {footer}\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  test: (path: string) =>\n    /(^|\\/)table$/.test(path) /* && !/(^|\\/)table$/.test(path)*/,\n  storeType: TableStore.name,\n  name: 'table'\n})\nexport class TableRenderer extends Table {}\n\nexport {TableCell};\n"
    ]
}