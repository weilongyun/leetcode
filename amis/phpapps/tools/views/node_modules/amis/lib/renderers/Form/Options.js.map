{
    "version": 3,
    "file": "Options.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Form/Options.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "/**\n * @file 所有列表选择类控件的父级，比如 Select、Radios、Checkboxes、\n * List、ButtonGroup 等等\n */\nimport {Api, PlainObject, Schema} from '../../types';\nimport {isEffectiveApi, isApiOutdated, isValidApi} from '../../utils/api';\nimport {isAlive} from 'mobx-state-tree';\nimport {\n  anyChanged,\n  autobind,\n  createObject,\n  setVariable,\n  spliceTree,\n  findTreeIndex,\n  getTree\n} from '../../utils/helper';\nimport {reaction} from 'mobx';\nimport {\n  FormControlProps,\n  registerFormItem,\n  FormItemBasicConfig,\n  detectProps as itemDetectProps,\n  FormBaseControl,\n  FormControlSchema\n} from './Item';\nimport {IFormItemStore} from '../../store/formItem';\nexport type OptionsControlComponent = React.ComponentType<FormControlProps>;\n\nimport React from 'react';\nimport {\n  resolveVariableAndFilter,\n  isPureVariable\n} from '../../utils/tpl-builtin';\nimport {\n  Option,\n  OptionProps,\n  normalizeOptions,\n  optionValueCompare\n} from '../../components/Select';\nimport {filter} from '../../utils/tpl';\nimport findIndex from 'lodash/findIndex';\nimport {\n  SchemaApi,\n  SchemaExpression,\n  SchemaTokenizeableString\n} from '../../Schema';\n\nexport {Option};\n\nexport interface FormOptionsControl extends FormBaseControl {\n  /**\n   * 选项集合\n   */\n  options?: Array<Option> | string[] | PlainObject;\n\n  /**\n   * 可用来通过 API 拉取 options。\n   */\n  source?: SchemaApi | SchemaTokenizeableString;\n\n  /**\n   * 用表达式来配置 source 接口初始要不要拉取\n   *\n   * @deprecated 建议用 source 接口的 sendOn\n   */\n  initFetchOn?: SchemaExpression;\n\n  /**\n   * 配置 source 接口初始拉不拉取。\n   *\n   * @deprecated 建议用 source 接口的 sendOn\n   */\n  initFetch?: boolean;\n\n  /**\n   * 是否为多选模式\n   */\n  multiple?: boolean;\n\n  /**\n   * 单选模式：当用户选中某个选项时，选项中的 value 将被作为该表单项的值提交，否则，整个选项对象都会作为该表单项的值提交。\n   * 多选模式：选中的多个选项的 `value` 会通过 `delimiter` 连接起来，否则直接将以数组的形式提交值。\n   */\n  joinValues?: boolean;\n\n  /**\n   * 分割符\n   */\n  delimiter?: string;\n\n  /**\n   * 开启后将选中的选项 value 的值封装为数组，作为当前表单项的值。\n   */\n  extractValue?: boolean;\n\n  /**\n   * 是否可清除。\n   */\n  clearable?: boolean;\n\n  /**\n   * 点清除按钮时，将表单项设置成当前配置的值。\n   *\n   * @default ''\n   */\n  resetValue?: string;\n\n  /**\n   * 延时加载的 API，当选项中有 defer: true 的选项时，点开会通过此接口扩充。\n   */\n  deferApi?: SchemaApi;\n\n  /**\n   * 添加时调用的接口\n   */\n  addApi?: SchemaApi;\n\n  /**\n   * 新增时的表单项。\n   */\n  addControls?: Array<FormControlSchema>;\n\n  /**\n   * 是否可以新增\n   */\n  creatable?: boolean;\n\n  /**\n   * 新增文字\n   */\n  createBtnLabel?: string;\n\n  /**\n   * 是否可以编辑\n   */\n  editable?: boolean;\n\n  /**\n   * 编辑时调用的 API\n   */\n  editApi?: SchemaApi;\n\n  /**\n   * 选项修改的表单项\n   */\n  editControls?: Array<FormControlSchema>;\n\n  /**\n   * 是否可删除\n   */\n  removable?: boolean;\n\n  /**\n   * 选项删除 API\n   */\n  deleteApi?: SchemaApi;\n\n  /**\n   * 选项删除提示文字。\n   */\n  deleteConfirmText?: string;\n\n  /**\n   * 自动填充，当选项被选择的时候，将选项中的其他值同步设置到表单内。\n   */\n  autoFill?: {\n    [propName: string]: SchemaTokenizeableString;\n  };\n}\n\nexport interface OptionsBasicConfig extends FormItemBasicConfig {\n  autoLoadOptionsFromSource?: boolean;\n}\n\nexport interface OptionsConfig extends OptionsBasicConfig {\n  component: React.ComponentType<OptionsControlProps>;\n}\n\n// 下发给注册进来的组件的属性。\nexport interface OptionsControlProps\n  extends FormControlProps,\n    Omit<FormOptionsControl, 'type'> {\n  options: Array<Option>;\n  onToggle: (\n    option: Option,\n    submitOnChange?: boolean,\n    changeImmediately?: boolean\n  ) => void;\n  onToggleAll: () => void;\n  selectedOptions: Array<Option>;\n  setOptions: (value: Array<any>, skipNormalize?: boolean) => void;\n  setLoading: (value: boolean) => void;\n  reloadOptions: (setError?: boolean) => void;\n  deferLoad: (option: Option) => void;\n  onAdd?: (\n    idx?: number | Array<number>,\n    value?: any,\n    skipForm?: boolean\n  ) => void;\n  onEdit?: (value: Option, origin?: Option, skipForm?: boolean) => void;\n  onDelete?: (value: Option) => void;\n}\n\n// 自己接收的属性。\nexport interface OptionsProps extends FormControlProps, OptionProps {\n  source?: Api;\n  deferApi?: Api;\n  creatable?: boolean;\n  addApi?: Api;\n  addControls?: Array<any>;\n  editApi?: Api;\n  editControls?: Array<any>;\n  deleteApi?: Api;\n  deleteConfirmText?: string;\n  optionLabel?: string;\n}\n\nexport const detectProps = itemDetectProps.concat([\n  'options',\n  'size',\n  'buttons',\n  'columnsCount',\n  'multiple',\n  'hideRoot',\n  'checkAll',\n  'showIcon',\n  'showRadio',\n  'btnDisabled',\n  'joinValues',\n  'extractValue'\n]);\n\nexport function registerOptionsControl(config: OptionsConfig) {\n  const Control = config.component;\n\n  class FormOptionsItem extends React.Component<OptionsProps, any> {\n    static displayName = `OptionsControl(${config.type})`;\n    static defaultProps = {\n      delimiter: ',',\n      labelField: 'label',\n      valueField: 'value',\n      joinValues: true,\n      extractValue: false,\n      multiple: false,\n      placeholder: '请选择',\n      resetValue: '',\n      deleteConfirmText: '确定要删除？',\n      ...Control.defaultProps\n    };\n    static propsList: any = (Control as any).propsList\n      ? [...(Control as any).propsList]\n      : [];\n    static ComposedComponent = Control;\n\n    reaction?: () => void;\n    input: any;\n\n    componentWillMount() {\n      const {\n        initFetch,\n        formItem,\n        source,\n        data,\n        setPrinstineValue,\n        defaultValue,\n        multiple,\n        joinValues,\n        extractValue,\n        addHook,\n        formInited,\n        valueField,\n        options,\n        value\n      } = this.props;\n\n      if (formItem) {\n        formItem.setOptions(normalizeOptions(options));\n\n        this.reaction = reaction(\n          () => JSON.stringify([formItem.loading, formItem.filteredOptions]),\n          () => this.forceUpdate()\n        );\n      }\n\n      let loadOptions: boolean = initFetch !== false;\n\n      if (formItem && joinValues === false && defaultValue) {\n        const selectedOptions = extractValue\n          ? formItem\n              .getSelectedOptions(value)\n              .map(\n                (selectedOption: Option) =>\n                  selectedOption[valueField || 'value']\n              )\n          : formItem.getSelectedOptions(value);\n        setPrinstineValue(\n          multiple ? selectedOptions.concat() : selectedOptions[0]\n        );\n      }\n\n      loadOptions &&\n        config.autoLoadOptionsFromSource !== false &&\n        (formInited\n          ? this.reload()\n          : addHook && addHook(this.initOptions, 'init'));\n    }\n\n    componentDidMount() {\n      this.normalizeValue();\n    }\n\n    shouldComponentUpdate(nextProps: OptionsProps) {\n      if (config.strictMode === false || nextProps.strictMode === false) {\n        return true;\n      } else if (nextProps.source || nextProps.autoComplete) {\n        return true;\n      }\n\n      if (anyChanged(detectProps, this.props, nextProps)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    componentDidUpdate(prevProps: OptionsProps) {\n      const props = this.props;\n      const formItem = props.formItem as IFormItemStore;\n\n      if (!formItem || !props.formInited) {\n        return;\n      } else if (!prevProps.formItem) {\n        // todo 优化 name 变化情况。\n      }\n\n      if (prevProps.value !== props.value || formItem.expressionsInOptions) {\n        formItem.syncOptions();\n      }\n\n      if (prevProps.options !== props.options && formItem) {\n        formItem.setOptions(normalizeOptions(props.options || []));\n        this.normalizeValue();\n      } else if (\n        config.autoLoadOptionsFromSource !== false &&\n        props.source &&\n        formItem &&\n        (prevProps.source !== props.source || prevProps.data !== props.data)\n      ) {\n        if (isPureVariable(props.source as string)) {\n          const prevOptions = resolveVariableAndFilter(\n            prevProps.source as string,\n            prevProps.data,\n            '| raw'\n          );\n          const options = resolveVariableAndFilter(\n            props.source as string,\n            props.data,\n            '| raw'\n          );\n          prevOptions !== options &&\n            formItem.setOptions(normalizeOptions(options || []));\n\n          this.normalizeValue();\n        } else if (\n          isEffectiveApi(props.source, props.data) &&\n          isApiOutdated(\n            prevProps.source,\n            props.source,\n            prevProps.data,\n            props.data\n          )\n        ) {\n          formItem\n            .loadOptions(\n              props.source,\n              props.data,\n              undefined,\n              true,\n              props.onChange\n            )\n            .then(() => this.normalizeValue());\n        }\n      }\n    }\n\n    componentWillUnmount() {\n      this.props.removeHook && this.props.removeHook(this.reload, 'init');\n      this.reaction && this.reaction();\n    }\n\n    normalizeValue() {\n      const {\n        joinValues,\n        extractValue,\n        value,\n        multiple,\n        formItem,\n        valueField\n      } = this.props;\n\n      if (!formItem || joinValues !== false || !formItem.options.length) {\n        return;\n      }\n\n      if (\n        extractValue === false &&\n        (typeof value === 'string' || typeof value === 'number')\n      ) {\n        const selectedOptions = formItem.getSelectedOptions(value);\n        formItem.changeValue(\n          multiple ? selectedOptions.concat() : selectedOptions[0]\n        );\n      } else if (\n        extractValue === true &&\n        value &&\n        !(\n          (Array.isArray(value) &&\n            value.every(\n              val => typeof val === 'string' || typeof val === 'number'\n            )) ||\n          typeof value === 'string' ||\n          typeof value === 'number'\n        )\n      ) {\n        const selectedOptions = formItem\n          .getSelectedOptions(value)\n          .map(\n            (selectedOption: Option) => selectedOption[valueField || 'value']\n          );\n        formItem.changeValue(\n          multiple ? selectedOptions.concat() : selectedOptions[0]\n        );\n      }\n    }\n\n    getWrappedInstance() {\n      return this.input;\n    }\n\n    @autobind\n    inputRef(ref: any) {\n      this.input = ref;\n    }\n\n    @autobind\n    handleToggle(\n      option: Option,\n      submitOnChange?: boolean,\n      changeImmediately?: boolean\n    ) {\n      const {\n        onChange,\n        joinValues,\n        extractValue,\n        valueField,\n        delimiter,\n        clearable,\n        resetValue,\n        multiple,\n        formItem,\n        value\n      } = this.props;\n\n      if (!formItem) {\n        return;\n      }\n\n      let valueArray = formItem.getSelectedOptions(value).concat();\n      const idx = findIndex(\n        valueArray,\n        optionValueCompare(option[valueField || 'value'], valueField || 'value')\n      );\n      let newValue: string | Array<Option> | Option = '';\n\n      if (multiple) {\n        if (~idx) {\n          valueArray.splice(idx, 1);\n        } else {\n          valueArray.push(option);\n        }\n\n        newValue = valueArray;\n\n        if (joinValues) {\n          newValue = (newValue as Array<any>)\n            .map(item => item[valueField || 'value'])\n            .join(delimiter);\n        } else if (extractValue) {\n          newValue = (newValue as Array<any>).map(\n            item => item[valueField || 'value']\n          );\n        }\n      } else {\n        if (~idx && clearable) {\n          valueArray.splice(idx, 1);\n        } else {\n          valueArray = [option];\n        }\n\n        newValue = valueArray[0] || resetValue;\n\n        if ((joinValues || extractValue) && newValue) {\n          newValue = (newValue as any)[valueField || 'value'];\n        }\n      }\n\n      onChange && onChange(newValue, submitOnChange, changeImmediately);\n    }\n\n    @autobind\n    handleToggleAll() {\n      const {\n        value,\n        onChange,\n        joinValues,\n        extractValue,\n        valueField,\n        delimiter,\n        resetValue,\n        multiple,\n        formItem\n      } = this.props;\n\n      if (!formItem) {\n        return;\n      }\n\n      const selectedOptions = formItem.getSelectedOptions(value);\n      let valueArray =\n        selectedOptions.length === formItem.filteredOptions.length\n          ? []\n          : formItem.filteredOptions.concat();\n\n      let newValue: string | Array<Option> | Option = '';\n\n      if (multiple) {\n        newValue = valueArray;\n\n        if (joinValues) {\n          newValue = (newValue as Array<any>)\n            .map(item => item[valueField || 'value'])\n            .join(delimiter);\n        } else if (extractValue) {\n          newValue = (newValue as Array<any>).map(\n            item => item[valueField || 'value']\n          );\n        }\n      } else {\n        newValue = valueArray[0] || resetValue;\n\n        if (joinValues && newValue) {\n          newValue = (newValue as any)[valueField || 'value'];\n        }\n      }\n\n      onChange && onChange(newValue);\n    }\n\n    // 当有 action 触发，如果指定了 reload 目标组件，有可能会来到这里面来\n    @autobind\n    reload() {\n      return this.reloadOptions();\n    }\n\n    @autobind\n    reloadOptions(setError?: boolean) {\n      const {source, formItem, data, onChange} = this.props;\n\n      if (formItem && isPureVariable(source as string)) {\n        formItem.setOptions(\n          normalizeOptions(\n            resolveVariableAndFilter(source as string, data, '| raw') || []\n          )\n        );\n        return;\n      } else if (!formItem || !isEffectiveApi(source, data)) {\n        return;\n      }\n\n      return formItem.loadOptions(\n        source,\n        data,\n        undefined,\n        false,\n        onChange,\n        setError\n      );\n    }\n\n    @autobind\n    deferLoad(option: Option) {\n      const {deferApi, source, env, formItem, data} = this.props;\n\n      if (option.loaded) {\n        return;\n      }\n\n      const api = option.deferApi || deferApi || source;\n\n      if (!api) {\n        env.notify(\n          'error',\n          '请在选项中设置 `deferApi` 或者表单项中设置 `deferApi`，用来加载子选项。'\n        );\n        return;\n      }\n\n      formItem?.deferLoadOptions(option, api, createObject(data, option));\n    }\n\n    @autobind\n    async initOptions(data: any) {\n      await this.reload();\n      const {formItem, name} = this.props;\n      if (!formItem) {\n        return;\n      }\n      if (isAlive(formItem) && formItem.value) {\n        setVariable(data, name!, formItem.value);\n      }\n    }\n\n    focus() {\n      this.input && this.input.focus && this.input.focus();\n    }\n\n    @autobind\n    setOptions(options: Array<any>, skipNormalize = false) {\n      const formItem = this.props.formItem as IFormItemStore;\n      formItem &&\n        formItem.setOptions(\n          skipNormalize ? options : normalizeOptions(options || [])\n        );\n    }\n\n    @autobind\n    syncOptions() {\n      const formItem = this.props.formItem as IFormItemStore;\n      formItem && formItem.syncOptions();\n    }\n\n    @autobind\n    setLoading(value: boolean) {\n      const formItem = this.props.formItem as IFormItemStore;\n      formItem && formItem.setLoading(value);\n    }\n\n    @autobind\n    async handleOptionAdd(\n      idx: number | Array<number> = -1,\n      value?: any,\n      skipForm: boolean = false\n    ) {\n      let {\n        addControls,\n        disabled,\n        labelField,\n        onOpenDialog,\n        optionLabel,\n        addApi,\n        source,\n        data,\n        valueField,\n        formItem: model,\n        createBtnLabel,\n        env,\n        translate: __\n      } = this.props;\n\n      // 禁用或者没有配置 name\n      if (disabled || !model) {\n        return;\n      }\n\n      // 用户没有配置表单项，则自动创建一个 label 输入\n      if (!skipForm && (!Array.isArray(addControls) || !addControls.length)) {\n        addControls = [\n          {\n            type: 'text',\n            name: labelField || 'label',\n            label: false,\n            placeholder: __('请输入名称')\n          }\n        ];\n      }\n\n      const ctx = createObject(\n        data,\n        Array.isArray(idx)\n          ? {\n              parent: getTree(model.options, idx),\n              ...value\n            }\n          : value\n      );\n\n      let result: any = skipForm\n        ? ctx\n        : await onOpenDialog(\n            {\n              type: 'dialog',\n              title: createBtnLabel || `新增${optionLabel || '选项'}`,\n              body: {\n                type: 'form',\n                api: addApi,\n                controls: addControls\n              }\n            },\n            ctx\n          );\n\n      // 单独发请求\n      if (skipForm && addApi) {\n        try {\n          const payload = await env.fetcher(addApi!, result, {\n            method: 'post'\n          });\n\n          if (!payload.ok) {\n            env.notify('error', payload.msg || '新增失败，请仔细检查');\n            result = null;\n          } else {\n            result = payload.data || result;\n          }\n        } catch (e) {\n          result = null;\n          console.error(e);\n          env.notify('error', e.message);\n        }\n      }\n\n      // 有 result 说明弹框点了确认。否则就是取消了。\n      if (!result) {\n        return;\n      }\n\n      // 没走服务端的。\n      if (!result.hasOwnProperty(valueField || 'value')) {\n        result = {\n          ...result,\n          [valueField || 'value']: result[labelField || 'label']\n        };\n      }\n\n      // 如果配置了 source 且配置了 addApi 直接重新拉取接口就够了\n      // 不能不判断 addApi 就刷新，因为有些场景就是临时添加的。\n      if (source && addApi) {\n        this.reload();\n      } else {\n        // 否则直接前端变更 options\n        let options = model.options.concat();\n        if (Array.isArray(idx)) {\n          options = spliceTree(options, idx, 0, {...result});\n        } else {\n          ~idx\n            ? options.splice(idx, 0, {...result})\n            : options.push({...result});\n        }\n        model.setOptions(options);\n      }\n    }\n\n    @autobind\n    async handleOptionEdit(\n      value: any,\n      origin: any = value,\n      skipForm: boolean = false\n    ) {\n      let {\n        editControls,\n        disabled,\n        labelField,\n        onOpenDialog,\n        editApi,\n        env,\n        source,\n        data,\n        formItem: model,\n        optionLabel,\n        translate: __\n      } = this.props;\n\n      if (disabled || !model) {\n        return;\n      }\n\n      if (!skipForm && (!Array.isArray(editControls) || !editControls.length)) {\n        editControls = [\n          {\n            type: 'text',\n            name: labelField || 'label',\n            label: false,\n            placeholder: __('请输入名称')\n          }\n        ];\n      }\n\n      let result = skipForm\n        ? value\n        : await onOpenDialog(\n            {\n              type: 'dialog',\n              title: __('编辑{{label}}', {\n                label: optionLabel || '选项'\n              }),\n              body: {\n                type: 'form',\n                api: editApi,\n                controls: editControls\n              }\n            },\n            createObject(data, value)\n          );\n\n      // 单独发请求\n      if (skipForm && editApi) {\n        try {\n          const payload = await env.fetcher(\n            editApi!,\n            createObject(data, result),\n            {\n              method: 'post'\n            }\n          );\n\n          if (!payload.ok) {\n            env.notify('error', payload.msg || __('保存失败，请仔细检查'));\n            result = null;\n          } else {\n            result = payload.data || result;\n          }\n        } catch (e) {\n          result = null;\n          console.error(e);\n          env.notify('error', e.message);\n        }\n      }\n\n      // 没有结果，说明取消了。\n      if (!result) {\n        return;\n      }\n\n      if (source && !editApi) {\n        this.reload();\n      } else {\n        const indexes = findTreeIndex(model.options, item => item === origin);\n\n        if (indexes) {\n          model.setOptions(\n            spliceTree(model.options, indexes, 1, {\n              ...origin,\n              ...result\n            })\n          );\n        }\n      }\n    }\n\n    @autobind\n    async handleOptionDelete(value: any) {\n      let {\n        deleteConfirmText,\n        disabled,\n        data,\n        deleteApi,\n        env,\n        formItem: model,\n        source,\n        valueField,\n        translate: __\n      } = this.props;\n\n      if (disabled || !model) {\n        return;\n      }\n\n      const ctx = createObject(data, value);\n\n      // 如果配置了 deleteConfirmText 让用户先确认。\n      const confirmed = deleteConfirmText\n        ? await env.confirm(filter(deleteConfirmText, ctx))\n        : true;\n      if (!confirmed) {\n        return;\n      }\n\n      // 通过 deleteApi 删除。\n      try {\n        if (!deleteApi) {\n          throw new Error(__('请配置 deleteApi'));\n        }\n\n        const result = await env.fetcher(deleteApi!, ctx, {\n          method: 'delete'\n        });\n\n        if (!result.ok) {\n          env.notify('error', result.msg || __('删除失败，请重试'));\n        } else if (source) {\n          this.reload();\n        } else {\n          const options = model.options.concat();\n          const idx = findIndex(\n            options,\n            item => item[valueField || 'value'] == value[valueField || 'value']\n          );\n\n          if (~idx) {\n            options.splice(idx, 1);\n            model.setOptions(options);\n          }\n        }\n      } catch (e) {\n        console.error(e);\n        env.notify('error', e.message);\n      }\n    }\n\n    render() {\n      const {\n        value,\n        formItem,\n        addApi,\n        editApi,\n        deleteApi,\n        creatable,\n        editable,\n        removable\n      } = this.props;\n\n      return (\n        <Control\n          {...this.props}\n          ref={this.inputRef}\n          options={formItem ? formItem.filteredOptions : []}\n          onToggle={this.handleToggle}\n          onToggleAll={this.handleToggleAll}\n          selectedOptions={formItem ? formItem.getSelectedOptions(value) : []}\n          loading={formItem ? formItem.loading : false}\n          setLoading={this.setLoading}\n          setOptions={this.setOptions}\n          syncOptions={this.syncOptions}\n          reloadOptions={this.reload}\n          deferLoad={this.deferLoad}\n          creatable={\n            creatable || (creatable !== false && isEffectiveApi(addApi))\n          }\n          editable={editable || (editable !== false && isEffectiveApi(editApi))}\n          removable={\n            removable || (removable !== false && isEffectiveApi(deleteApi))\n          }\n          onAdd={this.handleOptionAdd}\n          onEdit={this.handleOptionEdit}\n          onDelete={this.handleOptionDelete}\n        />\n      );\n    }\n  }\n\n  return registerFormItem({\n    ...(config as FormItemBasicConfig),\n    strictMode: false,\n    component: FormOptionsItem\n  });\n}\n\nexport function OptionsControl(config: OptionsBasicConfig) {\n  return function <T extends React.ComponentType<OptionsControlProps>>(\n    component: T\n  ): T {\n    const renderer = registerOptionsControl({\n      ...config,\n      component: component\n    });\n    return renderer.component as any;\n  };\n}\n\nexport function highlight(\n  text: string,\n  input?: string,\n  hlClassName: string = 'is-matched'\n) {\n  if (!input) {\n    return text;\n  }\n\n  text = String(text);\n  const reg = new RegExp(\n    input.replace(/([\\$\\^\\*\\+\\-\\?\\.\\(\\)\\|\\[\\]\\\\])/g, '\\\\$1'),\n    'i'\n  );\n  if (!reg.test(text)) {\n    return text;\n  }\n\n  const parts = text.split(reg);\n  const dom: Array<any> = [];\n\n  parts.forEach((text: string, index) => {\n    text && dom.push(<span key={index}>{text}</span>);\n    dom.push(\n      <span className={hlClassName} key={`${index}-hl`}>\n        {input}\n      </span>\n    );\n  });\n\n  dom.pop();\n\n  return dom;\n}\n"
    ]
}