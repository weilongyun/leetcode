{
    "version": 3,
    "file": "Wizard.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Wizard.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {ScopedContext, IScopedContext} from '../Scoped';\nimport {Renderer, RendererProps} from '../factory';\nimport {ServiceStore, IServiceStore} from '../store/service';\nimport {Api, Action} from '../types';\nimport {filter, evalExpression} from '../utils/tpl';\nimport {\n  createObject,\n  until,\n  isVisible,\n  getScrollParent,\n  autobind\n} from '../utils/helper';\nimport {isApiOutdated, isEffectiveApi} from '../utils/api';\nimport {IFormStore} from '../store/form';\nimport {Spinner} from '../components';\nimport {findDOMNode} from 'react-dom';\nimport {resizeSensor} from '../utils/resize-sensor';\nimport {\n  BaseSchema,\n  SchemaApi,\n  SchemaClassName,\n  SchemaExpression,\n  SchemaName,\n  SchemaReload\n} from '../Schema';\nimport {FormSchema} from './Form';\nimport {ActionSchema} from './Action';\n\nexport type WizardStepSchema = Omit<FormSchema, 'type'> & {\n  /**\n   * 当前步骤用来保存数据的 api。\n   */\n  api?: SchemaApi;\n\n  asyncApi?: SchemaApi;\n\n  /**\n   * 当前步骤用来获取初始数据的 api\n   */\n  initApi?: SchemaApi;\n\n  /**\n   * 是否可直接跳转到该步骤，一般编辑模式需要可直接跳转查看。\n   */\n  jumpable?: boolean;\n\n  /**\n   * 通过 JS 表达式来配置当前步骤可否被直接跳转到。\n   */\n  jumpableOn?: SchemaExpression;\n\n  /**\n   * Step 标题\n   */\n  title?: string;\n  label?: string;\n\n  /**\n   * 每一步可以单独配置按钮。如果不配置wizard会自动生成。\n   */\n  actions?: Array<ActionSchema>;\n\n  /**\n   * 保存完后，可以指定跳转地址，支持相对路径和组内绝对路径，同时可以通过 $xxx 使用变量\n   */\n  redirect?: string;\n\n  reload?: SchemaReload;\n\n  /**\n   * 默认表单提交自己会通过发送 api 保存数据，但是也可以设定另外一个 form 的 name 值，或者另外一个 `CRUD` 模型的 name 值。 如果 target 目标是一个 `Form` ，则目标 `Form` 会重新触发 `initApi` 和 `schemaApi`，api 可以拿到当前 form 数据。如果目标是一个 `CRUD` 模型，则目标模型会重新触发搜索，参数为当前 Form 数据。\n   */\n  target?: string;\n};\n\n/**\n * 表单向导\n * 文档：https://baidu.gitee.io/amis/docs/components/wizard\n */\nexport interface WizardSchema extends BaseSchema {\n  /**\n   * 指定为表单向导\n   */\n  type: 'wizard';\n\n  /**\n   * 配置按钮 className\n   */\n  actionClassName?: SchemaClassName;\n\n  /**\n   * 完成按钮的文字描述\n   */\n  actionFinishLabel?: string;\n\n  /**\n   * 下一步按钮的文字描述\n   */\n  actionNextLabel?: string;\n\n  /**\n   * 下一步并且保存按钮的文字描述\n   */\n  actionNextSaveLabel?: string;\n\n  /**\n   * 上一步按钮的文字描述\n   */\n  actionPrevLabel?: string;\n\n  /**\n   * Wizard 用来保存数据的 api。\n   * [详情](https://baidu.github.io/amis/docs/api#wizard)\n   */\n  api?: SchemaApi;\n\n  /**\n   * 是否合并后再提交\n   */\n  bulkSubmit?: boolean;\n\n  /**\n   * Wizard 用来获取初始数据的 api。\n   */\n  initApi?: SchemaApi;\n\n  /**\n   * 展示模式\n   *\n   * @default vertical\n   */\n  mode?: 'vertical' | 'horizontal';\n\n  name?: SchemaName;\n\n  /**\n   * 是否为只读模式。\n   */\n  readOnly?: boolean;\n\n  /**\n   * 保存完后，可以指定跳转地址，支持相对路径和组内绝对路径，同时可以通过 $xxx 使用变量\n   */\n  redirect?: string;\n\n  reload?: SchemaReload;\n\n  /**\n   * 默认表单提交自己会通过发送 api 保存数据，但是也可以设定另外一个 form 的 name 值，或者另外一个 `CRUD` 模型的 name 值。 如果 target 目标是一个 `Form` ，则目标 `Form` 会重新触发 `initApi` 和 `schemaApi`，api 可以拿到当前 form 数据。如果目标是一个 `CRUD` 模型，则目标模型会重新触发搜索，参数为当前 Form 数据。\n   */\n  target?: string;\n\n  /**\n   * 是否将底部按钮固定在底部。\n   */\n  affixFooter?: boolean | 'always';\n\n  steps: Array<WizardStepSchema>;\n}\n\nexport interface WizardProps extends RendererProps, WizardSchema {\n  store: IServiceStore;\n  onFinished: (values: object, action: any) => any;\n}\n\nexport interface WizardState {\n  currentStep: number;\n}\n\nexport default class Wizard extends React.Component<WizardProps, WizardState> {\n  static defaultProps: Partial<WizardProps> = {\n    mode: 'horizontal', // vertical\n    readOnly: false,\n    messages: {},\n    actionClassName: '',\n    actionPrevLabel: '上一步',\n    actionNextLabel: '下一步',\n    actionNextSaveLabel: '保存并下一步',\n    actionFinishLabel: '完成'\n  };\n\n  static propsList: Array<string> = [\n    'steps',\n    'mode',\n    'messages',\n    'actionClassName',\n    'actionPrevLabel',\n    'actionNextLabel',\n    'actionNextSaveLabel',\n    'actionFinishLabel',\n    'onFinished',\n    'affixFooter'\n  ];\n\n  dom: any;\n  form: any;\n  asyncCancel: () => void;\n\n  parentNode?: any;\n  unSensor: Function;\n  affixDom: React.RefObject<HTMLDivElement> = React.createRef();\n  footerDom: React.RefObject<HTMLDivElement> = React.createRef();\n  initalValues: {\n    [propName: string]: any;\n  } = {};\n\n  state = {\n    currentStep: -1 // init 完后会设置成 1\n  };\n\n  componentDidMount() {\n    const {\n      initApi,\n      initFetch,\n      initAsyncApi,\n      initFinishedField,\n      store,\n      messages: {fetchSuccess, fetchFailed},\n      onInit\n    } = this.props;\n\n    if (isEffectiveApi(initApi, store.data, initFetch)) {\n      store\n        .fetchInitData(initApi, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed,\n          onSuccess: () => {\n            if (\n              !isEffectiveApi(initAsyncApi, store.data) ||\n              store.data[initFinishedField || 'finished']\n            ) {\n              return;\n            }\n\n            return until(\n              () => store.checkRemote(initAsyncApi, store.data),\n              (ret: any) => ret && ret[initFinishedField || 'finished'],\n              cancel => (this.asyncCancel = cancel)\n            );\n          }\n        })\n        .then(value => {\n          onInit && onInit(store.data);\n          const state = {\n            currentStep: 1\n          };\n\n          if (\n            value &&\n            value.data &&\n            (typeof value.data.step === 'number' ||\n              (typeof value.data.step === 'string' &&\n                /^\\d+$/.test(value.data.step)))\n          ) {\n            state.currentStep = parseInt(value.data.step, 10);\n          }\n\n          this.setState(state, () => {\n            // 如果 initApi 返回的状态是正在提交，则进入轮顺状态。\n            if (\n              value &&\n              value.data &&\n              (value.data.submiting || value.data.submited)\n            ) {\n              this.checkSubmit();\n            }\n          });\n          return value;\n        });\n    } else {\n      this.setState(\n        {\n          currentStep: 1\n        },\n        () => onInit && onInit(store.data)\n      );\n    }\n\n    const dom = findDOMNode(this) as HTMLElement;\n    let parent: HTMLElement | Window | null = dom ? getScrollParent(dom) : null;\n    if (!parent || parent === document.body) {\n      parent = window;\n    }\n    this.parentNode = parent;\n    parent.addEventListener('scroll', this.affixDetect);\n    this.unSensor = resizeSensor(dom as HTMLElement, this.affixDetect);\n    this.affixDetect();\n  }\n\n  componentDidUpdate(prevProps: WizardProps) {\n    const props = this.props;\n    const {store, fetchSuccess, fetchFailed} = props;\n\n    if (\n      isApiOutdated(\n        prevProps.initApi,\n        props.initApi,\n        prevProps.data,\n        props.data\n      )\n    ) {\n      store.fetchData(props.initApi, store.data, {\n        successMessage: fetchSuccess,\n        errorMessage: fetchFailed\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.asyncCancel && this.asyncCancel();\n    const parent = this.parentNode;\n    parent && parent.removeEventListener('scroll', this.affixDetect);\n    this.unSensor && this.unSensor();\n  }\n\n  @autobind\n  affixDetect() {\n    if (\n      !this.props.affixFooter ||\n      !this.affixDom.current ||\n      !this.footerDom.current\n    ) {\n      return;\n    }\n\n    const affixDom = this.affixDom.current;\n    const footerDom = this.footerDom.current;\n    let affixed = false;\n    footerDom.offsetWidth &&\n      (affixDom.style.cssText = `width: ${footerDom.offsetWidth}px;`);\n\n    if (this.props.affixFooter === 'always') {\n      affixed = true;\n      footerDom.classList.add('invisible2');\n    } else {\n      const clip = footerDom.getBoundingClientRect();\n      const clientHeight = window.innerHeight;\n      affixed = clip.top + clip.height / 2 > clientHeight;\n    }\n\n    affixed ? affixDom.classList.add('in') : affixDom.classList.remove('in');\n  }\n\n  gotoStep(index: number) {\n    const steps = this.props.steps || [];\n    index = Math.max(Math.min(steps.length, index), 1);\n\n    this.setState({\n      currentStep: index\n    });\n  }\n\n  @autobind\n  formRef(ref: any) {\n    if (ref) {\n      while (ref && ref.getWrappedInstance) {\n        ref = ref.getWrappedInstance();\n      }\n      this.form = ref;\n    } else {\n      this.form = undefined;\n    }\n  }\n\n  submitToTarget(target: string, values: object) {\n    throw new Error('Please implements this!');\n  }\n\n  reloadTarget(target: string, data: any) {\n    throw new Error('Please implements this!');\n  }\n\n  reload(subPath?: string, query?: any, ctx?: any) {\n    if (query) {\n      return this.receive(query);\n    }\n\n    const {\n      initApi,\n      initAsyncApi,\n      initFinishedField,\n      store,\n      messages: {fetchSuccess, fetchFailed}\n    } = this.props;\n\n    if (isEffectiveApi(initApi, store.data) && this.state.currentStep === 1) {\n      store\n        .fetchInitData(initApi, store.data, {\n          successMessage: fetchSuccess,\n          errorMessage: fetchFailed,\n          onSuccess: () => {\n            if (\n              !isEffectiveApi(initAsyncApi, store.data) ||\n              store.data[initFinishedField || 'finished']\n            ) {\n              return;\n            }\n\n            return until(\n              () => store.checkRemote(initAsyncApi, store.data),\n              (ret: any) => ret && ret[initFinishedField || 'finished'],\n              cancel => (this.asyncCancel = cancel)\n            );\n          }\n        })\n        .then(value => {\n          const state = {\n            currentStep: 1\n          };\n\n          if (\n            value &&\n            value.data &&\n            (typeof value.data.step === 'number' ||\n              (typeof value.data.step === 'string' &&\n                /^\\d+$/.test(value.data.step)))\n          ) {\n            state.currentStep = parseInt(value.data.step, 10);\n          }\n\n          this.setState(state, () => {\n            // 如果 initApi 返回的状态是正在提交，则进入轮顺状态。\n            if (\n              value &&\n              value.data &&\n              (value.data.submiting || value.data.submited)\n            ) {\n              this.checkSubmit();\n            }\n          });\n          return value;\n        });\n    }\n  }\n\n  receive(values: object) {\n    const {store} = this.props;\n\n    store.updateData(values);\n    this.reload();\n  }\n\n  @autobind\n  domRef(ref: any) {\n    this.dom = ref;\n  }\n\n  @autobind\n  getPopOverContainer() {\n    return this.dom;\n  }\n\n  // 用来还原异步提交状态。\n  checkSubmit() {\n    const {store, steps, asyncApi, finishedField, env} = this.props;\n\n    const step = steps[this.state.currentStep - 1];\n    let finnalAsyncApi =\n      (step && step.asyncApi) ||\n      (this.state.currentStep === steps.length && asyncApi);\n\n    if (!step || !isEffectiveApi(finnalAsyncApi, store.data)) {\n      return;\n    }\n\n    store.markSaving(true);\n    store.updateData({\n      [finishedField || 'finished']: false\n    });\n\n    until(\n      () => store.checkRemote(finnalAsyncApi as Api, store.data),\n      (ret: any) => ret && ret[finishedField || 'finished'],\n      cancel => (this.asyncCancel = cancel)\n    )\n      .then(() => {\n        store.markSaving(false);\n        this.gotoStep(this.state.currentStep + 1);\n      })\n      .catch(e => {\n        env.notify('error', e.message);\n        store.markSaving(false);\n      });\n  }\n\n  @autobind\n  handleAction(\n    e: React.UIEvent<any> | void,\n    action: Action,\n    data: object,\n    throwErrors: boolean = false,\n    delegate?: IScopedContext\n  ) {\n    const {onAction, store, env} = this.props;\n\n    if (action.actionType === 'next' || action.type === 'submit') {\n      this.form.doAction(\n        {\n          ...action,\n          actionType: 'submit'\n        },\n        data\n      );\n    } else if (action.actionType === 'prev') {\n      this.gotoStep(this.state.currentStep - 1);\n    } else if (action.type === 'reset') {\n      this.form.reset();\n    } else if (action.actionType === 'dialog') {\n      store.openDialog(data);\n    } else if (action.actionType === 'ajax') {\n      if (!action.api) {\n        return env.alert(`当 actionType 为 ajax 时，请设置 api 属性`);\n      }\n\n      return store\n        .saveRemote(action.api as Api, data, {\n          successMessage: action.messages && action.messages.success,\n          errorMessage: action.messages && action.messages.failed\n        })\n        .then(async () => {\n          this.form && this.form.isValidated() && this.form.validate(true);\n\n          if (action.feedback && isVisible(action.feedback, store.data)) {\n            await this.openFeedback(action.feedback, store.data);\n          }\n\n          const reidrect =\n            action.redirect && filter(action.redirect, store.data);\n          reidrect && env.jumpTo(reidrect, action);\n\n          action.reload && this.reloadTarget(action.reload, store.data);\n        })\n        .catch(() => {});\n    } else if (action.actionType === 'reload') {\n      action.target && this.reloadTarget(action.target, data);\n    } else if (onAction) {\n      onAction(e, action, data, throwErrors, delegate || this.context);\n    }\n  }\n\n  @autobind\n  handleQuery(query: any) {\n    if (this.props.initApi) {\n      this.receive(query);\n    } else {\n      this.props.onQuery?.(query);\n    }\n  }\n\n  openFeedback(dialog: any, ctx: any) {\n    return new Promise(resolve => {\n      const {store} = this.props;\n      store.setCurrentAction({\n        type: 'button',\n        actionType: 'dialog',\n        dialog: dialog\n      });\n      store.openDialog(ctx, undefined, confirmed => {\n        resolve(confirmed);\n      });\n    });\n  }\n\n  @autobind\n  handleChange(values: object) {\n    const {store} = this.props;\n\n    store.updateData(values);\n  }\n\n  @autobind\n  handleInit(values: any) {\n    const step = this.state.currentStep;\n    this.initalValues[step] = this.initalValues[step] || values;\n  }\n\n  @autobind\n  handleReset(values: any) {\n    const {store} = this.props;\n    const initalValue = this.initalValues[this.state.currentStep];\n    const reseted: any = {};\n    Object.keys(values).forEach(key => {\n      reseted[key] = initalValue.hasOwnProperty(key)\n        ? initalValue[key]\n        : undefined;\n    });\n\n    store.updateData(reseted);\n  }\n\n  // 接管里面 form 的提交，不能直接让 form 提交，因为 wizard 自己需要知道进度。\n  @autobind\n  handleSubmit(values: object, action: Action) {\n    const {\n      store,\n      steps,\n      api,\n      asyncApi,\n      finishedField,\n      target,\n      redirect,\n      reload,\n      env,\n      onFinished\n    } = this.props;\n\n    const step = steps[this.state.currentStep - 1];\n    store.updateData(values);\n\n    if (this.state.currentStep < steps.length) {\n      let finnalAsyncApi = action.asyncApi || step.asyncApi;\n\n      isEffectiveApi(finnalAsyncApi, store.data) &&\n        store.updateData({\n          [finishedField || 'finished']: false\n        });\n\n      if (isEffectiveApi(action.api || step.api, store.data)) {\n        store\n          .saveRemote(action.api || step.api!, store.data, {\n            onSuccess: () => {\n              if (\n                !isEffectiveApi(finnalAsyncApi, store.data) ||\n                store.data[finishedField || 'finished']\n              ) {\n                return;\n              }\n\n              return until(\n                () => store.checkRemote(finnalAsyncApi as Api, store.data),\n                (ret: any) => ret && ret[finishedField || 'finished'],\n                cancel => (this.asyncCancel = cancel)\n              );\n            }\n          })\n          .then((value: any) =>\n            this.gotoStep(\n              value && typeof value.step === 'number'\n                ? value.step\n                : this.state.currentStep + 1\n            )\n          )\n          .catch(() => {\n            // do nothing\n          });\n      } else {\n        this.gotoStep(this.state.currentStep + 1);\n      }\n    } else {\n      // 最后一步\n      if (target) {\n        this.submitToTarget(target, store.data);\n      } else if (action.api || step.api || api) {\n        let finnalAsyncApi = action.asyncApi || step.asyncApi || asyncApi;\n\n        isEffectiveApi(finnalAsyncApi, store.data) &&\n          store.updateData({\n            [finishedField || 'finished']: false\n          });\n\n        const formStore = this.form\n          ? (this.form.props.store as IFormStore)\n          : store;\n        store.markSaving(true);\n\n        formStore\n          .saveRemote(action.api || step.api || api!, store.data, {\n            onSuccess: () => {\n              if (\n                !isEffectiveApi(finnalAsyncApi, store.data) ||\n                store.data[finishedField || 'finished']\n              ) {\n                return;\n              }\n\n              return until(\n                () => store.checkRemote(finnalAsyncApi as Api, store.data),\n                (ret: any) => ret && ret[finishedField || 'finished'],\n                cancel => (this.asyncCancel = cancel)\n              );\n            }\n          })\n          .then(value => {\n            store.updateData({\n              ...store.data,\n              ...value\n            });\n            store.markSaving(false);\n\n            if (value && typeof value.step === 'number') {\n              this.gotoStep(value.step);\n            } else if (onFinished && onFinished(value, action) === false) {\n              // 如果是 false 后面的操作就不执行\n              return value;\n            }\n\n            const finalRedirect =\n              (action.redirect || step.redirect || redirect) &&\n              filter(action.redirect || step.redirect || redirect, store.data);\n\n            if (finalRedirect) {\n              env.jumpTo(finalRedirect, action);\n            } else if (action.reload || step.reload || reload) {\n              this.reloadTarget(\n                action.reload || step.reload || reload!,\n                store.data\n              );\n            }\n\n            return value;\n          })\n          .catch(e => {\n            store.markSaving(false);\n            console.error(e);\n          });\n      } else {\n        onFinished && onFinished(store.data, action);\n      }\n    }\n\n    return false;\n  }\n\n  @autobind\n  handleDialogConfirm(values: object[], action: Action, targets: Array<any>) {\n    const {store} = this.props;\n\n    if (\n      action.mergeData &&\n      values.length === 1 &&\n      values[0] &&\n      targets[0].props.type === 'form'\n    ) {\n      store.updateData(values[0]);\n    }\n\n    store.closeDialog();\n  }\n\n  @autobind\n  handleDialogClose() {\n    const {store} = this.props;\n    store.closeDialog();\n  }\n\n  renderSteps() {\n    const {steps, store, mode, classPrefix: ns, classnames: cx} = this.props;\n    const currentStep = this.state.currentStep;\n\n    return (\n      <div className={`${ns}Wizard-steps`} id=\"form-wizard\">\n        {Array.isArray(steps) && steps.length ? (\n          <ul>\n            {steps.map((step, key) => {\n              const canJump = isJumpable(step, key, currentStep, store.data);\n\n              return (\n                <li\n                  key={key}\n                  className={cx({\n                    'is-complete': canJump,\n                    'is-active': currentStep === key + 1\n                  })}\n                  onClick={() => (canJump ? this.gotoStep(key + 1) : null)}\n                >\n                  <span\n                    className={cx('Badge', {\n                      // 'Badge--success': canJump && currentStep != key + 1,\n                      'is-active':\n                        currentStep === key + 1 ||\n                        (canJump && currentStep != key + 1)\n                    })}\n                  >\n                    {key + 1}\n                  </span>\n                  {step.title || step.label || `第 ${key + 1} 步`}\n                </li>\n              );\n            })}\n          </ul>\n        ) : null}\n      </div>\n    );\n  }\n\n  renderActions() {\n    const {\n      steps,\n      store,\n      readOnly,\n      disabled,\n      actionClassName,\n      actionPrevLabel,\n      actionNextLabel,\n      actionNextSaveLabel,\n      actionFinishLabel,\n      render,\n      translate: __\n    } = this.props;\n\n    if (!Array.isArray(steps)) {\n      return null;\n    }\n\n    const currentStepIndex = this.state.currentStep;\n    const nextStep = steps[currentStepIndex];\n    const prevStep = steps[currentStepIndex - 2];\n    const waiting = store.loading;\n    const step = steps[currentStepIndex - 1];\n\n    if (!step) {\n      return null;\n    }\n\n    const prevCanJump = prevStep\n      ? isJumpable(prevStep, currentStepIndex - 2, currentStepIndex, store.data)\n      : false;\n\n    if (step.actions && Array.isArray(step.actions)) {\n      return step.actions.length ? (\n        <>\n          {step.actions.map((action, index) =>\n            render(`action/${index}`, action, {\n              key: index,\n              onAction: this.handleAction,\n              disabled:\n                action.disabled ||\n                waiting ||\n                disabled ||\n                (action.actionType === 'prev' && !prevCanJump) ||\n                (action.actionType === 'next' &&\n                  readOnly &&\n                  (!!step.api || !nextStep))\n            })\n          )}\n        </>\n      ) : null;\n    }\n\n    return (\n      <>\n        {render(\n          `prev-btn`,\n          {\n            type: 'button',\n            label: __(actionPrevLabel),\n            actionType: 'prev',\n            className: actionClassName\n          },\n          {\n            disabled: waiting || !prevCanJump || disabled,\n            onAction: this.handleAction\n          }\n        )}\n\n        {render(\n          `next-btn`,\n          {\n            type: 'button',\n            label: !nextStep\n              ? __(actionFinishLabel)\n              : !step.api\n              ? __(actionNextLabel)\n              : __(actionNextSaveLabel),\n            actionType: 'next',\n            primary: !nextStep || !!step.api,\n            className: actionClassName\n          },\n          {\n            disabled:\n              waiting || disabled || (readOnly && (!!step.api || !nextStep)),\n            onAction: this.handleAction\n          }\n        )}\n      </>\n    );\n  }\n\n  renderFooter() {\n    const actions = this.renderActions();\n\n    if (!actions) {\n      return actions;\n    }\n    const {classnames: cx, affixFooter} = this.props;\n\n    return (\n      <>\n        <div\n          role=\"wizard-footer\"\n          ref={this.footerDom}\n          className={cx('Panel-footer Wizard-footer')}\n        >\n          {actions}\n        </div>\n\n        {affixFooter ? (\n          <div\n            ref={this.affixDom}\n            className={cx('Panel-fixedBottom Wizard-footer')}\n          >\n            <div className={cx('Panel-footer')}>{actions}</div>\n          </div>\n        ) : null}\n      </>\n    );\n  }\n\n  renderWizard() {\n    const {\n      className,\n      steps,\n      render,\n      store,\n      classPrefix: ns,\n      classnames: cx,\n      popOverContainer,\n      mode\n    } = this.props;\n\n    const currentStep = this.state.currentStep;\n    const step = Array.isArray(steps) ? steps[currentStep - 1] : null;\n\n    return (\n      <div\n        ref={this.domRef}\n        className={cx(\n          `${ns}Panel ${ns}Panel--default ${ns}Wizard ${ns}Wizard--${mode}`,\n          className\n        )}\n      >\n        <div className={`${ns}Wizard-step`}>\n          {this.renderSteps()}\n          <div\n            role=\"wizard-body\"\n            className={`${ns}Wizard-stepContent clearfix`}\n          >\n            {step ? (\n              render(\n                'body',\n                {\n                  ...step,\n                  type: 'form',\n                  wrapWithPanel: false,\n\n                  // 接口相关需要外部来接管\n                  api: null\n                },\n                {\n                  key: this.state.currentStep,\n                  ref: this.formRef,\n                  onInit: this.handleInit,\n                  onReset: this.handleReset,\n                  onSubmit: this.handleSubmit,\n                  onAction: this.handleAction,\n                  onQuery: this.handleQuery,\n                  disabled: store.loading,\n                  popOverContainer:\n                    popOverContainer || this.getPopOverContainer,\n                  onChange: this.handleChange\n                }\n              )\n            ) : currentStep === -1 ? (\n              '初始中。。'\n            ) : (\n              <p className=\"text-danger\">配置错误</p>\n            )}\n          </div>\n          {this.renderFooter()}\n        </div>\n\n        {render(\n          'dialog',\n          {\n            ...((store.action as Action) &&\n              ((store.action as Action).dialog as object)),\n            type: 'dialog'\n          },\n          {\n            key: 'dialog',\n            data: store.dialogData,\n            onConfirm: this.handleDialogConfirm,\n            onClose: this.handleDialogClose,\n            show: store.dialogOpen\n          }\n        )}\n        <Spinner size=\"lg\" overlay key=\"info\" show={store.loading} />\n      </div>\n    );\n  }\n\n  render() {\n    return this.renderWizard();\n  }\n}\n\nfunction isJumpable(step: any, index: number, currentStep: number, data: any) {\n  let canJump = false;\n\n  if (step && step.hasOwnProperty('jumpable')) {\n    canJump = step.jumpable;\n  } else if (step && step.jumpableOn) {\n    canJump = evalExpression(\n      step.jumpableOn,\n      createObject(data, {\n        currentStep\n      })\n    );\n  } else {\n    canJump = index + 1 < currentStep;\n  }\n\n  return canJump;\n}\n\n@Renderer({\n  test: /(^|\\/)wizard$/,\n  storeType: ServiceStore.name,\n  name: 'wizard',\n  isolateScope: true\n})\nexport class WizardRenderer extends Wizard {\n  static contextType = ScopedContext;\n\n  componentWillMount() {\n    const scoped = this.context as IScopedContext;\n    scoped.registerComponent(this);\n  }\n\n  componentWillUnmount() {\n    const scoped = this.context as IScopedContext;\n    scoped.unRegisterComponent(this);\n    super.componentWillUnmount();\n  }\n\n  doAction(action: Action, data: object, throwErrors: boolean = false) {\n    return this.handleAction(undefined, action, data);\n  }\n\n  submitToTarget(target: string, values: object) {\n    const scoped = this.context as IScopedContext;\n    scoped.send(target, values);\n  }\n\n  reloadTarget(target: string, data: any) {\n    const scoped = this.context as IScopedContext;\n    scoped.reload(target, data);\n  }\n\n  handleDialogConfirm(values: object[], action: Action, targets: Array<any>) {\n    super.handleDialogConfirm(values, action, targets);\n\n    const store = this.props.store;\n    const scoped = this.context as IScopedContext;\n    if (action.reload) {\n      scoped.reload(action.reload, store.data);\n    } else if (store.action && store.action.reload) {\n      scoped.reload(store.action.reload, store.data);\n    }\n  }\n}\n"
    ]
}