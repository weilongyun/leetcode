{
    "version": 3,
    "file": "Image.js",
    "sourceRoot": "",
    "sources": [
        "/src/renderers/Image.tsx"
    ],
    "names": [],
    "mappings": "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",
    "sourcesContent": [
        "import React from 'react';\nimport {Renderer, RendererProps} from '../factory';\nimport {filter} from '../utils/tpl';\nimport {ClassNamesFn, themeable, ThemeProps} from '../theme';\nimport {autobind} from '../utils/helper';\nimport {Icon} from '../components/icons';\nimport {LocaleProps, localeable} from '../locale';\nimport {BaseSchema, SchemaClassName, SchemaTpl, SchemaUrlPath} from '../Schema';\n\n/**\n * 图片展示控件。\n * 文档：https://baidu.gitee.io/amis/docs/components/image\n */\nexport interface ImageSchema extends BaseSchema {\n  /**\n   * 指定为图片展示类型\n   */\n  type: 'image' | 'static-image';\n\n  /**\n   * 默认图片地址\n   */\n  defaultImage?: SchemaUrlPath;\n\n  /**\n   * 图片标题\n   */\n  title?: SchemaTpl;\n\n  /**\n   * 关联字段名，也可以直接配置 src\n   */\n  name?: string;\n\n  /**\n   * 图片描述信息\n   */\n  imageCaption?: SchemaTpl;\n\n  /**\n   * 图片地址，如果配置了 name，这个属性不用配置。\n   */\n  src?: SchemaUrlPath;\n\n  /**\n   * 大图地址，不设置用 src\n   */\n  originalSrc?: SchemaUrlPath;\n\n  /**\n   * 是否启动放大功能。\n   */\n  enlargeAble?: boolean;\n\n  /**\n   * 是否显示尺寸。\n   */\n  showDimensions?: boolean;\n\n  alt?: string;\n\n  imageClassName?: SchemaClassName;\n  caption?: SchemaTpl;\n\n  /**\n   * 预览图模式\n   */\n  thumbMode?: 'w-full' | 'h-full' | 'contain' | 'cover';\n\n  /**\n   * 预览图比率\n   */\n  thumbRatio?: '1:1' | '4:3' | '16:9';\n}\n\nexport interface ImageThumbProps\n  extends LocaleProps,\n    ThemeProps,\n    Omit<ImageSchema, 'type'> {\n  onEnlarge?: (info: ImageThumbProps) => void;\n  index?: number;\n  onLoad?: React.EventHandler<any>;\n}\n\nexport class ImageThumb extends React.Component<ImageThumbProps> {\n  @autobind\n  handleEnlarge() {\n    const {onEnlarge, ...rest} = this.props;\n    onEnlarge && onEnlarge(rest);\n  }\n\n  render() {\n    const {\n      classnames: cx,\n      className,\n      imageClassName,\n      thumbMode,\n      thumbRatio,\n      src,\n      alt,\n      title,\n      caption,\n      onLoad,\n      enlargeAble,\n      translate: __\n    } = this.props;\n\n    return (\n      <div className={cx('Image', className)}>\n        <div\n          className={cx(\n            'Image-thumb',\n            thumbMode ? `Image-thumb--${thumbMode}` : '',\n            thumbRatio ? `Image-thumb--${thumbRatio.replace(/:/g, '-')}` : ''\n          )}\n        >\n          <img\n            onLoad={onLoad}\n            className={cx(imageClassName)}\n            src={src}\n            alt={alt}\n          />\n\n          {enlargeAble ? (\n            <div key=\"overlay\" className={cx('Image-overlay')}>\n              <a\n                data-tooltip={__('查看大图')}\n                data-position=\"bottom\"\n                target=\"_blank\"\n                onClick={this.handleEnlarge}\n              >\n                <Icon icon=\"view\" className=\"icon\" />\n              </a>\n            </div>\n          ) : null}\n        </div>\n        {title || caption ? (\n          <div key=\"caption\" className={cx('Image-info')}>\n            {title ? <div className={cx('Image-title')}>{title}</div> : null}\n            {caption ? (\n              <div className={cx('Image-caption')}>{caption}</div>\n            ) : null}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\nconst ThemedImageThumb = themeable(localeable(ImageThumb));\nexport default ThemedImageThumb;\n\nexport const imagePlaceholder =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAAP1BMVEXp7vG6vsHo7fC3ur7s8fXr8PO1uLy8wMO5vcDL0NLN0dXl6u3T19vHy86+wsXO0tbQ1djc4eTh5ejBxcjZ3eD/ULOKAAACiklEQVR42u3a2YrjMBCF4arSVrYTL3Le/1lHXqbdPTZDWheRDOcLAZGrnyLgRSIAAAAAAAAAAAAAAAAAAAAAAAAAAAD4IrmoGBHKVSxbyFEm56hMtRBN7TNPO1GRaiFpvDd5vG+lQLUQNT6EwDlCYD+4AtF2Ug4mkzKb+PFqITf6oP3wyDEEZTPaz0dT63s/2DxPw6YtFT2S7Lr0eZtrSkYP64pShrXWyZsVhaNHt6xScjdNUSy9lyG2fLTYbpyZw/NFJDeJFhdnb4wab1ohuUc0dbPnwMxB/WhFbhFtR8+boBwvSkSktmiS2fDu8oohzoqQ1BQtLgY9oht3HutrXKvrjX4SyekexTys1DVp6vojeimRf5t1ra5p0lvBTvVlz83MW3VV0TF1bfwsJOfmv9UVRYt9eN2a++gumo/qeqJJ3Ks3i+dl81FNUk90ipDX0I4TfW+WvflndT3R6WsTJ/9r3qvriSb569x8VPNaXU/0149y0XxU+4cjqSpaZK8+mq+rK4pOofE5WZFT86m6omjbzT4s1UfzZXVFf4+1uTc82aWZTeArGkzoXC3R25w1LNX2lZqVr2lfPnpZHc3MqTpOejSfmAqiHcn35kRDCk8qnnSKPpo3qqx1R6fV3swHrX/SazP/UHl0Wrml+VbRTmhpvlu0i6o3jA6IPlQTHWqJZqNv4ypumFJ0z+FtPc8VRJNI9zvln1wytrhrenLZ3GGjqHWW3O/tm5+Ftpm5Gdrht9qh2V6CCH2Y2KgmsM9imFWj+3w00eiVQx5eN8Lo44RkVJOLR5IyR2tcHJs8Y7SlDjGJtS6PteWOi53d4WQe3a8YAAAAAAAAAAAAAAAAAAAAAAAAAACgNn8AGA09DkR51CoAAAAASUVORK5CYII=';\n\nexport interface ImageFieldProps extends RendererProps {\n  className?: string;\n  imageClassName?: string;\n  placeholder: string;\n  description?: string;\n  enlargeTitle?: string;\n  enlargeCaption?: string;\n  thumbMode: 'w-full' | 'h-full' | 'contain' | 'cover';\n  thumbRatio: '1:1' | '4:3' | '16:9';\n  originalSrc?: string; // 原图\n  enlargeAble?: boolean;\n  onImageEnlarge?: (\n    info: {\n      src: string;\n      originalSrc: string;\n      title?: string;\n      caption?: string;\n      thumbMode?: 'w-full' | 'h-full' | 'contain' | 'cover';\n      thumbRatio?: '1:1' | '4:3' | '16:9';\n    },\n    target: any\n  ) => void;\n  showDimensions?: boolean;\n}\n\nexport class ImageField extends React.Component<ImageFieldProps, object> {\n  static defaultProps: Pick<\n    ImageFieldProps,\n    'defaultImage' | 'thumbMode' | 'thumbRatio' | 'placeholder'\n  > = {\n    defaultImage: imagePlaceholder,\n    thumbMode: 'contain',\n    thumbRatio: '1:1',\n    placeholder: '-'\n  };\n\n  @autobind\n  handleEnlarge({\n    src,\n    originalSrc,\n    title,\n    caption,\n    thumbMode,\n    thumbRatio\n  }: ImageThumbProps) {\n    const {onImageEnlarge, enlargeTitle, enlargeCaption} = this.props;\n\n    onImageEnlarge &&\n      onImageEnlarge(\n        {\n          src: src!,\n          originalSrc: originalSrc || src!,\n          title: enlargeTitle || title,\n          caption: enlargeCaption || caption,\n          thumbMode,\n          thumbRatio\n        },\n        this.props\n      );\n  }\n\n  render() {\n    const {\n      className,\n      defaultImage,\n      imageCaption,\n      title,\n      data,\n      imageClassName,\n      classnames: cx,\n      src,\n      thumbMode,\n      thumbRatio,\n      placeholder,\n      originalSrc,\n      enlargeAble,\n      showDimensions\n    } = this.props;\n\n    const finnalSrc = src ? filter(src, data, '| raw') : '';\n    let value = finnalSrc || this.props.value || defaultImage;\n\n    return (\n      <div className={cx('ImageField', className)}>\n        {value ? (\n          <ThemedImageThumb\n            imageClassName={imageClassName}\n            src={value}\n            title={filter(title, data)}\n            caption={filter(imageCaption, data)}\n            thumbMode={thumbMode}\n            thumbRatio={thumbRatio}\n            originalSrc={filter(originalSrc, data, '| raw')}\n            enlargeAble={enlargeAble && value !== defaultImage}\n            onEnlarge={this.handleEnlarge}\n            showDimensions={showDimensions}\n          />\n        ) : (\n          <span className=\"text-muted\">{placeholder}</span>\n        )}\n      </div>\n    );\n  }\n}\n\n@Renderer({\n  test: /(^|\\/)image$/,\n  name: 'image'\n})\nexport class ImageFieldRenderer extends ImageField {}\n"
    ]
}